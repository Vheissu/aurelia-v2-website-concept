(()=>{"use strict";var t,e,i={138:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(81),n=i.n(s),r=i(645),o=i.n(r)()(n());o.push([t.id,".message {\n  background-color: lightblue;\n}\n",""]);const a=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);s&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],c=s.base?h[0]+s.base:h[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=i(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,s);s.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var r=s(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=i(r[o]);e[a].references--}for(var h=s(t,n),c=0;c<r.length;c++){var l=i(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},569:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},655:(t,e,i)=>{function s(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function n(t,e){return function(i,s){e(i,s,t)}}function r(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}i.d(e,{fM:()=>n,gn:()=>s,w6:()=>r}),Object.create,Object.create},344:(t,e,i)=>{i.d(e,{$6:()=>Tt,BR:()=>S,CL:()=>$,DI:()=>vt,E8:()=>j,FD:()=>qt,GL:()=>v,H3:()=>kt,Ho:()=>m,JW:()=>B,P2:()=>yt,Qy:()=>C,Rp:()=>me,TI:()=>_t,Xo:()=>Xt,YM:()=>Ft,ZT:()=>Wt,b$:()=>M,bE:()=>wt,eG:()=>b,eV:()=>g,g:()=>Vt,jt:()=>xt,ow:()=>Ht,p9:()=>T,pU:()=>L,pZ:()=>Rt,qo:()=>w,y5:()=>p});var s=i(932);const n=String,r=s.SF.getOwn,o=s.SF.hasOwn,a=s.SF.define,h=t=>"function"==typeof t,c=t=>"string"==typeof t,l=()=>Object.create(null),u=t=>new Error(t),d={},p=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=d[t];if(void 0!==e)return e;const i=t.length;if(0===i)return d[t]=!1;let s=0,n=0;for(;n<i;++n)if(s=x(t,n),0===n&&48===s&&i>1||s<48||s>57)return d[t]=!1;return d[t]=!0}default:return!1}},f=function(){const t=Object.assign(l(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,i)=>{const s=t.length;if(0===s)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<s;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=i(a,r),r=!1);return o}}(),g=function(){const t=l(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return i=>{let s=t[i];return void 0===s&&(s=t[i]=f(i,e)),s}}(),m=function(){const t=l();return e=>{let i=t[e];return void 0===i&&(i=g(e),i.length>0&&(i=i[0].toUpperCase()+i.slice(1)),t[e]=i),i}}(),v=function(){const t=l(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return i=>{let s=t[i];return void 0===s&&(s=t[i]=f(i,e)),s}}(),w=t=>{const e=t.length,i=Array(e);let s=0;for(;s<e;++s)i[s]=t[s];return i},y=(t,e,i)=>({configurable:!0,enumerable:i.enumerable,get(){const t=i.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:i.enumerable}),t}}),b=(...t)=>{const e=[];let i=0;const s=t.length;let n,r=0,o=0;for(;o<s;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[i++]=n[t]}return e},S=(...t)=>{const e=t.length;let i,s=0;for(;e>s;++s)if(i=t[s],void 0!==i)return i;throw u("No default value found")},C=function(){const t=Function.prototype,e=Object.getPrototypeOf,i=new WeakMap;let s,n=t,r=0;return function(o){if(s=i.get(o),void 0===s)for(i.set(o,s=[n=o]),r=0;(n=e(n))!==t;)s[++r]=n;return s}}();function k(...t){return Object.assign(l(),...t)}const A=function(){const t=new WeakMap;let e=!1,i="",s=0;return n=>(e=t.get(n),void 0===e&&(i=n.toString(),s=i.length,e=s>=29&&s<=100&&125===x(i,s-1)&&x(i,s-2)<=32&&93===x(i,s-3)&&101===x(i,s-4)&&100===x(i,s-5)&&111===x(i,s-6)&&99===x(i,s-7)&&32===x(i,s-8)&&101===x(i,s-9)&&118===x(i,s-10)&&105===x(i,s-11)&&116===x(i,s-12)&&97===x(i,s-13)&&110===x(i,s-14)&&88===x(i,s-15),t.set(n,e)),e)}(),T=(t,e)=>t instanceof Promise?t.then(e):e(t),$=(...t)=>{let e,i,s,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===i?i=e:void 0===s?s=[i,e]:s.push(e));return void 0===s?i:Promise.all(s)},x=(t,e)=>t.charCodeAt(e),I="au:annotation",R=(t,e)=>void 0===e?`${I}:${t}`:`${I}:${t}:${e}`,E=(t,e)=>{const i=r(I,t);void 0===i?a(I,[e],t):i.push(e)},N=Object.freeze({name:"au:annotation",appendTo:E,set(t,e,i){a(R(e),i,t)},get:(t,e)=>r(R(e),t),getKeys(t){let e=r(I,t);return void 0===e&&a(I,e=[],t),e},isKey:t=>t.startsWith(I),keyFor:R}),O="au:resource",P=Object.freeze({name:O,appendTo(t,e){const i=r(O,t);void 0===i?a(O,[e],t):i.push(e)},has:t=>o(O,t),getAll(t){const e=r(O,t);return void 0===e?Ht:e.map((e=>r(e,t)))},getKeys(t){let e=r(O,t);return void 0===e&&a(O,e=[],t),e},isKey:t=>t.startsWith(O),keyFor:(t,e)=>void 0===e?`${O}:${t}`:`${O}:${t}:${e}`}),M={annotation:N,resource:P},U=Object.prototype.hasOwnProperty;function B(t,e,i,s){let n=r(R(t),i);return void 0===n?(n=e[t],void 0===n?(n=i[t],void 0!==n&&U.call(i,t)?n:s()):n):n}function L(t,e,i){let s=r(R(t),e);return void 0===s?(s=e[t],void 0!==s&&U.call(e,t)?s:i()):s}function j(t,e,i){const s=e[t];return void 0===s?i():s}const F=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let V=0;class D{constructor(t,e){this.parent=t,this.config=e,this.id=++V,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=l()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(l(),t.res,this.root.res):this.res=l()),this.u.set(wt,W)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw J(t);let e,i,n,r,o,a=0,h=t.length;for(;a<h;++a)if(e=t[a],(0,s.Kn)(e))if(_(e))e.register(this);else if(M.resource.has(e)){const t=M.resource.getAll(e);if(1===t.length)t[0].register(this);else for(r=0,o=t.length;o>r;)t[r].register(this),++r}else if(K(e))Ft.singleton(e,e).register(this);else for(i=Object.keys(e),r=0,o=i.length;r<o;++r)n=e[i[r]],(0,s.Kn)(n)&&(_(n)?n.register(this):this.register(n));return--this.t,this}registerResolver(t,e,i=!1){H(t);const s=this.u,n=s.get(t);if(null==n){if(s.set(t,e),G(t)){if(void 0!==this.res[t])throw Q(t);this.res[t]=e}}else n instanceof Nt&&4===n.R?n._state.push(e):s.set(t,new Nt(t,4,[n,e]));return i&&this.i.set(t,e),e}registerTransformer(t,e){const i=this.getResolver(t);if(null==i)return!1;if(i.getFactory){const t=i.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(H(t),void 0!==t.resolve)return t;let i,s,n=this;for(;null!=n;){if(i=n.u.get(t),null!=i)return i;if(null==n.parent)return s=z(t)?this:n,e?this.$(t,s):null;n=n.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(H(t),t.$isResolver)return t.resolve(this,this);let e,i,s=this;for(;null!=s;){if(e=s.u.get(t),null!=e)return e.resolve(s,this);if(null==s.parent)return i=z(t)?this:s,e=this.$(t,i),e.resolve(s,this);s=s.parent}throw Z(t)}getAll(t,e=!1){H(t);const i=this;let s,n=i;if(e){let e=Ht;for(;null!=n;)s=n.u.get(t),null!=s&&(e=e.concat(q(s,n,i))),n=n.parent;return e}for(;null!=n;){if(s=n.u.get(t),null!=s)return q(s,n,i);if(n=n.parent,null==n)return Ht}return Ht}invoke(t,e){if(A(t))throw it(t);return void 0===e?new t(...ft(t).map(Ut,this)):new t(...ft(t).map(Ut,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(A(t))throw it(t);this.h.set(t,e=new Lt(t,ft(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===ut.DEFAULT?new D(this,this.config):new D(this,ut.from({...this.config,inheritParentResources:!1})):new D(this,ut.from(t??this.config))}disposeResolvers(){const t=this.u,e=this.i;let i,s;for([s,i]of e.entries())i.dispose(),t.delete(s);e.clear()}find(t,e){const i=t.keyFrom(e);let s=this.res[i];if(void 0===s&&(s=this.root.res[i],void 0===s))return null;if(null===s)return null;if(h(s.getFactory)){const e=s.getFactory(this);if(null==e)return null;const i=r(t.name,e.Type);return void 0===i?null:i}return null}create(t,e){const i=t.keyFrom(e);let s=this.res[i];return void 0===s?(s=this.root.res[i],void 0===s?null:s.resolve(this.root,this)??null):s.resolve(this,this)??null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}$(t,e){if(!h(t))throw Y(t);if(F.has(t.name))throw X(t);if(_(t)){const i=t.register(e,t);if(!(i instanceof Object)||null==i.resolve){const i=e.u.get(t);if(null!=i)return i;throw tt()}return i}if(M.resource.has(t)){const i=M.resource.getAll(t);if(1===i.length)i[0].register(e);else{const t=i.length;for(let s=0;s<t;++s)i[s].register(e)}const s=e.u.get(t);if(null!=s)return s;throw tt()}if(t.$isInterface)throw et(t.friendlyName);{const i=this.config.defaultResolver(t,e);return e.u.set(t,i),i}}}function H(t){if(null==t)throw u("AUR0014")}const q=(t,e,i)=>{if(t instanceof Nt&&4===t.R){const s=t._state;let n=s.length;const r=new Array(n);for(;n--;)r[n]=s[n].resolve(e,i);return r}return[t.resolve(e,i)]},W={$isResolver:!0,resolve:(t,e)=>e},_=t=>h(t.register),z=t=>(t=>_(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,K=t=>void 0!==t.prototype,G=t=>c(t)&&t.indexOf(":")>0,J=t=>u(`AUR0006:${t.map(n)}`),Q=t=>u(`AUR0007:${n(t)}`),Z=t=>u(`AUR0008:${n(t)}`),Y=t=>u(`AUR0009:${n(t)}`),X=t=>u(`AUR0010:${t.name}`),tt=()=>u("AUR0011"),et=t=>u(`AUR0012:${t}`),it=t=>u(`AUR0015:${t.name}`),st=(t,e)=>new Nt(t,0,e),nt=(t,e)=>new Nt(t,1,e),rt=new WeakMap,ot=t=>(e,i,s)=>{let n=rt.get(e);if(void 0===n&&rt.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=t(e,i,s);return n.set(s,r),r};(0,s.RT)(Reflect,!1,!1);class at{constructor(t,e){this.c=t,this.k=e}instance(t){return this.C(0,t)}singleton(t){return this.C(1,t)}transient(t){return this.C(2,t)}callback(t){return this.C(3,t)}cachedCallback(t){return this.C(3,ot(t))}aliasTo(t){return this.C(5,t)}C(t,e){const{c:i,k:s}=this;return this.c=this.k=void 0,i.registerResolver(s,new Nt(s,t,e))}}const ht=t=>{const e=t.slice(),i=Object.keys(t),s=i.length;let n;for(let r=0;r<s;++r)n=i[r],p(n)||(e[n]=t[n]);return e},ct={none(t){throw lt(t)},singleton:t=>new Nt(t,1,t),transient:t=>new Nt(t,2,t)},lt=t=>u(`AUR0002:${n(t)}`);class ut{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===ut.DEFAULT?ut.DEFAULT:new ut(t.inheritParentResources??!1,t.defaultResolver??ct.singleton)}}ut.DEFAULT=ut.from({});const dt=t=>{const e=R("di:paramtypes");return r(e,t)},pt=t=>{const e=R("di:paramtypes");let i=r(e,t);return void 0===i&&(a(e,i=[],t),E(t,e)),i},ft=t=>{const e=R("di:dependencies");let i=r(e,t);if(void 0===i){const s=t.inject;if(void 0===s){const e=vt.getDesignParamtypes(t),s=dt(t);if(void 0===e)if(void 0===s){const e=Object.getPrototypeOf(t);i=h(e)&&e!==Function.prototype?ht(ft(e)):[]}else i=ht(s);else if(void 0===s)i=ht(e);else{i=ht(e);let t,n=s.length,r=0;for(;r<n;++r)t=s[r],void 0!==t&&(i[r]=t);const o=Object.keys(s);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],p(a)||(i[a]=s[a])}}else i=ht(s);a(e,i,t),E(t,e)}return i},gt=(t,e)=>{const i=h(t)?t:e,s=c(t)?t:void 0,n=function(t,e,i){if(null==t||void 0!==new.target)throw mt(n.friendlyName);pt(t)[i]=n};return n.$isInterface=!0,n.friendlyName=null==s?"(anonymous)":s,null!=i&&(n.register=(t,e)=>i(new at(t,e??n))),n.toString=()=>`InterfaceSymbol<${n.friendlyName}>`,n},mt=t=>u(`AUR0001:${t}`),vt={createContainer:t=>new D(null,ut.from(t)),getDesignParamtypes:t=>r("design:paramtypes",t),getAnnotationParamtypes:dt,getOrCreateAnnotationParamTypes:pt,getDependencies:ft,createInterface:gt,inject:(...t)=>(e,i,s)=>{if("number"==typeof s){const i=pt(e),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const s=pt(e.constructor),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const e=s.value,i=pt(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(i[r]=n)}else{const i=pt(e);let s,n=0;for(;n<t.length;++n)s=t[n],void 0!==s&&(i[n]=s)}},transient:t=>(t.register=function(e){return Ft.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=At)=>(t.register=function(e){return Ft.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},wt=gt("IContainer"),yt=wt;function bt(t){return function(e){const i=function(t,e,s){St(i)(t,e,s)};return i.$isResolver=!0,i.resolve=function(i,s){return t(e,i,s)},i}}const St=vt.inject;function Ct(t){return vt.transient(t)}function kt(t){return null==t?Ct:Ct(t)}const At={scoped:!1};vt.singleton;const Tt=($t=(t,e,i,s)=>i.getAll(t,s),(t,e)=>{e=!!e;const i=function(t,e,s){St(i)(t,e,s)};return i.$isResolver=!0,i.resolve=function(i,s){return $t(t,0,s,e)},i});var $t;bt(((t,e,i)=>()=>i.get(t)));const xt=bt(((t,e,i)=>i.has(t,!0)?i.get(t):void 0)),It=(t,e,i)=>{St(It)(t,e,i)};It.$isResolver=!0,It.resolve=()=>{},bt(((t,e,i)=>(...s)=>e.getFactory(t).construct(i,s))),bt(((t,e,i)=>{const s=Et(t,e,i),r=new Vt(n(t),s);return i.registerResolver(t,r,!0),s}));const Rt=bt(((t,e,i)=>Et(t,e,i))),Et=(t,e,i)=>e.getFactory(t).construct(i);class Nt{constructor(t,e,i){this.k=t,this.R=e,this._state=i,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.R){case 0:return this._state;case 1:if(this.resolving)throw Ot(this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.R=0,this.resolving=!1,this._state;case 2:{const i=t.getFactory(this._state);if(null===i)throw Pt(this.k);return i.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw Mt(this.R)}}getFactory(t){switch(this.R){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}const Ot=t=>u(`AUR0003:${t}`),Pt=t=>u(`AUR0004:${n(t)}`),Mt=t=>u(`AUR0005:${t}`);function Ut(t){return this.get(t)}function Bt(t,e){return e(t)}class Lt{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let i;return i=void 0===e?new this.Type(...this.dependencies.map(Ut,t)):new this.Type(...this.dependencies.map(Ut,t),...e),null==this.transformers?i:this.transformers.reduce(Bt,i)}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}class jt{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Ft={instance:st,singleton:nt,transient:(t,e)=>new Nt(t,2,e),callback:(t,e)=>new Nt(t,3,e),cachedCallback:(t,e)=>new Nt(t,3,ot(e)),aliasTo:(t,e)=>new Nt(e,5,t),defer:(t,...e)=>new jt(t,e)};class Vt{constructor(t,e){this.A=null,this.j=t,void 0!==e&&(this.A=e)}get friendlyName(){return this.j}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw Dt(this.j);return this.A}dispose(){this.A=null}}const Dt=t=>u(`AUR0013:${t}`),Ht=Object.freeze([]),qt=Object.freeze({});function Wt(){}const _t=gt("IPlatform");function zt(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Kt(t,e){return function(i,s){e(i,s,t)}}var Gt,Jt;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Gt||(Gt={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Jt||(Jt={}));const Qt=gt("ILogConfig",(t=>t.instance(new se(0,3)))),Zt=gt("ISink"),Yt=gt("ILogEventFactory",(t=>t.singleton(ae))),Xt=gt("ILogger",(t=>t.singleton(ce))),te=gt("ILogScope"),ee=Object.freeze({key:R("logger-sink-handles"),define(t,e){return a(this.key,e.handles,t.prototype),t},getHandles(t){return s.SF.get(this.key,t)}}),ie=k({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class se{constructor(t,e){this.colorOptions=t,this.level=e}}const ne=function(){const t=[k({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),k({TRC:ie.grey("TRC"),DBG:ie.grey("DBG"),INF:ie.white("INF"),WRN:ie.yellow("WRN"),ERR:ie.red("ERR"),FTL:ie.red("FTL"),QQQ:ie.grey("???")})];return(e,i)=>e<=0?t[i].TRC:e<=1?t[i].DBG:e<=2?t[i].INF:e<=3?t[i].WRN:e<=4?t[i].ERR:e<=5?t[i].FTL:t[i].QQQ}(),re=(t,e)=>0===e?new Date(t).toISOString():ie.grey(new Date(t).toISOString());class oe{constructor(t,e,i,s,n,r){this.severity=t,this.message=e,this.optionalParams=i,this.scope=s,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:i,colorOptions:s,timestamp:n}=this;return 0===i.length?`${re(n,s)} [${ne(t,s)}] ${e}`:`${re(n,s)} [${ne(t,s)} ${((t,e)=>0===e?t.join("."):t.map(ie.cyan).join("."))(i,s)}] ${e}`}}let ae=class{constructor(t){this.config=t}createLogEvent(t,e,i,s){return new oe(e,i,s,t.scope,this.config.colorOptions,Date.now())}};ae=zt([Kt(0,Qt)],ae);let he=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const i=t.optionalParams;if(void 0===i||0===i.length){const i=t.toString();switch(t.severity){case 0:case 1:return e.debug(i);case 2:return e.info(i);case 3:return e.warn(i);case 4:case 5:return e.error(i)}}else{let s=t.toString(),n=0;for(;s.includes("%s");)s=s.replace("%s",String(i[n++]));switch(t.severity){case 0:case 1:return e.debug(s,...i.slice(n));case 2:return e.info(s,...i.slice(n));case 3:return e.warn(s,...i.slice(n));case 4:case 5:return e.error(s,...i.slice(n))}}}}static register(e){nt(Zt,t).register(e)}};he=zt([Kt(0,_t)],he);let ce=class t{constructor(t,e,i,s=[],n=null){let r,o,a,h,c,u;if(this.scope=s,this.I=l(),this.config=t,this.f=e,this.sinks=i,null===n){this.root=this,this.parent=this,r=this.O=[],o=this.M=[],a=this.F=[],h=this.L=[],c=this.U=[],u=this.T=[];for(const t of i){const e=ee.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.O=n.O,o=this.M=n.M,a=this.F=n.F,h=this.L=n.L,c=this.U=n.U,u=this.T=n.T}trace(t,...e){this.config.level<=0&&this.P(this.O,0,t,e)}debug(t,...e){this.config.level<=1&&this.P(this.M,1,t,e)}info(t,...e){this.config.level<=2&&this.P(this.F,2,t,e)}warn(t,...e){this.config.level<=3&&this.P(this.L,3,t,e)}error(t,...e){this.config.level<=4&&this.P(this.U,4,t,e)}fatal(t,...e){this.config.level<=5&&this.P(this.T,5,t,e)}scopeTo(e){const i=this.I;let s=i[e];return void 0===s&&(s=i[e]=new t(this.config,this.f,void 0,this.scope.concat(e),this)),s}P(t,e,i,s){const n=h(i)?i():i,r=this.f.createLogEvent(this,e,n,s);for(let e=0,i=t.length;e<i;++e)t[e].handleEvent(r)}};zt([y],ce.prototype,"trace",null),zt([y],ce.prototype,"debug",null),zt([y],ce.prototype,"info",null),zt([y],ce.prototype,"warn",null),zt([y],ce.prototype,"error",null),zt([y],ce.prototype,"fatal",null),ce=zt([Kt(0,Qt),Kt(1,Yt),Kt(2,Tt(Zt)),Kt(3,xt(te)),Kt(4,It)],ce),k({create:({level:t=3,colorOptions:e=0,sinks:i=[]}={})=>k({register(s){s.register(st(Qt,new se(e,t)));for(const t of i)h(t)?s.register(nt(Zt,t)):s.register(t);return s}})}),gt((t=>t.singleton(de)));const le=t=>t;class ue{constructor(t){this.N=new Map,this.W=new Map,this.B=t}transform(t){if(t instanceof Promise)return this._(t);if("object"==typeof t&&null!==t)return this.G(t);throw u(`Invalid input: ${String(t)}. Expected Promise or Object.`)}_(t){if(this.N.has(t))return this.N.get(t);const e=t.then((t=>this.G(t)));return this.N.set(t,e),e.then((e=>{this.N.set(t,e)})),e}G(t){if(this.W.has(t))return this.W.get(t);const e=this.B(this.K(t));return this.W.set(t,e),e instanceof Promise&&e.then((e=>{this.W.set(t,e)})),e}K(t){if(null==t)throw new Error(`Invalid input: ${String(t)}. Expected Object.`);if("object"!=typeof t)return new pe(t,[]);let e,i,s,n;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;i=h(e.register),s=!1,n=Ht;break;case"function":i=h(e.register),s=void 0!==e.prototype,n=M.resource.getAll(e);break;default:continue}r.push(new fe(o,e,i,s,n))}return new pe(t,r)}}class de{constructor(){this.transformers=new Map}load(t,e=le){const i=this.transformers;let s=i.get(e);return void 0===s&&i.set(e,s=new ue(e)),s.transform(t)}dispose(){this.transformers.clear()}}class pe{constructor(t,e){this.raw=t,this.items=e}}class fe{constructor(t,e,i,s,n){this.key=t,this.value=e,this.isRegistry=i,this.isConstructable=s,this.definitions=n}}class ge{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const me=gt("IEventAggregator",(t=>t.singleton(ve)));class ve{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw u(`Invalid channel name or instance: ${t}.`);if(c(t)){let i=this.eventLookup[t];if(void 0!==i){i=i.slice();let s=i.length;for(;s-- >0;)i[s](e,t)}}else{const e=this.messageHandlers.slice();let i=e.length;for(;i-- >0;)e[i].handle(t)}}subscribe(t,e){if(!t)throw u(`Invalid channel name or type: ${t}.`);let i,s;return c(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),i=e,s=this.eventLookup[t]):(i=new ge(t,e),s=this.messageHandlers),s.push(i),{dispose(){const t=s.indexOf(i);-1!==t&&s.splice(t,1)}}}subscribeOnce(t,e){const i=this.subscribe(t,((t,s)=>{i.dispose(),e(t,s)}));return i}}},932:(t,e,i)=>{function s(t){return"object"==typeof t&&null!==t||"function"==typeof t}function n(t){return null==t}i.d(e,{Kn:()=>s,RT:()=>R,SF:()=>$});let r=new WeakMap;const o=(t,e,i,s,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${i}' to be of type ${n}, but got: ${Object.prototype.toString.call(s)} (${String(s)})`);function a(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function h(t,e,i){let s=r.get(t);if(void 0===s){if(!i)return;s=new Map,r.set(t,s)}let n=s.get(e);if(void 0===n){if(!i)return;n=new Map,s.set(e,n)}return n}function c(t,e,i){const s=h(e,i,!1);return void 0!==s&&s.has(t)}function l(t,e,i){if(c(t,e,i))return!0;const s=N(e);return null!==s&&l(t,s,i)}function u(t,e,i){const s=h(e,i,!1);if(void 0!==s)return s.get(t)}function d(t,e,i){if(c(t,e,i))return u(t,e,i);const s=N(e);return null!==s?d(t,s,i):void 0}function p(t,e,i,s){h(i,s,!0).set(t,e)}function f(t,e){const i=[],s=h(t,e,!1);if(void 0===s)return i;const n=s.keys();let r=0;for(const t of n)i[r]=t,++r;return i}function g(t,e){const i=f(t,e),s=N(t);if(null===s)return i;const n=g(s,e),r=i.length;if(0===r)return n;const o=n.length;if(0===o)return i;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=i[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function m(t,e){return function(i,n){if(!s(i))throw o("@metadata",[t,e,i,n],"target",i,"Object or Function");p(t,e,i,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function v(t,e,i,r){if(void 0!==i){if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,i,r],"decorators",t,"Array");if(!s(e))throw o("Metadata.decorate",[t,e,i,r],"target",e,"Object or Function");if(!s(r)&&!n(r))throw o("Metadata.decorate",[t,e,i,r],"attributes",r,"Object, Function, null, or undefined");return null===r&&(r=void 0),i=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(i),function(t,e,i,r){for(let a=t.length-1;a>=0;--a){const h=(0,t[a])(e,i,r);if(!n(h)){if(!s(h))throw o("DecorateProperty",[t,e,i,r],"decorated",h,"Object, Function, null, or undefined");r=h}}return r}(t,e,i,r)}if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,i,r],"decorators",t,"Array");if("function"!=typeof e)throw o("Metadata.decorate",[t,e,i,r],"target",e,"Function");return function(t,e){for(let i=t.length-1;i>=0;--i){const s=(0,t[i])(e);if(!n(s)){if("function"!=typeof s)throw o("DecorateConstructor",[t,e],"decorated",s,"Function, null, or undefined");e=s}}return e}(t,e)}function w(t,e,i,n){if(!s(i))throw o("Metadata.define",[t,e,i,n],"target",i,"Object or Function");return p(t,e,i,a(n))}function y(t,e,i){if(!s(e))throw o("Metadata.has",[t,e,i],"target",e,"Object or Function");return l(t,e,a(i))}function b(t,e,i){if(!s(e))throw o("Metadata.hasOwn",[t,e,i],"target",e,"Object or Function");return c(t,e,a(i))}function S(t,e,i){if(!s(e))throw o("Metadata.get",[t,e,i],"target",e,"Object or Function");return d(t,e,a(i))}function C(t,e,i){if(!s(e))throw o("Metadata.getOwn",[t,e,i],"target",e,"Object or Function");return u(t,e,a(i))}function k(t,e){if(!s(t))throw o("Metadata.getKeys",[t,e],"target",t,"Object or Function");return g(t,a(e))}function A(t,e){if(!s(t))throw o("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return f(t,a(e))}function T(t,e,i){if(!s(e))throw o("Metadata.delete",[t,e,i],"target",e,"Object or Function");return function(t,e,i){const s=h(t,i,!1);return void 0!==s&&s.delete(e)}(e,t,a(i))}const $={define:w,has:y,hasOwn:b,get:S,getOwn:C,getKeys:k,getOwnKeys:A,delete:T},x="[[$au]]",I=(t,e,i)=>[[x,r],["metadata",m],["decorate",v],["defineMetadata",w],["hasMetadata",y],["hasOwnMetadata",b],["getMetadata",S],["getOwnMetadata",C],["getMetadataKeys",k],["getOwnMetadataKeys",A],["deleteMetadata",T]].forEach((([s,n])=>((t,e,i,s,n)=>{if(!Reflect.defineProperty(t,e,{writable:s,enumerable:!1,configurable:n,value:i}))throw E(`AUR1000:${e}`)})(t,s,n,e,i))),R=(t,e=!0,i=!1,s=!0,n=!0)=>{if((t=>x in t)(t)){if(t[x]===r)return;if(t[x]instanceof WeakMap)return void(r=t[x]);throw E("AUR1001")}const o="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(o.length>0){if(e){const t=o.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw E(`AUR1002:${t}`)}i&&I(t,s,n)}else I(t,s,n)},E=t=>new Error(t),N=Object.getPrototypeOf},58:(t,e,i)=>{i.d(e,{o:()=>r});var s=i(968);const n=new Map;class r extends s.t4{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document location history navigator customElements".split(" ").forEach((i=>this[i]=i in e?e[i]:t[i])),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach((i=>this[i]=i in e?e[i]:t[i]?.bind(t)??o(i))),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new s.wn(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new s.wn(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let i=n.get(t);return void 0===i&&n.set(t,i=new r(t,e)),i}static set(t,e){n.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}const o=t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}},968:(t,e,i)=>{i.d(e,{Nj:()=>a,t4:()=>r,wn:()=>o});const s=new Map,n=t=>()=>{throw C(`AUR1005:${t}`)};class r{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach((i=>{this[i]=i in e?e[i]:t[i]})),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach((i=>{this[i]=i in e?e[i]:t[i]?.bind(t)??n(i)})),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??n("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new o(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let i=s.get(t);return void 0===i&&s.set(t,i=new r(t,e)),i}static set(t,e){s.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class o{constructor(t,e,i){this.platform=t,this.$request=e,this.$cancel=i,this.t=void 0,this.i=0,this.h=[],this.u=[],this.T=[],this.$=!1,this.R=void 0,this.A=[],this.P=0,this.M=0,this.U=0,this.q=()=>{this.$||(this.$=!0,this.M=this.I(),this.$request())},this.I=t.performanceNow,this._=new d(t.console)}get isEmpty(){return 0===this.i&&0===this.h.length&&0===this.u.length&&0===this.T.length}get C(){return 0===this.i&&this.h.every(y)&&this.u.every(y)&&this.T.every(y)}flush(t=this.I()){if(this.$=!1,this.U=t,void 0===this.t){if(this.u.length>0&&(this.h.push(...this.u),this.u.length=0),this.T.length>0){let e=-1;for(;++e<this.T.length&&this.T[e].queueTime<=t;);this.h.push(...this.T.splice(0,e))}let e;for(;this.h.length>0;)if((e=this.h.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.q();++this.i}if(this.u.length>0&&(this.h.push(...this.u),this.u.length=0),this.T.length>0){let e=-1;for(;++e<this.T.length&&this.T[e].queueTime<=t;);this.h.push(...this.T.splice(0,e))}if((this.h.length>0||this.T.length>0||this.i>0)&&this.q(),void 0!==this.R&&this.C){const t=this.R;this.R=void 0,t.resolve()}}else this.q()}cancel(){this.$&&(this.$cancel(),this.$=!1)}async yield(){this.isEmpty||(void 0===this.R&&(this.R=w()),await this.R)}queueTask(t,e){const{delay:i,preempt:s,persistent:n,reusable:r,suspend:o}={...f,...e};if(s){if(i>0)throw b();if(n)throw S()}0===this.h.length&&this.q();const a=this.I();let h;if(r){const e=this.A,c=this.P-1;c>=0?(h=e[c],e[c]=void 0,this.P=c,h.reuse(a,i,s,n,o,t)):h=new u(this._,this,a,a+i,s,n,o,r,t)}else h=new u(this._,this,a,a+i,s,n,o,r,t);return s?this.h[this.h.length]=h:0===i?this.u[this.u.length]=h:this.T[this.T.length]=h,h}remove(t){let e=this.h.indexOf(t);if(e>-1)this.h.splice(e,1);else if(e=this.u.indexOf(t),e>-1)this.u.splice(e,1);else{if(e=this.T.indexOf(t),!(e>-1))throw C(`Task #${t.id} could not be found`);this.T.splice(e,1)}}N(t){this.A[this.P++]=t}j(t){t.reset(this.I()),t.createdTime===t.queueTime?this.u[this.u.length]=t:this.T[this.T.length]=t}F(t){if(!0===t.suspend){if(this.t!==t)throw C(`Async task completion mismatch: suspenderTask=${this.t?.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.R&&this.C){const t=this.R;this.R=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class a extends Error{constructor(t){super("Task was canceled."),this.task=t}}let h=0;var c,l;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(c||(c={}));class u{constructor(t,e,i,s,n,r,o,a,c){this.taskQueue=e,this.createdTime=i,this.queueTime=s,this.preempt=n,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=c,this.id=++h,this.O=void 0,this.W=void 0,this.B=void 0,this.G=0,this._=t}get result(){const t=this.B;if(void 0===t)switch(this.G){case 0:{const t=this.B=w();return this.O=t.resolve,this.W=t.reject,t}case 1:throw C("Trying to await task from within task will cause a deadlock.");case 2:return this.B=Promise.resolve();case 3:return this.B=Promise.reject(new a(this))}return t}get status(){return this.G}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.G)throw C(`Cannot run task in ${this.G} state`);const{persistent:e,reusable:i,taskQueue:s,callback:n,O:r,W:o,createdTime:a}=this;let h;this.G=1;try{h=n(t-a),h instanceof Promise?h.then((t=>{this.persistent?s.j(this):(this.G=e?3:2,this.dispose()),s.F(this),void 0!==r&&r(t),!this.persistent&&i&&s.N(this)})).catch((t=>{if(this.persistent||this.dispose(),s.F(this),void 0===o)throw t;o(t)})):(this.persistent?s.j(this):(this.G=e?3:2,this.dispose()),void 0!==r&&r(h),!this.persistent&&i&&s.N(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.G){const t=this.taskQueue,e=this.reusable,i=this.W;return t.remove(this),t.isEmpty&&t.cancel(),this.G=3,this.dispose(),e&&t.N(this),void 0!==i&&i(new a(this)),!0}return!(1!==this.G||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.G=0,this.O=void 0,this.W=void 0,this.B=void 0}reuse(t,e,i,s,n,r){this.createdTime=t,this.queueTime=t+e,this.preempt=i,this.persistent=s,this.suspend=n,this.callback=r,this.G=0}dispose(){this.callback=void 0,this.O=void 0,this.W=void 0,this.B=void 0}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(l||(l={}));class d{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,i){if(e instanceof o){const s=`processing=${e.h.length} pending=${e.u.length} delayed=${e.T.length} flushReq=${e.$} susTask=${!!e.t}`;this.console.log(`${t}[Q.${i}] ${s}`)}else{const s=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,h=e.persistent,c=e.suspend,l=`id=${s} created=${n} queue=${r} preempt=${o} persistent=${h} reusable=${a} status=${p(e.G)} suspend=${c}`;this.console.log(`${t}[T.${i}] ${l}`)}}}const p=t=>{switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}},f={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let g,m;const v=(t,e)=>{g=t,m=e},w=()=>{const t=new Promise(v);return t.resolve=g,t.reject=m,t},y=t=>t.persistent,b=()=>C("AUR1006"),S=()=>C("AUR1007"),C=t=>new Error(t)},134:(t,e,i)=>{i.d(e,{FdA:()=>Oo,EQ_:()=>Kd,Qrh:()=>Fa,brw:()=>zo,b_N:()=>ic,IUY:()=>ph,qN_:()=>Za,zQX:()=>Lh,PEj:()=>oc,A8T:()=>Bh,ND1:()=>xh,TIm:()=>sa,EmM:()=>Uh,BkS:()=>_d,ExJ:()=>ir,OVJ:()=>Lo,MoW:()=>jh,T5P:()=>_a});var s=i(344),n=i(932);const r=Object,o=r.prototype.hasOwnProperty,a=Reflect.defineProperty,h=t=>new Error(t),c=t=>"function"==typeof t,l=t=>t instanceof r,u=t=>t instanceof Array,d=t=>t instanceof Set,p=t=>t instanceof Map,f=r.is;function g(t,e,i){return a(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i}),i}function m(t,e,i){e in t||g(t,e,i)}const v=String,w=s.DI.createInterface,y=()=>r.create(null),b=n.SF.getOwn;n.SF.hasOwn;const S=n.SF.define;var C,k;s.b$.annotation.keyFor,s.b$.resource.keyFor,s.b$.resource.appendTo,(k=C||(C={}))[k.AccessThis=0]="AccessThis",k[k.AccessScope=1]="AccessScope",k[k.ArrayLiteral=2]="ArrayLiteral",k[k.ObjectLiteral=3]="ObjectLiteral",k[k.PrimitiveLiteral=4]="PrimitiveLiteral",k[k.Template=5]="Template",k[k.Unary=6]="Unary",k[k.CallScope=7]="CallScope",k[k.CallMember=8]="CallMember",k[k.CallFunction=9]="CallFunction",k[k.AccessMember=10]="AccessMember",k[k.AccessKeyed=11]="AccessKeyed",k[k.TaggedTemplate=12]="TaggedTemplate",k[k.Binary=13]="Binary",k[k.Conditional=14]="Conditional",k[k.Assign=15]="Assign",k[k.ArrowFunction=16]="ArrowFunction",k[k.ValueConverter=17]="ValueConverter",k[k.BindingBehavior=18]="BindingBehavior",k[k.ArrayBindingPattern=19]="ArrayBindingPattern",k[k.ObjectBindingPattern=20]="ObjectBindingPattern",k[k.BindingIdentifier=21]="BindingIdentifier",k[k.ForOfStatement=22]="ForOfStatement",k[k.Interpolation=23]="Interpolation",k[k.ArrayDestructuring=24]="ArrayDestructuring",k[k.ObjectDestructuring=25]="ObjectDestructuring",k[k.DestructuringAssignmentLeaf=26]="DestructuringAssignmentLeaf",k[k.DestructuringAssignmentRestLeaf=27]="DestructuringAssignmentRestLeaf",k[k.Custom=28]="Custom";class A{constructor(t){this.value=t,this.$kind=28}evaluate(t,e,i){return this.value}assign(t,e,i){return i}bind(t,e){}unbind(t,e){}accept(t){}}class T{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.$kind=18,this.key=`_bb_${e}`}}class ${constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.$kind=17}}class x{constructor(t,e){this.target=t,this.value=e,this.$kind=15}}class I{constructor(t,e,i){this.condition=t,this.yes=e,this.no=i,this.$kind=14}}class R{constructor(t=0){this.ancestor=t,this.$kind=0}}R.$this=new R(0),R.$parent=new R(1);class E{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=1}}class N{constructor(t,e,i=!1){this.object=t,this.name=e,this.optional=i,this.$kind=10}}class O{constructor(t,e,i=!1){this.object=t,this.key=e,this.optional=i,this.$kind=11}}class P{constructor(t,e,i=0,s=!1){this.name=t,this.args=e,this.ancestor=i,this.optional=s,this.$kind=7}}class M{constructor(t,e,i,s=!1,n=!1){this.object=t,this.name=e,this.args=i,this.optionalMember=s,this.optionalCall=n,this.$kind=8}}class U{constructor(t,e,i=!1){this.func=t,this.args=e,this.optional=i,this.$kind=9}}class B{constructor(t,e,i){this.operation=t,this.left=e,this.right=i,this.$kind=13}}class L{constructor(t,e){this.operation=t,this.expression=e,this.$kind=6}}class j{constructor(t){this.value=t,this.$kind=4}}j.$undefined=new j(void 0),j.$null=new j(null),j.$true=new j(!0),j.$false=new j(!1),j.$empty=new j("");class F{constructor(t){this.elements=t,this.$kind=2}}F.$empty=new F(s.ow);class V{constructor(t,e){this.keys=t,this.values=e,this.$kind=3}}V.$empty=new V(s.ow,s.ow);class D{constructor(t,e=s.ow){this.cooked=t,this.expressions=e,this.$kind=5}}D.$empty=new D([""]);class H{constructor(t,e,i,n=s.ow){this.cooked=t,this.func=i,this.expressions=n,this.$kind=12,t.raw=e}}class q{constructor(t){this.elements=t,this.$kind=19}}class W{constructor(t,e){this.keys=t,this.values=e,this.$kind=20}}class _{constructor(t){this.name=t,this.$kind=21}}class z{constructor(t,e,i){this.declaration=t,this.iterable=e,this.semiIdx=i,this.$kind=22}}class K{constructor(t,e=s.ow){this.parts=t,this.expressions=e,this.$kind=23,this.isMulti=e.length>1,this.firstExpression=e[0]}}class G{constructor(t,e,i,s){this.$kind=t,this.list=e,this.source=i,this.initializer=s}}class J{constructor(t,e,i){this.target=t,this.source=e,this.initializer=i,this.$kind=26}}class Q{constructor(t,e,i=!1){this.args=t,this.body=e,this.rest=i,this.$kind=16}}class Z{constructor(t,e){void 0!==t&&(this[t]=e)}}class Y{constructor(t,e,i,s){this.parent=t,this.bindingContext=e,this.overrideContext=i,this.isBoundary=s}static getContext(t,e,i){if(null==t)throw X();let s=t.overrideContext,n=t;if(i>0){for(;i>0;)if(i--,n=n.parent,null==n)return;return s=n.overrideContext,e in s?s:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(s=n.overrideContext,e in s?s:n.bindingContext)}static create(t,e,i){if(null==t)throw tt();return new Y(null,t,null==e?new et:e,i??!1)}static fromParent(t,e){if(null==t)throw X();return new Y(t,e,new et,!1)}}const X=()=>h("AUR0203"),tt=()=>h("AUR0204");class et{}const it=Y.getContext;function st(t,e,i,s){switch(t.$kind){case 0:{let i=e.overrideContext,s=e,n=t.ancestor;for(;n--&&i;)s=s.parent,i=s?.overrideContext??null;return n<1&&s?s.bindingContext:void 0}case 1:{const n=it(e,t.name,t.ancestor);null!==s&&s.observe(n,t.name);const r=n[t.name];if(null==r&&"$host"===t.name)throw h("AUR0105");return i?.strict?i?.boundFn&&c(r)?r.bind(n):r:null==r?"":i?.boundFn&&c(r)?r.bind(n):r}case 2:return t.elements.map((t=>st(t,e,i,s)));case 3:{const n={};for(let r=0;r<t.keys.length;++r)n[t.keys[r]]=st(t.values[r],e,i,s);return n}case 4:return t.value;case 5:{let n=t.cooked[0];for(let r=0;r<t.expressions.length;++r)n+=String(st(t.expressions[r],e,i,s)),n+=t.cooked[r+1];return n}case 6:switch(t.operation){case"void":return void st(t.expression,e,i,s);case"typeof":return typeof st(t.expression,e,i,s);case"!":return!st(t.expression,e,i,s);case"-":return-st(t.expression,e,i,s);case"+":return+st(t.expression,e,i,s);default:throw h(`AUR0109:${t.operation}`)}case 7:{const n=t.args.map((t=>st(t,e,i,s))),r=it(e,t.name,t.ancestor),o=lt(i?.strictFnCall,r,t.name);return o?o.apply(r,n):void 0}case 8:{const n=st(t.object,e,i,s),r=t.args.map((t=>st(t,e,i,s))),o=lt(i?.strictFnCall,n,t.name);let a;return o&&(a=o.apply(n,r),u(n)&&pt.includes(t.name)&&s?.observeCollection(n)),a}case 9:{const n=st(t.func,e,i,s);if(c(n))return n(...t.args.map((t=>st(t,e,i,s))));if(!i?.strictFnCall&&null==n)return;throw h("AUR0107")}case 16:{const n=(...n)=>{const r=t.args,o=t.rest,a=r.length-1,h=r.reduce(((t,e,i)=>(t[e.name]=o&&i===a?n.slice(i):n[i],t)),{}),c=Y.fromParent(e,h);return st(t.body,c,i,s)};return n}case 10:{const n=st(t.object,e,i,s);let r;return i?.strict?null==n?n:(null!==s&&s.observe(n,t.name),r=n[t.name],i?.boundFn&&c(r)?r.bind(n):r):(null!==s&&l(n)&&s.observe(n,t.name),n?(r=n[t.name],i?.boundFn&&c(r)?r.bind(n):r):"")}case 11:{const n=st(t.object,e,i,s);if(l(n)){const r=st(t.key,e,i,s);return null!==s&&s.observe(n,r),n[r]}return}case 12:{const n=t.expressions.map((t=>st(t,e,i,s))),r=st(t.func,e,i,s);if(!c(r))throw h("AUR0110");return r(t.cooked,...n)}case 13:{const n=t.left,r=t.right;switch(t.operation){case"&&":return st(n,e,i,s)&&st(r,e,i,s);case"||":return st(n,e,i,s)||st(r,e,i,s);case"??":return st(n,e,i,s)??st(r,e,i,s);case"==":return st(n,e,i,s)==st(r,e,i,s);case"===":return st(n,e,i,s)===st(r,e,i,s);case"!=":return st(n,e,i,s)!=st(r,e,i,s);case"!==":return st(n,e,i,s)!==st(r,e,i,s);case"instanceof":{const t=st(r,e,i,s);return!!c(t)&&st(n,e,i,s)instanceof t}case"in":{const t=st(r,e,i,s);return!!l(t)&&st(n,e,i,s)in t}case"+":{const t=st(n,e,i,s),o=st(r,e,i,s);if(i?.strict)return t+o;if(!t||!o){if(ut(t)||ut(o))return(t||0)+(o||0);if(dt(t)||dt(o))return(t||"")+(o||"")}return t+o}case"-":return st(n,e,i,s)-st(r,e,i,s);case"*":return st(n,e,i,s)*st(r,e,i,s);case"/":return st(n,e,i,s)/st(r,e,i,s);case"%":return st(n,e,i,s)%st(r,e,i,s);case"<":return st(n,e,i,s)<st(r,e,i,s);case">":return st(n,e,i,s)>st(r,e,i,s);case"<=":return st(n,e,i,s)<=st(r,e,i,s);case">=":return st(n,e,i,s)>=st(r,e,i,s);default:throw h(`AUR0108:${t.operation}`)}}case 14:return st(t.condition,e,i,s)?st(t.yes,e,i,s):st(t.no,e,i,s);case 15:return nt(t.target,e,i,st(t.value,e,i,s));case 17:{const n=i?.getConverter?.(t.name);if(null==n)throw h(`AUR0103:${t.name}`);return"toView"in n?n.toView(st(t.expression,e,i,s),...t.args.map((t=>st(t,e,i,s)))):st(t.expression,e,i,s)}case 18:return st(t.expression,e,i,s);case 21:return t.name;case 22:return st(t.iterable,e,i,s);case 23:if(t.isMulti){let n=t.parts[0],r=0;for(;r<t.expressions.length;++r)n+=v(st(t.expressions[r],e,i,s)),n+=t.parts[r+1];return n}return`${t.parts[0]}${st(t.firstExpression,e,i,s)}${t.parts[1]}`;case 26:return st(t.target,e,i,s);case 24:return t.list.map((t=>st(t,e,i,s)));case 19:case 20:case 25:default:return;case 28:return t.evaluate(e,i,s)}}function nt(t,e,i,n){switch(t.$kind){case 1:if("$host"===t.name)throw h("AUR0106");return it(e,t.name,t.ancestor)[t.name]=n;case 10:{const s=st(t.object,e,i,null);return l(s)?"length"===t.name&&u(s)&&!isNaN(n)?s.splice(n):s[t.name]=n:nt(t.object,e,i,{[t.name]:n}),n}case 11:{const r=st(t.object,e,i,null),o=st(t.key,e,i,null);if(u(r)){if("length"===o&&!isNaN(n))return r.splice(n),n;if((0,s.y5)(o))return r.splice(o,1,n),n}return r[o]=n}case 15:return nt(t.value,e,i,n),nt(t.target,e,i,n);case 17:{const s=i?.getConverter?.(t.name);if(null==s)throw ct(t.name);return"fromView"in s&&(n=s.fromView(n,...t.args.map((t=>st(t,e,i,null))))),nt(t.expression,e,i,n)}case 18:return nt(t.expression,e,i,n);case 24:case 25:{const s=t.list,r=s.length;let o,a;for(o=0;o<r;o++)switch(a=s[o],a.$kind){case 26:nt(a,e,i,n);break;case 24:case 25:{if("object"!=typeof n||null===n)throw h("AUR0112");let t=st(a.source,Y.create(n),i,null);void 0===t&&a.initializer&&(t=st(a.initializer,e,i,null)),nt(a,e,i,t);break}}break}case 26:if(t instanceof J){if(null==n)return;if("object"!=typeof n)throw h("AUR0112");let s=st(t.source,Y.create(n),i,null);void 0===s&&t.initializer&&(s=st(t.initializer,e,i,null)),nt(t.target,e,i,s)}else{if(null==n)return;if("object"!=typeof n)throw h("AUR0112");const r=t.indexOrProperties;let o;if((0,s.y5)(r)){if(!Array.isArray(n))throw h("AUR0112");o=n.slice(r)}else o=Object.entries(n).reduce(((t,[e,i])=>(r.includes(e)||(t[e]=i),t)),{});nt(t.target,e,i,o)}break;case 28:return t.assign(e,i,n);default:return}}function rt(t,e,i){switch(t.$kind){case 18:{const s=t.name,n=t.key,r=i.getBehavior?.(s);if(null==r)throw at(s);if(void 0!==i[n])throw ht(s);return i[n]=r,r.bind?.(e,i,...t.args.map((t=>st(t,e,i,null)))),void rt(t.expression,e,i)}case 17:{const s=t.name,n=i.getConverter?.(s);if(null==n)throw ct(s);const r=n.signals;if(null!=r){const t=i.getSignaler?.(),e=r.length;let s=0;for(;s<e;++s)t?.addSignalListener(r[s],i)}return void rt(t.expression,e,i)}case 22:rt(t.iterable,e,i);break;case 28:t.bind?.(e,i)}}function ot(t,e,i){switch(t.$kind){case 18:{const s=t.key,n=i;void 0!==n[s]&&(n[s].unbind?.(e,i),n[s]=void 0),ot(t.expression,e,i);break}case 17:{const s=i.getConverter?.(t.name);if(void 0===s?.signals)return;const n=i.getSignaler?.();let r=0;for(;r<s.signals.length;++r)n?.removeSignalListener(s.signals[r],i);ot(t.expression,e,i);break}case 22:ot(t.iterable,e,i);break;case 28:t.unbind?.(e,i)}}const at=t=>h(`AUR0101:${t}`),ht=t=>h(`AUR0102:${t}`),ct=t=>h(`AUR0103:${t}`),lt=(t,e,i)=>{const s=null==e?null:e[i];if(c(s))return s;if(!t&&null==s)return null;throw h(`AUR0111:${i}`)},ut=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},dt=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},pt="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" "),ft=s.DI.createInterface("ICoercionConfiguration");var gt,mt;function vt(t=0){const e=Array(t);let i=0;for(;i<t;)e[i]=i++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(gt||(gt={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(mt||(mt={}));new Map;function wt(t){return null==t?yt:yt(t)}function yt(t){const e=t.prototype;a(e,"subs",{get:St}),m(e,"subscribe",Ct),m(e,"unsubscribe",kt)}class bt{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const i=this.t.slice(0),s=i.length;let n=0;for(;n<s;++n)i[n].handleChange(t,e)}notifyCollection(t,e){const i=this.t.slice(0),s=i.length;let n=0;for(;n<s;++n)i[n].handleCollectionChange(t,e)}}function St(){return g(this,"subs",new bt)}function Ct(t){return this.subs.add(t)}function kt(t){return this.subs.remove(t)}class At{constructor(t){this.owner=t,this.type=18,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const i=this.v,s=this.o.length;(this.v=s)!==i&&this.subs.notify(this.v,i)}}class Tt{constructor(t){this.owner=t,this.v=(this.o=t.collection).size,this.type=p(this.o)?66:34}getValue(){return this.o.size}setValue(){throw h("AUR02")}handleCollectionChange(t,e){const i=this.v,s=this.o.size;(this.v=s)!==i&&this.subs.notify(this.v,i)}}function $t(t){const e=t.prototype;m(e,"subscribe",xt),m(e,"unsubscribe",It),wt(t)}function xt(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function It(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}$t(At),$t(Tt);const Rt="__au_array_obs__",Et=(()=>{let t=b(Rt,Array);return null==t&&S(Rt,t=new WeakMap,Array),t})();function Nt(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Ot(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Pt(t,e,i,s,n){let r,o,a,h,c,l,u;for(l=i+1;l<s;l++){for(r=t[l],o=e[l],u=l-1;u>=i&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function Mt(t,e,i,s,n){let r,o,a,h,c,l,u,d,p,f,g,m,v,w,y,b,S,C,k,A=0,T=0;for(;;){if(s-i<=10)return void Pt(t,e,i,s,n);A=i+(s-i>>1),r=t[i],h=e[i],o=t[s-1],c=e[s-1],a=t[A],l=e[A],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[i]=r,e[i]=h,t[s-1]=a,e[s-1]=l,m=o,v=c,w=i+1,y=s-1,t[A]=t[w],e[A]=e[w],t[w]=m,e[w]=v;t:for(T=w+1;T<y;T++)if(b=t[T],S=e[T],C=n(b,m),C<0)t[T]=t[w],e[T]=e[w],t[w]=b,e[w]=S,w++;else if(C>0){do{if(y--,y==T)break t;k=t[y],C=n(k,m)}while(C>0);t[T]=t[y],e[T]=e[y],t[y]=b,e[y]=S,C<0&&(b=t[T],S=e[T],t[T]=t[w],e[T]=e[w],t[w]=b,e[w]=S,w++)}s-y<w-i?(Mt(t,e,y,s,n),s=w):(Mt(t,e,i,w,n),i=y)}}const Ut=Array.prototype,Bt=Ut.push,Lt=Ut.unshift,jt=Ut.pop,Ft=Ut.shift,Vt=Ut.splice,Dt=Ut.reverse,Ht=Ut.sort,qt=["push","unshift","pop","shift","splice","reverse","sort"],Wt={push:function(...t){const e=Et.get(this);if(void 0===e)return Bt.apply(this,t);const i=this.length,s=t.length;if(0===s)return i;this.length=e.indexMap.length=i+s;let n=i;for(;n<this.length;)this[n]=t[n-i],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=Et.get(this);if(void 0===e)return Lt.apply(this,t);const i=t.length,s=new Array(i);let n=0;for(;n<i;)s[n++]=-2;Lt.apply(e.indexMap,s);const r=Lt.apply(this,t);return e.notify(),r},pop:function(){const t=Et.get(this);if(void 0===t)return jt.call(this);const e=t.indexMap,i=jt.call(this),s=e.length-1;return e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(i)),jt.call(e),t.notify(),i},shift:function(){const t=Et.get(this);if(void 0===t)return Ft.call(this);const e=t.indexMap,i=Ft.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(i)),Ft.call(e),t.notify(),i},splice:function(...t){const e=t[0],i=t[1],s=Et.get(this);if(void 0===s)return Vt.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=s.indexMap,h=t.length,c=0===h?0:1===h?n-o:i;let l=o;if(c>0){const t=l+c;for(;l<t;)a[l]>-1&&(a.deletedIndices.push(a[l]),a.deletedItems.push(this[l])),l++}if(l=0,h>2){const t=h-2,s=new Array(t);for(;l<t;)s[l++]=-2;Vt.call(a,e,i,...s)}else Vt.apply(a,t);const u=Vt.apply(this,t);return(c>0||l>0)&&s.notify(),u},reverse:function(){const t=Et.get(this);if(void 0===t)return Dt.call(this),this;const e=this.length,i=e/2|0;let s=0;for(;s!==i;){const i=e-s-1,n=this[s],r=t.indexMap[s],o=this[i],a=t.indexMap[i];this[s]=o,t.indexMap[s]=a,this[i]=n,t.indexMap[i]=r,s++}return t.notify(),this},sort:function(t){const e=Et.get(this);if(void 0===e)return Ht.call(this,t),this;let i=this.length;if(i<2)return this;Mt(this,e.indexMap,0,i,Ot);let s=0;for(;s<i&&void 0!==this[s];)s++;void 0!==t&&c(t)||(t=Nt),Mt(this,e.indexMap,0,s,t);let n=!1;for(s=0,i=e.indexMap.length;i>s;++s)if(e.indexMap[s]!==s){n=!0;break}return n&&e.notify(),this}};for(const t of qt)a(Wt[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let _t=!1;const zt="__au_arr_on__";class Kt{constructor(t){this.type=18,_t||(_t=!0,function(){if(!b(zt,Array)){S(zt,!0,Array);for(const t of qt)!0!==Ut[t].observing&&g(Ut,t,Wt[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=vt(t.length),this.lenObs=void 0,Et.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,i=e.length;this.indexMap=vt(i),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new At(this))}getIndexObserver(t){var e;return(e=this.indexObservers)[t]??(e[t]=new Gt(this,t))}}class Gt{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,i=this.index,s=e.indexMap;s[i]>-1&&s.deletedIndices.push(s[i]),s[i]=-2,e.collection[i]=t,e.notify()}handleCollectionChange(t,e){const i=this.index;if(e[i]===i)return;const s=this.value,n=this.value=this.getValue();s!==n&&this.subs.notify(n,s)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Jt(t){let e=Et.get(t);return void 0===e&&(e=new Kt(t)),e}wt(Kt),wt(Gt);const Qt=(t,e)=>t-e,Zt="__au_set_obs__",Yt=(()=>{let t=b(Zt,Set);return null==t&&S(Zt,t=new WeakMap,Set),t})(),Xt=Set.prototype,te=Xt.add,ee=Xt.clear,ie=Xt.delete,se=["add","clear","delete"],ne={add:function(t){const e=Yt.get(this);if(void 0===e)return te.call(this,t),this;const i=this.size;return te.call(this,t),this.size===i||(e.indexMap[i]=-2,e.notify()),this},clear:function(){const t=Yt.get(this);if(void 0===t)return ee.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(t)),i++;ee.call(this),e.length=0,t.notify()}},delete:function(t){const e=Yt.get(this);if(void 0===e)return ie.call(this,t);if(0===this.size)return!1;let i=0;const s=e.indexMap;for(const n of this.keys()){if(n===t){s[i]>-1&&(s.deletedIndices.push(s[i]),s.deletedItems.push(n)),s.splice(i,1);const r=ie.call(this,t);return!0===r&&e.notify(),r}i++}return!1}},re={writable:!0,enumerable:!1,configurable:!0};for(const t of se)a(ne[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let oe=!1;const ae="__au_set_on__";class he{constructor(t){this.type=34,oe||(oe=!0,function(){if(!b(ae,Set)){S(ae,!0,Set);for(const t of se)!0!==Xt[t].observing&&a(Xt,t,{...re,value:ne[t]})}}()),this.collection=t,this.indexMap=vt(t.size),this.lenObs=void 0,Yt.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,i=e.size;this.indexMap=vt(i),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new Tt(this))}}function ce(t){let e=Yt.get(t);return void 0===e&&(e=new he(t)),e}wt(he);const le="__au_map_obs__",ue=(()=>{let t=b(le,Map);return null==t&&S(le,t=new WeakMap,Map),t})(),de=Map.prototype,pe=de.set,fe=de.clear,ge=de.delete,me=["set","clear","delete"],ve={set:function(t,e){const i=ue.get(this);if(void 0===i)return pe.call(this,t,e),this;const s=this.get(t),n=this.size;if(pe.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==s&&(i.indexMap.deletedIndices.push(i.indexMap[e]),i.indexMap.deletedItems.push(n),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[n]=-2,i.notify(),this},clear:function(){const t=ue.get(this);if(void 0===t)return fe.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(t)),i++;fe.call(this),e.length=0,t.notify()}},delete:function(t){const e=ue.get(this);if(void 0===e)return ge.call(this,t);if(0===this.size)return!1;let i=0;const s=e.indexMap;for(const n of this.keys()){if(n===t){s[i]>-1&&(s.deletedIndices.push(s[i]),s.deletedItems.push(n)),s.splice(i,1);const r=ge.call(this,t);return!0===r&&e.notify(),r}++i}return!1}},we={writable:!0,enumerable:!1,configurable:!0};for(const t of me)a(ve[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ye=!1;const be="__au_map_on__";class Se{constructor(t){this.type=66,ye||(ye=!0,function(){if(!b(be,Map)){S(be,!0,Map);for(const t of me)!0!==de[t].observing&&a(de,t,{...we,value:ve[t]})}}()),this.collection=t,this.indexMap=vt(t.size),this.lenObs=void 0,ue.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const i=this.collection,s=i.size;this.indexMap=vt(s),t.notifyCollection(i,e)}getLengthObserver(){return this.lenObs??(this.lenObs=new Tt(this))}}function Ce(t){let e=ue.get(t);return void 0===e&&(e=new Se(t)),e}function ke(){return g(this,"obs",new Re(this))}function Ae(t,e){this.obs.add(this.oL.getObserver(t,e))}function Te(t){let e;if(u(t))e=Jt(t);else if(d(t))e=ce(t);else{if(!p(t))throw h("AUR0210");e=Ce(t)}this.obs.add(e)}function $e(t){this.obs.add(t)}function xe(){throw h("AUR2011:handleChange")}function Ie(){throw h("AUR2011:handleCollectionChange")}wt(Se);class Re{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Ne,this),this.count=this.o.size}clearAll(){this.o.forEach(Ee,this),this.o.clear(),this.count=0}}function Ee(t,e){e.unsubscribe(this.b)}function Ne(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function Oe(t){const e=t.prototype;return m(e,"observe",Ae),m(e,"observeCollection",Te),m(e,"subscribeTo",$e),a(e,"obs",{get:ke}),m(e,"handleChange",xe),m(e,"handleCollectionChange",Ie),t}function Pe(t){return null==t?Oe:Oe(t)}const Me=w("IExpressionParser",(t=>t.singleton(Ue)));class Ue{constructor(){this.i=y(),this.u=y(),this.h=y()}parse(t,e){let i;switch(e){case 32:return new A(t);case 1:return i=this.h[t],void 0===i&&(i=this.h[t]=this.$parse(t,e)),i;case 2:return i=this.u[t],void 0===i&&(i=this.u[t]=this.$parse(t,e)),i;default:if(0===t.length){if((24&e)>0)return j.$empty;throw Ai()}return i=this.i[t],void 0===i&&(i=this.i[t]=this.$parse(t,e)),i}}$parse(t,e){return _e=t,ze=0,Ke=t.length,Ge=0,Je=0,Qe=6291456,Ze="",We=ii(0),Ye=!0,Xe=!1,ti=-1,ni(61,void 0===e?16:e)}}function Be(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const Le=j.$false,je=j.$true,Fe=j.$null,Ve=j.$undefined,De=R.$this,He=R.$parent;var qe;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsChainable=4]="IsChainable",t[t.IsFunction=8]="IsFunction",t[t.IsProperty=16]="IsProperty",t[t.IsCustom=32]="IsCustom"}(qe||(qe={}));let We,_e="",ze=0,Ke=0,Ge=0,Je=0,Qe=6291456,Ze="",Ye=!0,Xe=!1,ti=-1;const ei=String.fromCharCode,ii=t=>_e.charCodeAt(t),si=()=>_e.slice(Je,ze);function ni(t,e){if(32===e)return new A(_e);if(0===ze){if(1&e)return function(){const t=[],e=[],i=Ke;let s="";for(;ze<i;){switch(We){case 36:if(123===ii(ze+1)){t.push(s),s="",ze+=2,We=ii(ze),ui();const i=ni(61,1);e.push(i);continue}s+="$";break;case 92:s+=ei(Be(di()));break;default:s+=ei(We)}di()}return e.length?(t.push(s),new K(t,e)):null}();if(ui(),4194304&Qe)throw wi()}Ye=513>t,Xe=!1;let i,s=!1,n=0;if(131072&Qe){const t=qi[63&Qe];ui(),i=new L(t,ni(514,e)),Ye=!1}else{t:switch(Qe){case 12294:n=Ge,Ye=!1;do{switch(ui(),++n,Qe){case 65545:if(ui(),0==(12288&Qe))throw bi();break;case 10:case 11:throw bi();case 2162700:if(Xe=!0,ui(),0==(12288&Qe)){i=0===n?De:1===n?He:new R(n),s=!0;break t}break;default:if(2097152&Qe){i=0===n?De:1===n?He:new R(n);break t}throw Si()}}while(12294===Qe);case 4096:{const t=Ze;if(i=2&e?new _(t):new E(t,n),Ye=!Xe,ui(),mi(50)){if(524296===Qe)throw Di();const e=Xe,s=Ge;++Ge;const n=ni(62,0);Xe=e,Ge=s,Ye=!1,i=new Q([new _(t)],n)}break}case 10:throw Hi();case 11:throw yi();case 12292:switch(Ye=!1,ui(),Ge){case 0:i=De;break;case 1:i=He;break;default:i=new R(Ge)}break;case 2688007:i=function(t){ui();const e=ze,i=Je,s=Qe,n=We,r=Ze,o=Ye,a=Xe,h=[];let c=1,l=!1;e:for(;;){if(11===Qe){if(ui(),4096!==Qe)throw bi();if(h.push(new _(Ze)),ui(),6291471===Qe)throw Vi();if(7340046!==Qe)throw yi();if(ui(),50!==Qe)throw yi();ui();const t=Xe,e=Ge;++Ge;const i=ni(62,0);return Xe=t,Ge=e,Ye=!1,new Q(h,i,!0)}switch(Qe){case 4096:h.push(new _(Ze)),ui();break;case 7340046:ui();break e;case 524296:case 2688016:ui(),c=4;break;case 6291471:c=2,l=!0;break e;case 2688007:c=2;break e;default:ui(),c=2}switch(Qe){case 6291471:if(ui(),l=!0,1===c)break;break e;case 7340046:ui();break e;case 4194349:1===c&&(c=3);break e;case 50:if(l)throw Li();ui(),c=2;break e;default:1===c&&(c=2);break e}}if(50===Qe){if(1===c){if(ui(),524296===Qe)throw Di();const t=Xe,e=Ge;++Ge;const i=ni(62,0);return Xe=t,Ge=e,Ye=!1,new Q(h,i)}throw Li()}if(1===c&&0===h.length)throw Oi(50);if(l)switch(c){case 2:throw Li();case 3:throw ji();case 4:throw Fi()}ze=e,Je=i,Qe=s,We=n,Ze=r,Ye=o,Xe=a;const u=Xe,d=ni(62,t);if(Xe=u,vi(7340046),50===Qe)switch(c){case 2:throw Li();case 3:throw ji();case 4:throw Fi()}return d}(e);break;case 2688016:i=_e.search(/\s+of\s+/)>ze?function(){const t=[],e=new G(24,t,void 0,void 0);let i="",s=!0,n=0;for(;s;)switch(ui(),Qe){case 7340051:s=!1,r();break;case 6291471:r();break;case 4096:i=si();break;default:throw Mi()}return vi(7340051),e;function r(){""!==i?(t.push(new J(new N(De,i),new O(De,new j(n++)),void 0)),i=""):n++}}():function(t){const e=Xe;ui();const i=new Array;for(;7340051!==Qe;)if(mi(6291471)){if(i.push(Ve),7340051===Qe)break}else{if(i.push(ni(62,-3&t)),!mi(6291471))break;if(7340051===Qe)break}return Xe=e,vi(7340051),2&t?new q(i):(Ye=!1,new F(i))}(e);break;case 524296:i=function(t){const e=Xe,i=new Array,s=new Array;for(ui();7340045!==Qe;){if(i.push(Ze),49152&Qe)ui(),vi(6291476),s.push(ni(62,-3&t));else{if(!(12288&Qe))throw Ei();{const e=We,i=Qe,n=ze;ui(),mi(6291476)?s.push(ni(62,-3&t)):(We=e,Qe=i,ze=n,s.push(ni(515,-3&t)))}}7340045!==Qe&&vi(6291471)}return Xe=e,vi(7340045),2&t?new W(i,s):(Ye=!1,new V(i,s))}(e);break;case 2163759:i=new D([Ze]),Ye=!1,ui();break;case 2163760:i=ci(e,i,!1);break;case 16384:case 32768:i=new j(Ze),Ye=!1,ui();break;case 8194:case 8195:case 8193:case 8192:i=qi[63&Qe],Ye=!1,ui();break;default:throw ze>=Ke?Ci():ki()}if(2&e)return function(t){if(0==(23&t.$kind))throw Ri();if(4204593!==Qe)throw Ri();ui();const e=t,i=ni(61,4);return new z(e,i,ti)}(i);if(514<t)return i;if(10===Qe||11===Qe)throw bi();if(0===i.$kind)switch(Qe){case 2162700:if(Xe=!0,Ye=!1,ui(),0==(13312&Qe))throw Ui();if(12288&Qe)i=new E(Ze,i.ancestor),ui();else if(2688007===Qe)i=new U(i,ri(),!0);else{if(2688016!==Qe)throw Bi();i=oi(i,!0)}break;case 65545:if(Ye=!Xe,ui(),0==(12288&Qe))throw bi();i=new E(Ze,i.ancestor),ui();break;case 10:case 11:throw bi();case 2688007:i=new U(i,ri(),s);break;case 2688016:i=oi(i,s);break;case 2163759:i=li(i);break;case 2163760:i=ci(e,i,!0)}for(;(65536&Qe)>0;)switch(Qe){case 2162700:i=ai(i);break;case 65545:if(ui(),0==(12288&Qe))throw bi();i=hi(i,!1);break;case 10:case 11:throw bi();case 2688007:i=1===i.$kind?new P(i.name,ri(),i.ancestor,!1):10===i.$kind?new M(i.object,i.name,ri(),i.optional,!1):new U(i,ri(),!1);break;case 2688016:i=oi(i,!1);break;case 2163759:if(Xe)throw Bi();i=li(i);break;case 2163760:if(Xe)throw Bi();i=ci(e,i,!0)}}if(10===Qe||11===Qe)throw bi();if(513<t)return i;for(;(262144&Qe)>0;){const s=Qe;if((960&s)<=t)break;ui(),i=new B(qi[63&s],i,ni(960&s,e)),Ye=!1}if(63<t)return i;if(mi(6291478)){const t=ni(62,e);vi(6291476),i=new I(i,t,ni(62,e)),Ye=!1}if(62<t)return i;if(mi(4194349)){if(!Ye)throw Ti();i=new x(i,ni(62,e))}if(61<t)return i;for(;mi(6291480);){if(6291456===Qe)throw $i();const t=Ze;ui();const s=new Array;for(;mi(6291476);)s.push(ni(62,e));i=new $(i,t,s)}for(;mi(6291479);){if(6291456===Qe)throw xi();const t=Ze;ui();const s=new Array;for(;mi(6291476);)s.push(ni(62,e));i=new T(i,t,s)}if(6291456!==Qe){if((1&e)>0&&7340045===Qe)return i;if((4&e)>0&&6291477===Qe){if(ze===Ke)throw ki();return ti=ze-1,i}if("of"===si())throw Ii();throw ki()}return i}function ri(){const t=Xe;ui();const e=[];for(;7340046!==Qe&&(e.push(ni(62,0)),mi(6291471)););return vi(7340046),Ye=!1,Xe=t,e}function oi(t,e){const i=Xe;return ui(),t=new O(t,ni(62,0),e),vi(7340051),Ye=!i,Xe=i,t}function ai(t){if(Xe=!0,Ye=!1,ui(),0==(13312&Qe))throw Ui();if(12288&Qe)return hi(t,!0);if(2688007===Qe)return 1===t.$kind?new P(t.name,ri(),t.ancestor,!0):10===t.$kind?new M(t.object,t.name,ri(),t.optional,!0):new U(t,ri(),!0);if(2688016===Qe)return oi(t,!0);throw Bi()}function hi(t,e){const i=Ze;switch(Qe){case 2162700:{Xe=!0,Ye=!1;const s=ze,n=Je,r=Qe,o=We,a=Ze,h=Ye,c=Xe;if(ui(),0==(13312&Qe))throw Ui();return 2688007===Qe?new M(t,i,ri(),e,!0):(ze=s,Je=n,Qe=r,We=o,Ze=a,Ye=h,Xe=c,new N(t,i,e))}case 2688007:return Ye=!1,new M(t,i,ri(),e,!1);default:return Ye=!Xe,ui(),new N(t,i,e)}}function ci(t,e,i){const s=Xe,n=[Ze];vi(2163760);const r=[ni(62,t)];for(;2163759!==(Qe=gi());)n.push(Ze),vi(2163760),r.push(ni(62,t));return n.push(Ze),Ye=!1,Xe=s,i?(ui(),new H(n,n,e,r)):(ui(),new D(n,r))}function li(t){Ye=!1;const e=[Ze];return ui(),new H(e,e,t)}function ui(){for(;ze<Ke;)if(Je=ze,null!=(Qe=Qi[We]()))return;Qe=6291456}function di(){return We=ii(++ze)}function pi(t){let e=We;if(!1===t){do{e=di()}while(e<=57&&e>=48);if(46!==e)return Ze=parseInt(si(),10),32768;if(e=di(),ze>=Ke)return Ze=parseInt(si().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=di()}while(e<=57&&e>=48);else We=ii(--ze);return Ze=parseFloat(si()),32768}function fi(){let t=!0,e="";for(;96!==di();)if(36===We){if(ze+1<Ke&&123===ii(ze+1)){ze++,t=!1;break}e+="$"}else if(92===We)e+=ei(Be(di()));else{if(ze>=Ke)throw Ni();e+=ei(We)}return di(),Ze=e,t?2163759:2163760}const gi=()=>{if(ze>=Ke)throw Ni();return ze--,fi()},mi=t=>Qe===t&&(ui(),!0),vi=t=>{if(Qe!==t)throw Oi(t);ui()},wi=()=>h(`AUR0151:${_e}`),yi=()=>h(`AUR0152:${_e}`),bi=()=>h(`AUR0153:${_e}`),Si=()=>h(`AUR0154:${_e}`),Ci=()=>h(`AUR0155:${_e}`),ki=()=>h(`AUR0156:${_e}`),Ai=()=>h("AUR0157"),Ti=()=>h(`AUR0158:${_e}`),$i=()=>h(`AUR0159:${_e}`),xi=()=>h(`AUR0160:${_e}`),Ii=()=>h(`AUR0161:${_e}`),Ri=()=>h(`AUR0163:${_e}`),Ei=()=>h(`AUR0164:${_e}`),Ni=()=>h(`AUR0166:${_e}`),Oi=t=>h(`AUR0167:${_e}<${qi[63&t]}`),Pi=()=>{throw h(`AUR0168:${_e}`)};Pi.notMapped=!0;const Mi=()=>h(`AUR0170:${_e}`),Ui=()=>h(`AUR0171:${_e}`),Bi=()=>h(`AUR0172:${_e}`),Li=()=>h(`AUR0173:${_e}`),ji=()=>h(`AUR0174:${_e}`),Fi=()=>h(`AUR0175:${_e}`),Vi=()=>h(`AUR0176:${_e}`),Di=()=>h(`AUR0178:${_e}`),Hi=()=>h(`AUR0179:${_e}`),qi=[Le,je,Fe,Ve,"$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163759,2163760,"of","=>"],Wi=Object.assign(Object.create(null),{true:8193,null:8194,false:8192,undefined:8195,$this:12292,$parent:12294,in:6562212,instanceof:6562213,typeof:139304,void:139305,of:4204593}),_i=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],zi=[48,58],Ki=(t,e,i,s)=>{const n=i.length;for(let r=0;r<n;r+=2){const n=i[r];let o=i[r+1];if(o=o>0?o:n+1,t&&t.fill(s,n,o),e)for(let t=n;t<o;t++)e.add(t)}},Gi=t=>()=>(di(),t);Ki(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Ji=new Uint8Array(65535);Ki(Ji,null,_i,1),Ki(Ji,null,zi,1);const Qi=new Array(65535);Qi.fill(Pi,0,65535),Ki(Qi,null,[0,33,127,161],(()=>(di(),null))),Ki(Qi,null,_i,(function(){for(;Ji[di()];);const t=Wi[Ze=si()];return void 0===t?4096:t})),Ki(Qi,null,zi,(()=>pi(!1))),Qi[34]=Qi[39]=()=>function(){const t=We;di();let e=0;const i=new Array;let s=ze;for(;We!==t;)if(92===We)i.push(_e.slice(s,ze)),di(),e=Be(We),di(),i.push(ei(e)),s=ze;else{if(ze>=Ke)throw h(`AUR0165:${_e}`);di()}const n=_e.slice(s,ze);di(),i.push(n);const r=i.join("");return Ze=r,16384}(),Qi[96]=()=>fi(),Qi[33]=()=>61!==di()?131118:61!==di()?6553949:(di(),6553951),Qi[61]=()=>62===di()?(di(),50):61!==We?4194349:61!==di()?6553948:(di(),6553950),Qi[38]=()=>38!==di()?6291479:(di(),6553883),Qi[124]=()=>124!==di()?6291480:(di(),6553818),Qi[63]=()=>{if(46===di()){const t=ii(ze+1);return t<=48||t>=57?(di(),2162700):6291478}return 63!==We?6291478:(di(),6553753)},Qi[46]=()=>di()<=57&&We>=48?pi(!0):46===We?46!==di()?10:(di(),11):65545,Qi[60]=()=>61!==di()?6554016:(di(),6554018),Qi[62]=()=>61!==di()?6554017:(di(),6554019),Qi[37]=Gi(6554155),Qi[40]=Gi(2688007),Qi[41]=Gi(7340046),Qi[42]=Gi(6554154),Qi[43]=Gi(2490854),Qi[44]=Gi(6291471),Qi[45]=Gi(2490855),Qi[47]=Gi(6554156),Qi[58]=Gi(6291476),Qi[59]=Gi(6291477),Qi[91]=Gi(2688016),Qi[93]=Gi(7340051),Qi[123]=Gi(524296),Qi[125]=Gi(7340045);let Zi=null;const Yi=[];let Xi=!1;function ts(){return Zi}function es(t){if(null==t)throw h("AUR0206");if(null==Zi)return Zi=t,Yi[0]=Zi,void(Xi=!0);if(Zi===t)throw h("AUR0207");Yi.push(t),Zi=t,Xi=!0}function is(t){if(null==t)throw h("AUR0208");if(Zi!==t)throw h("AUR0209");Yi.pop(),Zi=Yi.length>0?Yi[Yi.length-1]:null,Xi=null!=Zi}const ss=Object.freeze({get current(){return Zi},get connecting(){return Xi},enter:es,exit:is,pause:function(){Xi=!1},resume:function(){Xi=!0}}),ns=Reflect.get,rs=Object.prototype.toString,os=new WeakMap;function as(t){switch(rs.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const hs="__raw__";function cs(t){return as(t)?ls(t):t}function ls(t){return os.get(t)??function(t){const e=u(t)?gs:p(t)||d(t)?js:fs,i=new Proxy(t,e);return os.set(t,i),i}(t)}function us(t){return t[hs]??t}function ds(t){return as(t)&&t[hs]||t}function ps(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const fs={get(t,e,i){if(e===hs)return t;const s=ts();return!Xi||ps(e)||null==s?ns(t,e,i):(s.observe(t,e),cs(ns(t,e,i)))}},gs={get(t,e,i){if(e===hs)return t;if(!Xi||ps(e)||null==Zi)return ns(t,e,i);switch(e){case"length":return Zi.observe(t,"length"),t.length;case"map":return ms;case"includes":return ys;case"indexOf":return bs;case"lastIndexOf":return Ss;case"every":return vs;case"filter":return ws;case"find":return ks;case"findIndex":return Cs;case"flat":return As;case"flatMap":return Ts;case"join":return $s;case"push":return Is;case"pop":return xs;case"reduce":return Bs;case"reduceRight":return Ls;case"reverse":return Os;case"shift":return Rs;case"unshift":return Es;case"slice":return Us;case"splice":return Ns;case"some":return Ps;case"sort":return Ms;case"keys":return zs;case"values":case Symbol.iterator:return Ks;case"entries":return Gs}return Zi.observe(t,e),cs(ns(t,e,i))},ownKeys:t=>(ts()?.observe(t,"length"),Reflect.ownKeys(t))};function ms(t,e){const i=us(this),s=i.map(((i,s)=>ds(t.call(e,cs(i),s,this))));return Js(Zi,i),cs(s)}function vs(t,e){const i=us(this),s=i.every(((i,s)=>t.call(e,cs(i),s,this)));return Js(Zi,i),s}function ws(t,e){const i=us(this),s=i.filter(((i,s)=>ds(t.call(e,cs(i),s,this))));return Js(Zi,i),cs(s)}function ys(t){const e=us(this),i=e.includes(ds(t));return Js(Zi,e),i}function bs(t){const e=us(this),i=e.indexOf(ds(t));return Js(Zi,e),i}function Ss(t){const e=us(this),i=e.lastIndexOf(ds(t));return Js(Zi,e),i}function Cs(t,e){const i=us(this),s=i.findIndex(((i,s)=>ds(t.call(e,cs(i),s,this))));return Js(Zi,i),s}function ks(t,e){const i=us(this),s=i.find(((e,i)=>t(cs(e),i,this)),e);return Js(Zi,i),cs(s)}function As(){const t=us(this);return Js(Zi,t),cs(t.flat())}function Ts(t,e){const i=us(this);return Js(Zi,i),ls(i.flatMap(((i,s)=>cs(t.call(e,cs(i),s,this)))))}function $s(t){const e=us(this);return Js(Zi,e),e.join(t)}function xs(){return cs(us(this).pop())}function Is(...t){return us(this).push(...t)}function Rs(){return cs(us(this).shift())}function Es(...t){return us(this).unshift(...t)}function Ns(...t){return cs(us(this).splice(...t))}function Os(...t){const e=us(this),i=e.reverse();return Js(Zi,e),cs(i)}function Ps(t,e){const i=us(this),s=i.some(((i,s)=>ds(t.call(e,cs(i),s,this))));return Js(Zi,i),s}function Ms(t){const e=us(this),i=e.sort(t);return Js(Zi,e),cs(i)}function Us(t,e){const i=us(this);return Js(Zi,i),ls(i.slice(t,e))}function Bs(t,e){const i=us(this),s=i.reduce(((e,i,s)=>t(e,cs(i),s,this)),e);return Js(Zi,i),cs(s)}function Ls(t,e){const i=us(this),s=i.reduceRight(((e,i,s)=>t(e,cs(i),s,this)),e);return Js(Zi,i),cs(s)}const js={get(t,e,i){if(e===hs)return t;const s=ts();if(!Xi||ps(e)||null==s)return ns(t,e,i);switch(e){case"size":return s.observe(t,"size"),t.size;case"clear":return Ws;case"delete":return _s;case"forEach":return Fs;case"add":if(d(t))return qs;break;case"get":if(p(t))return Ds;break;case"set":if(p(t))return Hs;break;case"has":return Vs;case"keys":return zs;case"values":return Ks;case"entries":return Gs;case Symbol.iterator:return p(t)?Gs:Ks}return cs(ns(t,e,i))}};function Fs(t,e){const i=us(this);return Js(Zi,i),i.forEach(((i,s)=>{t.call(e,cs(i),cs(s),this)}))}function Vs(t){const e=us(this);return Js(Zi,e),e.has(ds(t))}function Ds(t){const e=us(this);return Js(Zi,e),cs(e.get(ds(t)))}function Hs(t,e){return cs(us(this).set(ds(t),ds(e)))}function qs(t){return cs(us(this).add(ds(t)))}function Ws(){return cs(us(this).clear())}function _s(t){return cs(us(this).delete(ds(t)))}function zs(){const t=us(this);Js(Zi,t);const e=t.keys();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:cs(i),done:s}},[Symbol.iterator](){return this}}}function Ks(){const t=us(this);Js(Zi,t);const e=t.values();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:cs(i),done:s}},[Symbol.iterator](){return this}}}function Gs(){const t=us(this);Js(Zi,t);const e=t.entries();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[cs(i[0]),cs(i[1])],done:s}},[Symbol.iterator](){return this}}}const Js=(t,e)=>t?.observeCollection(e),Qs=Object.freeze({getProxy:ls,getRaw:us,wrap:cs,unwrap:ds,rawKey:hs});class Zs{constructor(t,e,i,s,n){this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.$get=e,this.$set=i,this.up=s,this.oL=n}static create(t,e,i,s,n){const r=i.get,o=i.set,h=new Zs(t,r,o,n,s),c=()=>h.getValue();return c.getObserver=()=>h,a(t,e,{enumerable:i.enumerable,configurable:!0,get:c,set:t=>{h.setValue(t)}}),h}getValue(){return 0===this.subs.count?this.$get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!c(this.$set))throw h("AUR0221");t!==this.v&&(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,f(e,t)||(this.ov=t,Ys=this.ov,this.ov=this.v,this.subs.notify(this.v,Ys))}compute(){this.ir=!0,this.obs.version++;try{return es(this),this.v=ds(this.$get.call(this.up?cs(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,is(this)}}}let Ys;Pe(Zs),wt(Zs);const Xs=w("IDirtyChecker",(t=>t.singleton(sn))),tn={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},en={persistent:!0};class sn{constructor(t){this.p=t,this.tracked=[],this.A=null,this.O=0,this.check=()=>{if(tn.disabled)return;if(++this.O<tn.timeoutsPerCheck)return;this.O=0;const t=this.tracked,e=t.length;let i,s=0;for(;s<e;++s)i=t[s],i.isDirty()&&i.flush()}}createProperty(t,e){if(tn.throw)throw h(`AUR0222:${v(e)}`);return new nn(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.A=this.p.taskQueue.queueTask(this.check,en))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.A.cancel(),this.A=null)}}sn.inject=[s.TI];class nn{constructor(t,e,i){this.obj=e,this.key=i,this.type=0,this.ov=void 0,this.C=t}getValue(){return this.obj[this.key]}setValue(t){throw h(`Trying to set value for property ${v(this.key)} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.C.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.C.removeProperty(this)}}wt(nn);class rn{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class on{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,i){e[i]=t}}class an{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(this.iO){if(f(t,this.v))return;hn=this.v,this.v=t,this.subs.notify(t,hn)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],a(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(a(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let hn;wt(an),wt(class{constructor(t,e,i,s){this.type=1,this.v=void 0,this.ov=void 0,this.o=t,this.S=i,this.hs=c(i);const n=t[e];this.cb=c(n)?n:void 0,this.v=s}getValue(){return this.v}setValue(t){this.hs&&(t=this.S(t,null)),f(t,this.v)||(this.ov=this.v,this.v=t,this.cb?.call(this.o,this.v,this.ov),hn=this.ov,this.ov=this.v,this.subs.notify(this.v,hn))}});const cn=new on,ln=w("IObserverLocator",(t=>t.singleton(pn))),un=w("INodeObserverLocator",(t=>t.cachedCallback((t=>new dn))));class dn{handles(){return!1}getObserver(){return cn}getAccessor(){return cn}}class pn{constructor(t,e){this.$=[],this.C=t,this.R=e}addAdapter(t){this.$.push(t)}getObserver(t,e){if(null==t)throw vn(e);if(!l(t))return new rn(t,e);const i=mn(t);let s=i[e];return void 0===s&&(s=this.createObserver(t,e),s.doNotCache||(i[e]=s)),s}getAccessor(t,e){const i=t.$observers?.[e];return void 0!==i?i:this.R.handles(t,e,this)?this.R.getAccessor(t,e,this):cn}getArrayObserver(t){return Jt(t)}getMapObserver(t){return Ce(t)}getSetObserver(t){return ce(t)}createObserver(t,e){if(this.R.handles(t,e,this))return this.R.getObserver(t,e,this);switch(e){case"length":if(u(t))return Jt(t).getLengthObserver();break;case"size":if(p(t))return Ce(t).getLengthObserver();if(d(t))return ce(t).getLengthObserver();break;default:if(u(t)&&(0,s.y5)(e))return Jt(t).getIndexObserver(Number(e))}let i=gn(t,e);if(void 0===i){let s=fn(t);for(;null!==s&&(i=gn(s,e),void 0===i);)s=fn(s)}if(void 0!==i&&!o.call(i,"value")){let s=this.U(t,e,i);return null==s&&(s=(i.get?.getObserver??i.set?.getObserver)?.(t,this)),null==s?i.configurable?Zs.create(t,e,i,this,!0):this.C.createProperty(t,e):s}return new an(t,e)}U(t,e,i){if(this.$.length>0)for(const s of this.$){const n=s.getObserver(t,e,i,this);if(null!=n)return n}return null}}pn.inject=[Xs,un];const fn=Object.getPrototypeOf,gn=Object.getOwnPropertyDescriptor,mn=t=>{let e=t.$observers;return void 0===e&&a(t,"$observers",{enumerable:!1,value:e=y()}),e},vn=t=>h(`AUR0199:${v(t)}`);w("IObservation",(t=>t.singleton(wn)));class wn{constructor(t){this.oL=t}static get inject(){return[ln]}run(t){const e=new yn(this.oL,t);return e.run(),e}}class yn{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw h("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{es(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,is(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,h("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Pe(yn);const bn=w("ISignaler",(t=>t.singleton(Sn)));class Sn{constructor(){this.signals=y()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let i;for(i of e.keys())i.handleChange(void 0,void 0)}addSignalListener(t,e){const i=this.signals,s=i[t];void 0===s?i[t]=new Set([e]):s.add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}var Cn=i(968),kn=i(58);function An(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Tn(t,e){return function(i,s){e(i,s,t)}}const $n=n.SF.getOwn,xn=n.SF.hasOwn,In=n.SF.define,{annotation:Rn,resource:En}=s.b$,Nn=Rn.keyFor,On=En.keyFor,Pn=En.appendTo,Mn=Rn.appendTo,Un=Rn.getKeys,Bn=Object,Ln=Bn.prototype,jn=()=>Bn.create(null),Fn=t=>new Error(t),Vn=Ln.hasOwnProperty,Dn=Bn.freeze,Hn=Bn.assign,qn=Bn.getOwnPropertyNames,Wn=Bn.keys,_n=jn(),zn=(t,e,i)=>{if(!0===_n[e])return!0;if(!Qn(e))return!1;const s=e.slice(0,5);return _n[e]="aria-"===s||"data-"===s||i.isStandardSvgAttribute(t,e)},Kn=t=>t instanceof Promise,Gn=t=>t instanceof Array,Jn=t=>"function"==typeof t,Qn=t=>"string"==typeof t,Zn=Bn.defineProperty,Yn=t=>{throw t},Xn=Bn.is,tr=Reflect.defineProperty,er=(t,e,i)=>(tr(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i}),i);function ir(t,e){let i;function s(t,e){arguments.length>1&&(i.property=e),In(nr,or.create(e,t,i),t.constructor,e),Mn(t.constructor,rr.keyFrom(e))}return arguments.length>1?(i={},void s(t,e)):Qn(t)?(i={},s):(i=void 0===t?{}:t,s)}function sr(t){return t.startsWith(nr)}const nr=Nn("bindable"),rr=Dn({name:nr,keyFrom:t=>`${nr}:${t}`,from(t,...e){const i={},s=Array.isArray;function n(e){i[e]=or.create(e,t)}function r(e,s){i[e]=s instanceof or?s:or.create(e,t,s)}return e.forEach((function(t){s(t)?t.forEach(n):t instanceof or?i[t.property]=t:void 0!==t&&Wn(t).forEach((e=>r(e,t[e])))})),i},for(t){let e;const i={add(s){let n,r;return Qn(s)?(n=s,r={property:n}):(n=s.property,r=s),e=or.create(n,t,r),xn(nr,t,n)||Mn(t,rr.keyFrom(n)),In(nr,e,t,n),i},mode:t=>(e.mode=t,i),callback:t=>(e.callback=t,i),attribute:t=>(e.attribute=t,i),primary:()=>(e.primary=!0,i),set:t=>(e.set=t,i)};return i},getAll(t){const e=nr.length+1,i=[],n=(0,s.Qy)(t);let r,o,a,h,c=n.length,l=0;for(;--c>=0;)for(a=n[c],r=Un(a).filter(sr),o=r.length,h=0;h<o;++h)i[l++]=$n(nr,a,r[h].slice(e));return i}});class or{constructor(t,e,i,s,n,r){this.attribute=t,this.callback=e,this.mode=i,this.primary=s,this.property=n,this.set=r}static create(t,e,i={}){return new or((0,s.BR)(i.attribute,(0,s.GL)(t)),(0,s.BR)(i.callback,`${t}Changed`),(0,s.BR)(i.mode,2),(0,s.BR)(i.primary,!1),(0,s.BR)(i.property,t),(0,s.BR)(i.set,function(t,e,i={}){const r=i.type??n.SF.get("design:type",e,t)??null;if(null==r)return s.ZT;let o;switch(r){case Number:case Boolean:case String:case BigInt:o=r;break;default:{const t=r.coerce;o="function"==typeof t?t.bind(r):ar.for(r)??s.ZT;break}}return o===s.ZT?o:function(t,e){return function(i,s){return s?.enableCoercion?(e??!s?.coerceNullish)&&null==i?i:t(i,s):i}}(o,i.nullable)}(t,e,i)))}}const ar={key:Nn("coercer"),define(t,e){In(ar.key,t[e].bind(t),t)},for:t=>$n(ar.key,t)};class hr{constructor(t,e,i,n,r,o){this.set=n,this.$controller=r,this.i=o,this.v=void 0,this.ov=void 0;const a=t[i],h=t.propertyChanged,c=this.u=Jn(a),l=this.A=Jn(h),u=this.hs=n!==s.ZT;let d;this.o=t,this.k=e,this.C=l?h:s.ZT,this.cb=c?a:s.ZT,void 0!==this.cb||l||u?(this.iO=!0,d=t[e],this.v=u&&void 0!==d?n(d,this.i):d,this.B()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t){this.hs&&(t=this.set(t,this.i));const e=this.v;if(this.iO){if(Xn(t,e))return;this.v=t,this.ov=e,(null==this.$controller||this.$controller.isBound)&&(this.u&&this.cb.call(this.o,t,e),this.A&&this.C.call(this.o,this.k,t,e)),this.subs.notify(this.v,this.ov)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.i):this.o[this.k],this.B()),this.subs.add(t)}B(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t)}})}}wt(hr);const cr=function(t){function e(t,i,n){s.DI.inject(e)(t,i,n)}return e.$isResolver=!0,e.resolve=function(e,i){return i.root===i||i.has(t,!1)?i.get(t):i.root.get(t)},e},lr=s.DI.createInterface,ur=s.YM.singleton,dr=s.YM.aliasTo,pr=s.YM.instance;s.YM.callback;const fr=s.YM.transient,gr=(t,e,i)=>t.registerResolver(e,i);function mr(t,e,i,n){for(let r=0,o=t.length;r<o;++r)s.YM.aliasTo(i,e.keyFrom(t[r])).register(n)}class vr{constructor(t,e,i,s){if(this.chars=t,this.repeat=e,this.isSymbol=i,this.isInverted=s,s)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.I;break;default:this.has=this.T}else switch(t.length){case 0:this.has=this.P;break;case 1:this.has=this.L;break;default:this.has=this.U}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}U(t){return this.chars.includes(t)}L(t){return this.chars===t}P(t){return!1}T(t){return!this.chars.includes(t)}I(t){return this.chars!==t}R(t){return!0}}class wr{constructor(){this.parts=s.ow,this.$="",this._={},this.q={}}get pattern(){const t=this.$;return""===t?null:t}set pattern(t){null==t?(this.$="",this.parts=s.ow):(this.$=t,this.parts=this.q[t])}append(t,e){const i=this._;void 0===i[t]?i[t]=e:i[t]+=e}next(t){const e=this._;let i;void 0!==e[t]&&(i=this.q,void 0===i[t]?i[t]=[e[t]]:i[t].push(e[t]),e[t]=void 0)}}class yr{constructor(t,...e){this.charSpec=t,this.M=[],this.F=null,this.O=!1,this.V=e}get $(){return this.O?this.V[0]:null}findChild(t){const e=this.M,i=e.length;let s=null,n=0;for(;n<i;++n)if(s=e[n],t.equals(s.charSpec))return s;return null}append(t,e){const i=this.V;i.includes(e)||i.push(e);let s=this.findChild(t);return null==s&&(s=new yr(t,e),this.M.push(s),t.repeat&&s.M.push(s)),s}findMatches(t,e){const i=[],s=this.M,n=s.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=s[a],o.charSpec.has(t))if(i.push(o),r=o.V.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.V[h]);else for(;h<r;++h)e.append(o.V[h],t);return i}}class br{constructor(t){this.text=t;const e=this.N=t.length,i=this.j=[];let s=0;for(;e>s;++s)i.push(new vr(t[s],!1,!1,!1))}eachChar(t){const e=this.N,i=this.j;let s=0;for(;e>s;++s)t(i[s])}}class Sr{constructor(t){this.text="PART",this.H=new vr(t,!0,!1,!0)}eachChar(t){t(this.H)}}class Cr{constructor(t){this.text=t,this.H=new vr(t,!1,!0,!1)}eachChar(t){t(this.H)}}class kr{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Ar=lr("ISyntaxInterpreter",(t=>t.singleton(Tr)));class Tr{constructor(){this.W=new yr(null),this.G=[this.W]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let i,s,n,r,o,a,h,c,l=0;for(;e>l;){for(i=this.W,s=t[l],n=s.pattern,r=new kr,o=this.X(s,r),a=o.length,h=t=>i=i.append(t,n),c=0;a>c;++c)o[c].eachChar(h);i.F=r,i.O=!0,++l}}interpret(t){const e=new wr,i=t.length;let s,n=this.G,r=0;for(;r<i&&(n=this.K(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter($r),n.length>0&&(n.sort(xr),s=n[0],s.charSpec.isSymbol||e.next(s.$),e.pattern=s.$),e}K(t,e,i){const s=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],s.push(...n.findMatches(e,i));return s}X(t,e){const i=[],s=t.pattern,n=s.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=s.charAt(o),0!==r.length&&r.includes(h)?o!==a?(i.push(new br(s.slice(a,o))),++e.statics,a=o):(i.push(new Cr(s.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===s.slice(o,o+4)?(a=o+=4,i.push(new Sr(r)),++e.dynamics):++o;return a!==o&&(i.push(new br(s.slice(a,o))),++e.statics),i}}function $r(t){return t.O}function xr(t,e){const i=t.F,s=e.F;return i.statics!==s.statics?s.statics-i.statics:i.dynamics!==s.dynamics?s.dynamics-i.dynamics:i.symbols!==s.symbols?s.symbols-i.symbols:0}class Ir{constructor(t,e,i,s){this.rawName=t,this.rawValue=e,this.target=i,this.command=s}}const Rr=lr("IAttributePattern"),Er=lr("IAttributeParser",(t=>t.singleton(Nr)));class Nr{constructor(t,e){this.Y={},this.Z=t;const i=this.V={},n=e.reduce(((t,e)=>{const s=Br(e.constructor);return s.forEach((t=>i[t.pattern]=e)),t.concat(s)}),s.ow);t.add(n)}parse(t,e){let i=this.Y[t];null==i&&(i=this.Y[t]=this.Z.interpret(t));const s=i.pattern;return null==s?new Ir(t,e,t,null):this.V[s][s](t,e,i.parts)}}function Or(...t){return function(e){return Lr.define(t,e)}}Nr.inject=[Ar,(0,s.$6)(Rr)];class Pr{constructor(t){this.Type=t,this.name=void 0}register(t){ur(Rr,this.Type).register(t)}}const Mr=On("attribute-pattern"),Ur="attribute-pattern-definitions",Br=t=>s.b$.annotation.get(t,Ur),Lr=Dn({name:Mr,definitionAnnotationKey:Ur,define(t,e){const i=new Pr(e);return In(Mr,i,e),Pn(e,Mr),s.b$.annotation.set(e,Ur,t),Mn(e,Ur),e},getPatternDefinitions:Br});let jr=class{"PART.PART"(t,e,i){return new Ir(t,e,i[0],i[1])}"PART.PART.PART"(t,e,i){return new Ir(t,e,`${i[0]}.${i[1]}`,i[2])}};jr=An([Or({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],jr);let Fr=class{ref(t,e,i){return new Ir(t,e,"element","ref")}"PART.ref"(t,e,i){return new Ir(t,e,i[0],"ref")}};Fr=An([Or({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Fr);let Vr=class{":PART"(t,e,i){return new Ir(t,e,i[0],"bind")}};Vr=An([Or({pattern:":PART",symbols:":"})],Vr);let Dr=class{"@PART"(t,e,i){return new Ir(t,e,i[0],"trigger")}};Dr=An([Or({pattern:"@PART",symbols:"@"})],Dr);let Hr=class{"...$attrs"(t,e,i){return new Ir(t,e,"","...$attrs")}};Hr=An([Or({pattern:"...$attrs",symbols:""})],Hr);class qr{constructor(t,e,i){this.type=7,this.v=null,this.ov=null,this.J=!1,this.o=t,this.tt=e,this.et=i}getValue(){return this.v}setValue(t){this.v=t,this.J=t!==this.ov,this.it()}it(){if(this.J)switch(this.J=!1,this.ov=this.v,this.et){case"class":this.o.classList.toggle(this.tt,!!this.v);break;case"style":{let t="",e=this.v;Qn(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.tt,e,t);break}default:null==this.v?this.o.removeAttribute(this.et):this.o.setAttribute(this.et,String(this.v))}}handleMutation(t){let e=!1;for(let i=0,s=t.length;s>i;++i){const s=t[i];if("attributes"===s.type&&s.attributeName===this.tt){e=!0;break}}if(e){let t;switch(this.et){case"class":t=this.o.classList.contains(this.tt);break;case"style":t=this.o.style.getPropertyValue(this.tt);break;default:throw Fn(`AUR0651:${this.et}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.J=!1,this.st())}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.tt),Wr(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&_r(this.o,this)}st(){Gr=this.ov,this.ov=this.v,this.subs.notify(this.v,Gr)}}wt(qr);const Wr=(t,e,i)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(zr)).observe(e,{attributes:!0}),e.$eMObs.add(i)},_r=(t,e)=>{const i=t.$eMObs;return!(!i||!i.delete(e)||(0===i.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},zr=t=>{t[0].target.$eMObs.forEach(Kr,t)};function Kr(t){t.handleMutation(this)}let Gr;function Jr(t){return function(e){return Xr.define(t,e)}}class Qr{constructor(t,e,i,s){this.Type=t,this.name=e,this.aliases=i,this.key=s}static create(t,e){let i,n;return Qn(t)?(i=t,n={name:i}):(i=t.name,n=t),new Qr(e,(0,s.BR)(Yr(e,"name"),i),(0,s.eG)(Yr(e,"aliases"),n.aliases,e.aliases),Xr.keyFrom(i))}register(t){const{Type:e,key:i,aliases:s}=this;ur(i,e).register(t),dr(i,e).register(t),mr(s,Xr,i,t)}}const Zr=On("binding-behavior"),Yr=(t,e)=>$n(Nn(e),t),Xr=Dn({name:Zr,keyFrom:t=>`${Zr}:${t}`,isType:t=>Jn(t)&&xn(Zr,t),define(t,e){const i=Qr.create(t,e);return In(Zr,i,i.Type),In(Zr,i,i),Pn(e,Zr),i.Type},getDefinition(t){const e=$n(Zr,t);if(void 0===e)throw Fn(`AUR0151:${t.name}`);return e},annotate(t,e,i){In(Nn(e),i,t)},getAnnotation:Yr});class to{constructor(t,e,i,s){this.Type=t,this.name=e,this.aliases=i,this.key=s}static create(t,e){let i,n;return Qn(t)?(i=t,n={name:i}):(i=t.name,n=t),new to(e,(0,s.BR)(io(e,"name"),i),(0,s.eG)(io(e,"aliases"),n.aliases,e.aliases),so.keyFrom(i))}register(t){const{Type:e,key:i,aliases:n}=this;s.YM.singleton(i,e).register(t),s.YM.aliasTo(i,e).register(t),mr(n,so,i,t)}}const eo=On("value-converter"),io=(t,e)=>$n(Nn(e),t),so=Dn({name:eo,keyFrom:t=>`${eo}:${t}`,isType:t=>Jn(t)&&xn(eo,t),define(t,e){const i=to.create(t,e);return In(eo,i,i.Type),In(eo,i,i),Pn(e,eo),i.Type},getDefinition(t){const e=$n(eo,t);if(void 0===e)throw Fn(`AUR0152:${t.name}`);return e},annotate(t,e,i){In(Nn(e),i,t)},getAnnotation:io});class no{constructor(t,e){this.v=void 0,this.b=t,this.nt=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const i=this.b;t!==st(i.ast,i.s,i,null)&&(this.v=t,this.nt.add(this))}}const ro=t=>{er(t.prototype,"useScope",(function(t){this.s=t}))},oo=(t,e=!0)=>i=>{const s=i.prototype;null!=t&&tr(s,"strict",{enumerable:!0,get:function(){return t}}),tr(s,"strictFnCall",{enumerable:!0,get:function(){return e}}),er(s,"get",(function(t){return this.l.get(t)})),er(s,"getSignaler",(function(){return this.l.root.get(bn)})),er(s,"getConverter",(function(t){const e=so.keyFrom(t);let i=ao.get(this);return null==i&&ao.set(this,i=new ho),i[e]??(i[e]=this.l.get(cr(e)))})),er(s,"getBehavior",(function(t){const e=Xr.keyFrom(t);let i=ao.get(this);return null==i&&ao.set(this,i=new ho),i[e]??(i[e]=this.l.get(cr(e)))}))},ao=new WeakMap;class ho{}const co=lr("IFlushQueue",(t=>t.singleton(lo)));class lo{constructor(){this.rt=!1,this.ot=new Set}get count(){return this.ot.size}add(t){if(this.ot.add(t),!this.rt){this.rt=!0;try{this.ot.forEach(uo)}finally{this.rt=!1}}}clear(){this.ot.clear(),this.rt=!1}}function uo(t,e,i){i.delete(t),t.flush()}const po=new WeakSet,fo=(t,e)=>{er(t.prototype,"limit",(function(t){if(po.has(this))throw Fn("AURXXXX: a rate limit has already been applied.");po.add(this);const i=e(this,t),s=this[i],n=(...t)=>s.call(this,...t),r="debounce"===t.type?go(t,n,this):mo(t,n,this);return this[i]=r,{dispose:()=>{po.delete(this),r.dispose(),delete this[i]}}}))},go=(t,e,i)=>{let s,n,r;const o=t.queue,a=a=>{r=a,i.isBound?(n=s,s=o.queueTask((()=>e(r)),{delay:t.delay,reusable:!1}),n?.cancel()):e(r)};return a.dispose=()=>{n?.cancel(),s?.cancel()},a},mo=(t,e,i)=>{let s,n,r,o=0,a=0;const h=t.queue,c=()=>t.now(),l=l=>{r=l,i.isBound?(a=c()-o,n=s,a>t.delay?(o=c(),e(r)):s=h.queueTask((()=>{o=c(),e(r)}),{delay:t.delay-a,reusable:!1}),n?.cancel()):e(r)};return l.dispose=()=>{n?.cancel(),s?.cancel()},l},vo={reusable:!1,preempt:!0};class wo{constructor(t,e,i,s,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.lt=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.ht=t,this.target=r,this.oL=i,this.ct=s}updateTarget(t){this.ut.setValue(t,this.target,this.targetProperty)}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=st(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,1!==this.ht.state&&(4&this.ut.type)>0?(t=this.lt,this.lt=this.ct.queueTask((()=>{this.lt=null,this.updateTarget(e)}),vo),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this),this.ut??(this.ut=new qr(this.target,this.targetProperty,this.targetAttribute)),3&this.mode&&this.updateTarget(this.v=st(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.lt?.cancel(),this.lt=null,this.obs.clearAll())}}ro(wo),fo(wo,(()=>"updateTarget")),Pe(wo),oo(!0)(wo);const yo={reusable:!1,preempt:!0};class bo{constructor(t,e,i,s,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.lt=null,this.ht=t,this.oL=i,this.ct=s,this.ut=i.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new So(h[u],r,o,e,i,this)}ft(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,i=t.length;let s="",n=0;if(1===i)s=e[0]+t[0].v+e[1];else for(s=e[0];i>n;++n)s+=t[n].v+e[n+1];const r=this.ut;let o;1!==this.ht.state&&(4&r.type)>0?(o=this.lt,this.lt=this.ct.queueTask((()=>{this.lt=null,r.setValue(s,this.target,this.targetProperty)}),yo),o?.cancel(),o=null):r.setValue(s,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,i=e.length;let s=0;for(;i>s;++s)e[s].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let i=0;for(;e>i;++i)t[i].unbind();this.lt?.cancel(),this.lt=null}}class So{constructor(t,e,i,s,n,r){this.ast=t,this.target=e,this.targetProperty=i,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=s,this.oL=n}updateTarget(){this.owner.ft()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=st(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,Gn(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this),this.v=st(this.ast,this.s,this,(2&this.mode)>0?this:null),Gn(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}ro(So),fo(So,(()=>"updateTarget")),Pe(So),oo(!0)(So);class Co{constructor(t,e,i,s,n,r,o,a){this.p=n,this.ast=r,this.target=o,this.strict=a,this.isBound=!1,this.mode=2,this.lt=null,this.v="",this.boundFn=!1,this.l=e,this.ht=t,this.oL=i,this.ct=s}updateTarget(t){const e=this.target,i=this.p.Node,s=this.v;this.v=t,s instanceof i&&s.parentNode?.removeChild(s),t instanceof i?(e.textContent="",e.parentNode?.insertBefore(t,e)):e.textContent=String(t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=st(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.lt?.cancel(),void(this.lt=null);1!==this.ht.state?this.dt(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=st(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),Gn(t)&&this.observeCollection(t),1!==this.ht.state?this.dt(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this);const e=this.v=st(this.ast,this.s,this,(2&this.mode)>0?this:null);Gn(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.obs.clearAll(),this.lt?.cancel(),this.lt=null)}dt(t){const e=this.lt;this.lt=this.ct.queueTask((()=>{this.lt=null,this.updateTarget(t)}),yo),e?.cancel()}}ro(Co),fo(Co,(()=>"updateTarget")),Pe()(Co),oo(void 0,!1)(Co);class ko{constructor(t,e,i,s,n=!1){this.ast=i,this.targetProperty=s,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.gt=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=st(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.gt?t.bindingContext:t.overrideContext,rt(this.ast,t,this),this.v=st(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}ro(ko),fo(ko,(()=>"updateTarget")),Pe(ko),oo(!0)(ko);class Ao{constructor(t,e,i,s,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.ut=void 0,this.lt=null,this.vt=null,this.boundFn=!1,this.l=e,this.ht=t,this.ct=s,this.oL=i}updateTarget(t){this.ut.setValue(t,this.target,this.targetProperty)}updateSource(t){nt(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=st(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),1!==this.ht.state&&(4&this.ut.type)>0?(To=this.lt,this.lt=this.ct.queueTask((()=>{this.updateTarget(t),this.lt=null}),$o),To?.cancel(),To=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this);const e=this.oL,i=this.mode;let s=this.ut;s||(s=4&i?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.ut=s);const n=(2&i)>0;3&i&&this.updateTarget(st(this.ast,this.s,this,n?this:null)),4&i&&(s.subscribe(this.vt??(this.vt=new no(this,this.l.get(co)))),n||this.updateSource(s.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.vt&&(this.ut.unsubscribe(this.vt),this.vt=null),this.lt?.cancel(),this.lt=null,this.obs.clearAll())}useTargetObserver(t){this.ut?.unsubscribe(this),(this.ut=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.vt)throw Fn("AURxxxx: binding already has a target subscriber");this.vt=t}}ro(Ao),fo(Ao,(t=>4&t.mode?"updateSource":"updateTarget")),Pe(Ao),oo(!0,!1)(Ao);let To=null;const $o={reusable:!1,preempt:!0};class xo{constructor(t,e,i){this.ast=e,this.target=i,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this),nt(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,st(this.ast,this.s,this,null)===this.target&&nt(this.ast,this.s,this,null),ot(this.ast,this.s,this),this.s=void 0)}}oo(!1)(xo);class Io{constructor(t,e=!1){this.prevent=t,this.capture=e}}class Ro{constructor(t,e,i,s,n){this.ast=e,this.target=i,this.targetEvent=s,this.isBound=!1,this.self=!1,this.boundFn=!0,this.l=t,this.xt=n}callSource(t){const e=this.s.overrideContext;e.$event=t;let i=st(this.ast,this.s,this,null);return delete e.$event,Jn(i)&&(i=i(t)),!0!==i&&this.xt.prevent&&t.preventDefault(),i}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,rt(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.xt),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.xt))}}ro(Ro),fo(Ro,(()=>"callSource")),oo(!0,!0)(Ro);const Eo=lr("IAppTask");class No{constructor(t,e,i){this.c=void 0,this.slot=t,this.k=e,this.cb=i}register(t){return this.c=t.register(pr(Eo,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Oo=Dn({creating:Po("creating"),hydrating:Po("hydrating"),hydrated:Po("hydrated"),activating:Po("activating"),activated:Po("activated"),deactivating:Po("deactivating"),deactivated:Po("deactivated")});function Po(t){return function(e,i){return Jn(i)?new No(t,e,i):new No(t,null,e)}}const Mo=s.ow,Uo=Nn("watch"),Bo=Dn({name:Uo,add(t,e){let i=$n(Uo,t);null==i&&In(Uo,i=[],t),i.push(e)},getAnnotation:t=>$n(Uo,t)??Mo});function Lo(t){return function(e){return Wo(t,e)}}function jo(t){return function(e){return Wo(Qn(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Fo{constructor(t,e,i,s,n,r,o,a,h,c){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c}get type(){return 2}static create(t,e){let i,n;return Qn(t)?(i=t,n={name:i}):(i=t.name,n=t),new Fo(e,(0,s.BR)(Ho(e,"name"),i),(0,s.eG)(Ho(e,"aliases"),n.aliases,e.aliases),Do(i),(0,s.BR)(Ho(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,2),(0,s.BR)(Ho(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),rr.from(e,...rr.getAll(e),Ho(e,"bindables"),e.bindables,n.bindables),(0,s.BR)(Ho(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1),(0,s.eG)(Bo.getAnnotation(e),e.watches),(0,s.eG)(Ho(e,"dependencies"),n.dependencies,e.dependencies))}register(t){const{Type:e,key:i,aliases:s}=this;fr(i,e).register(t),dr(i,e).register(t),mr(s,zo,i,t)}}const Vo=On("custom-attribute"),Do=t=>`${Vo}:${t}`,Ho=(t,e)=>$n(Nn(e),t),qo=(t,e)=>Th(t,Do(e))??void 0,Wo=(t,e)=>{const i=Fo.create(t,e);return In(Vo,i,i.Type),In(Vo,i,i),Pn(e,Vo),i.Type},_o=t=>{const e=$n(Vo,t);if(void 0===e)throw Fn(`AUR0759:${t.name}`);return e},zo=Dn({name:Vo,keyFrom:Do,isType:t=>Jn(t)&&xn(Vo,t),for:qo,define:Wo,getDefinition:_o,annotate(t,e,i){In(Nn(e),i,t)},getAnnotation:Ho});function Ko(t){return t.startsWith(Go)}const Go=Nn("children-observer"),Jo=Dn({name:Go,keyFrom:t=>`${Go}:${t}`,from(...t){const e={};function i(t){e[t]=Zo.create(t)}function s(t,i){e[t]=Zo.create(t,i)}return t.forEach((function(t){Gn(t)?t.forEach(i):t instanceof Zo?e[t.property]=t:void 0!==t&&Wn(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=Go.length+1,i=[],n=(0,s.Qy)(t);let r,o,a,h=n.length,c=0;for(;--h>=0;){a=n[h],r=Un(a).filter(Ko),o=r.length;for(let t=0;t<o;++t)i[c++]=$n(Go,a,r[t].slice(e))}return i}}),Qo={childList:!0};class Zo{constructor(t,e,i,s,n,r){this.callback=t,this.property=e,this.options=i,this.query=s,this.filter=n,this.map=r}static create(t,e={}){return new Zo((0,s.BR)(e.callback,`${t}Changed`),(0,s.BR)(e.property,t),e.options??Qo,e.query,e.filter,e.map)}}class Yo{constructor(t,e,i,s,n=Xo,r=ta,o=ea,a){this.controller=t,this.obj=e,this.propertyKey=i,this.query=n,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[s],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){this.observing||(this.observing=!0,this.children=this.get(),(this.observer??(this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.wt()})))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=s.ow)}wt(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0)}get(){return function(t,e,i,s){const n=e(t),r=n.length,o=[];let a,h,c,l=0;for(;l<r;++l)a=n[l],h=Yh(a,ia),c=h?.viewModel??null,i(a,h,c)&&o.push(s(a,h,c));return o}(this.controller,this.query,this.filter,this.map)}}function Xo(t){return t.host.childNodes}function ta(t,e,i){return!!i}function ea(t,e,i){return i}wt()(Yo);const ia={optional:!0},sa=s.TI,na=(t,e,i,s)=>{t.addEventListener(e,i,s)},ra=(t,e,i,s)=>{t.removeEventListener(e,i,s)},oa=t=>{const e=t.prototype;er(e,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(aa of this.cf.events)na(this.bt,aa,this);this.yt=!0,this.kt?.()}})),er(e,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(aa of this.cf.events)ra(this.bt,aa,this);this.yt=!1,this.At?.()}})),er(e,"useConfig",(function(t){if(this.cf=t,this.yt){for(aa of this.cf.events)ra(this.bt,aa,this);for(aa of this.cf.events)na(this.bt,aa,this)}}))};let aa;const ha=t=>{er(t.prototype,"subscribe",s.ZT),er(t.prototype,"unsubscribe",s.ZT)};class ca{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.Ct={},this.Bt=0,this.J=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t){this.value=t,this.J=t!==this.ov,this.it()}it(){if(this.J){this.J=!1;const t=this.value,e=this.Ct,i=la(t);let s=this.Bt;if(this.ov=t,i.length>0&&this.Rt(i),this.Bt+=1,0===s)return;s-=1;for(const t in e)Vn.call(e,t)&&e[t]===s&&this.obj.classList.remove(t)}}Rt(t){const e=this.obj,i=t.length;let s,n=0;for(;n<i;n++)s=t[n],0!==s.length&&(this.Ct[s]=this.Bt,e.classList.add(s))}}function la(t){if(Qn(t))return ua(t);if("object"!=typeof t)return s.ow;if(t instanceof Array){const e=t.length;if(e>0){const i=[];let s=0;for(;e>s;++s)i.push(...la(t[s]));return i}return s.ow}const e=[];let i;for(i in t)Boolean(t[i])&&(i.includes(" ")?e.push(...ua(i)):e.push(i));return e}function ua(t){const e=t.match(/\S+/g);return null===e?s.ow:e}ha(ca),lr("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>ma.supported(t.get(sa))?t.get(da):t.get(pa)))));class da{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new ma(this.p,t,this.cache,e)}}da.inject=[sa];class pa{constructor(t){this.p=t}createStyles(t,e){return new va(this.p,t,e)}}pa.inject=[sa];const fa=lr("IShadowDOMStyles"),ga=lr("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:s.ZT})));class ma{constructor(t,e,i,s=null){this.sharedStyles=s,this.styleSheets=e.map((e=>{let s;return e instanceof t.CSSStyleSheet?s=e:(s=i.get(e),void 0===s&&(s=new t.CSSStyleSheet,s.replaceSync(e),i.set(e,s))),s}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class va{constructor(t,e,i=null){this.p=t,this.localStyles=e,this.sharedStyles=i}applyTo(t){const e=this.localStyles,i=this.p;for(let s=e.length-1;s>-1;--s){const n=i.document.createElement("style");n.innerHTML=e[s],t.prepend(n)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:wa,exit:ya}=ss,{wrap:ba,unwrap:Sa}=Qs;class Ca{constructor(t,e,i,s,n){this.obj=t,this.$get=i,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=s,this.oL=e}get value(){return this.v}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,i=this.compute();Xn(i,e)||this.cb.call(t,i,e,t)}compute(){this.running=!0,this.obs.version++;try{return wa(this),this.v=Sa(this.$get.call(void 0,this.useProxy?ba(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,ya(this)}}}class ka{constructor(t,e,i,s,n){this.scope=t,this.l=e,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.St=s,this.cb=n}get value(){return this.v}handleChange(t){const e=this.St,i=this.obj,s=this.v;1===e.$kind&&1===this.obs.count||(this.obs.version++,t=st(e,this.scope,this,this),this.obs.clear()),Xn(t,s)||(this.v=t,this.cb.call(i,t,s,i))}bind(){this.isBound||(this.obs.version++,this.v=st(this.St,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}Pe(Ca),Pe(ka),oo(!0)(ka);const Aa=lr("ILifecycleHooks");class Ta{constructor(t,e){this.definition=t,this.instance=e}}class $a{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const i=new Set;let s=e.prototype;for(;s!==Ln;){for(const t of qn(s))"constructor"!==t&&i.add(t);s=Object.getPrototypeOf(s)}return new $a(e,i)}register(t){ur(Aa,this.Type).register(t)}}const xa=new WeakMap,Ia=Nn("lifecycle-hooks"),Ra=Dn({name:Ia,define(t,e){const i=$a.create(t,e);return In(Ia,i,e),Pn(e,Ia),i.Type},resolve(t){let e=xa.get(t);if(void 0===e){xa.set(t,e=new Ea);const i=t.root,s=i.id===t.id?t.getAll(Aa):t.has(Aa,!1)?i.getAll(Aa).concat(t.getAll(Aa)):i.getAll(Aa);let n,r,o,a,h;for(n of s)for(a of(r=$n(Ia,n.constructor),o=new Ta(r,n),r.propertyNames))h=e[a],void 0===h?e[a]=[o]:h.push(o)}return e}});class Ea{}const Na=lr("IViewFactory");class Oa{constructor(t,e){this.isCaching=!1,this.Y=null,this.It=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Oa.maxCacheSize:Qn(t)&&(t=parseInt(t,10)),-1!==this.It&&e||(this.It=t)),this.It>0?this.Y=[]:this.Y=null,this.isCaching=this.It>0}canReturnToCache(t){return null!=this.Y&&this.Y.length<this.It}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.Y.push(t),!0)}create(t){const e=this.Y;let i;return null!=e&&e.length>0?(i=e.pop(),i):(i=Fa.$view(this,t),i)}}Oa.maxCacheSize=65535;const Pa=lr("IRendering",(t=>t.singleton(Ma)));class Ma{constructor(t){this.Tt=new WeakMap,this.Pt=new WeakMap;const e=t.root;this.p=(this.Et=e).get(sa),this.ep=e.get(Me),this.oL=e.get(ln),this.Lt=new Mh(this.p,this.p.document.createDocumentFragment())}get renderers(){return this.Dt??(this.Dt=this.Et.getAll(xc,!1).reduce(((t,e)=>(t[e.target]=e,t)),jn()))}compile(t,e,i){if(!1!==t.needsCompile){const s=this.Tt,n=e.get($c);let r=s.get(t);return null==r?s.set(t,r=n.compile(t,e,i)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new Oa(e,Vh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Mh(this.p,t.template);let e;const i=this.Pt;if(i.has(t))e=i.get(t);else{const s=this.p,n=s.document,r=t.template;let o;null===r?e=null:r instanceof s.Node?"TEMPLATE"===r.nodeName?e=n.adoptNode(r.content):(e=n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=n.createElement("template"),Qn(r)&&(o.innerHTML=r),n.adoptNode(e=o.content)),i.set(t,e)}return null==e?this.Lt:new Mh(this.p,e.cloneNode(!0))}render(t,e,i,s){const n=i.instructions,r=this.renderers,o=e.length;if(e.length!==n.length)throw Fn(`AUR0757:${o}<>${n.length}`);let a,h,c,l=0,u=0,d=0;if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=s&&(a=i.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,s,h,this.p,this.ep,this.oL),++u}}var Ua,Ba;Ma.inject=[s.bE],function(t){t[t.none=0]="none",t[t.fromBind=1]="fromBind",t[t.fromUnbind=2]="fromUnbind",t[t.dispose=4]="dispose"}(Ua||(Ua={})),function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(Ba||(Ba={}));const La={optional:!0},ja=new WeakMap;class Fa{constructor(t,e,i,n,r,o,a){this.container=t,this.vmKind=e,this.definition=i,this.viewFactory=n,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.Ut=null,this.state=0,this.$t=!1,this._t=s.ow,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.qt=0,this.Mt=0,this.Ft=0,this.Ot=r,this.Vt=2===e?za.none:new za(r),this.location=a,this.r=t.root.get(Pa)}get lifecycleHooks(){return this.Ut}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get hooks(){return this.Vt}get viewModel(){return this.Ot}set viewModel(t){this.Ot=t,this.Vt=null==t||2===this.vmKind?za.none:new za(t)}static getCached(t){return ja.get(t)}static getCachedOrThrow(t){const e=Fa.getCached(t);if(void 0===e)throw Fn(`AUR0500:${t}`);return e}static $el(t,e,i,n,r,o=null){if(ja.has(e))return ja.get(e);r=r??tc(e.constructor);const a=new Fa(t,0,r,null,e,i,o),h=t.get((0,s.jt)(Ya));return r.dependencies.length>0&&t.register(...r.dependencies),gr(t,Ya,new s.g("IHydrationContext",new Xa(a,n,h))),ja.set(e,a),null!=n&&!1===n.hydrate||a.hE(n,h),a}static $attr(t,e,i,s){if(ja.has(e))return ja.get(e);s=s??_o(e.constructor);const n=new Fa(t,1,s,null,e,i,null);return s.dependencies.length>0&&t.register(...s.dependencies),ja.set(e,n),n.Nt(),n}static $view(t,e){const i=new Fa(t.container,2,null,t,null,null,null);return i.parent=e??null,i.jt(),i}hE(t,e){const i=this.container,n=(this.flags,this.Ot);let r=this.definition;if(this.scope=Y.create(n,null,!0),r.watches.length>0&&Wa(this,i,r,n),Da(this,r,0,n),this._t=function(t,e,i){const n=e.childrenObservers,r=qn(n),o=r.length;if(o>0){const e=Va(i),s=[];let a,h,c=0;for(;c<o;++c)a=r[c],null==e[a]&&(h=n[a],s[s.length]=e[a]=new Yo(t,i,a,h.callback,h.query,h.filter,h.map,h.options));return s}return s.ow}(this,r,n),this.Vt.hasDefine){const t=n.define(this,e,r);void 0!==t&&t!==r&&(r=Vh.getOrCreate(t))}this.Ut=Ra.resolve(i),r.register(i),null!==r.injectable&&gr(i,r.injectable,new s.g("definition.injectable",n)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.Ut.hydrating&&this.Ut.hydrating.forEach(ih,this),this.Vt.hasHydrating&&this.Ot.hydrating(this);const e=this.Ht=this.r.compile(this.definition,this.container,t),{shadowOptions:i,isStrictBinding:s,hasSlots:n,containerless:r}=e;let o=this.location;if(this.isStrictBinding=s,null!==(this.hostController=Yh(this.host,La))&&(this.host=this.container.root.get(sa).document.createElement(this.definition.name),r&&null==o&&(o=this.location=Oh(this.host))),$h(this.host,Kh,this),$h(this.host,this.definition.key,this),null!==i||n){if(null!=o)throw Fn("AUR0501");$h(this.shadowRoot=this.host.attachShadow(i??Ka),Kh,this),$h(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=o?($h(o,Kh,this),$h(o,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.Ot.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Ut.hydrated&&this.Ut.hydrated.forEach(sh,this),this.Vt.hasHydrated&&this.Ot.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ht,this.host),void 0!==this.Ut.created&&this.Ut.created.forEach(eh,this),this.Vt.hasCreated&&this.Ot.created(this)}Nt(){const t=this.definition,e=this.Ot;t.watches.length>0&&Wa(this,this.container,t,e),Da(this,t,this.flags,e),e.$controller=this,this.Ut=Ra.resolve(this.container),void 0!==this.Ut.created&&this.Ut.created.forEach(eh,this),this.Vt.hasCreated&&this.Ot.created(this)}jt(){this.Ht=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ht.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ht)).findTargets(),this.Ht,void 0)}activate(t,e,i,n){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw Fn(`AUR0502:${this.name}`);default:throw Fn(`AUR0503:${this.name} ${Qa(this.state)}`)}switch(this.parent=e,i|=1,this.vmKind){case 0:this.scope.parent=n??null;break;case 1:this.scope=n??null;break;case 2:if(null==n)throw Fn("AUR0504");this.hasLockedScope||(this.scope=n)}let r;return this.isStrictBinding,this.$initiator=t,this.$flags=i,this.Wt(),2!==this.vmKind&&null!=this.Ut.binding&&(r=(0,s.CL)(...this.Ut.binding.map(nh,this))),this.Vt.hasBinding&&(r=(0,s.CL)(r,this.Ot.binding(this.$initiator,this.parent,this.$flags))),Kn(r)?(this.zt(),r.then((()=>{this.bind()})).catch((t=>{this.Gt(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,i=this._t.length;if(i>0)for(;i>e;)this._t[e].start(),++e;if(null!==this.bindings)for(e=0,i=this.bindings.length;i>e;)this.bindings[e].bind(this.scope),++e;if(2!==this.vmKind&&null!=this.Ut.bound&&(t=(0,s.CL)(...this.Ut.bound.map(rh,this))),this.Vt.hasBound&&(t=(0,s.CL)(t,this.Ot.bound(this.$initiator,this.parent,this.$flags))),Kn(t))return this.zt(),void t.then((()=>{this.isBound=!0,this.Xt()})).catch((t=>{this.Gt(t)}));this.isBound=!0,this.Xt()}Kt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Xt(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Kt(this.host);break;case 3:this.hostController.Kt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(fa,!1)?t.get(fa):t.get(ga)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.Ut.attaching&&(t=(0,s.CL)(...this.Ut.attaching.map(oh,this))),this.Vt.hasAttaching&&(t=(0,s.CL)(t,this.Ot.attaching(this.$initiator,this.parent,this.$flags))),Kn(t)&&(this.zt(),this.Wt(),t.then((()=>{this.Qt()})).catch((t=>{this.Gt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.Qt()}deactivate(t,e,i){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw Fn(`AUR0505:${this.name} ${Qa(this.state)}`)}this.$initiator=t,this.$flags=i,t===this&&this.Yt();let n,r=0;if(this._t.length)for(;r<this._t.length;++r)this._t[r].stop();if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this,i);if(2!==this.vmKind&&null!=this.Ut.detaching&&(n=(0,s.CL)(...this.Ut.detaching.map(hh,this))),this.Vt.hasDetaching&&(n=(0,s.CL)(n,this.Ot.detaching(this.$initiator,this.parent,this.$flags))),Kn(n)&&(this.zt(),t.Yt(),n.then((()=>{t.Zt()})).catch((e=>{t.Gt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Zt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=2|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parent=null}4==(4&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Jt()}zt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.zt())}Jt(){void 0!==this.$promise&&(lh=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,lh(),lh=void 0)}Gt(t){void 0!==this.$promise&&(uh=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,uh(t),uh=void 0),this.$initiator!==this&&this.parent.Gt(t)}Wt(){++this.qt,this.$initiator!==this&&this.parent.Wt()}Qt(){if(0==--this.qt){if(2!==this.vmKind&&null!=this.Ut.attached&&(dh=(0,s.CL)(...this.Ut.attached.map(ah,this))),this.Vt.hasAttached&&(dh=(0,s.CL)(dh,this.Ot.attached(this.$initiator,this.$flags))),Kn(dh))return this.zt(),dh.then((()=>{this.state=2,this.Jt(),this.$initiator!==this&&this.parent.Qt()})).catch((t=>{this.Gt(t)})),void(dh=void 0);dh=void 0,this.state=2,this.Jt()}this.$initiator!==this&&this.parent.Qt()}Yt(){++this.Mt}Zt(){if(0==--this.Mt){this.te(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.Ut.unbinding&&(t=(0,s.CL)(...e.Ut.unbinding.map(ch,this))),e.Vt.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=(0,s.CL)(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),Kn(t)&&(this.zt(),this.te(),t.then((()=>{this.ee()})).catch((t=>{this.Gt(t)}))),t=void 0,e=e.next;this.ee()}}te(){++this.Ft}ee(){if(0==--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return _o(this.Ot.constructor).name===t;case 0:return tc(this.Ot.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&($h(t,Kh,this),$h(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&($h(t,Kh,this),$h(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&($h(t,Kh,this),$h(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.Vt.hasDispose&&this.Ot.dispose(),null!==this.children&&(this.children.forEach(th),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Ot&&(ja.delete(this.Ot),this.Ot=null),this.Ot=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Vt.hasAccept&&!0===this.Ot.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let i=0,s=e.length;i<s;++i)if(!0===e[i].accept(t))return!0}}}function Va(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Da(t,e,i,s){const n=e.bindables,r=qn(n),o=r.length;if(o>0){let e,i,a=0;const h=Va(s),c=t.container,l=c.has(ft,!0)?c.get(ft):null;for(;a<o;++a)e=r[a],void 0===h[e]&&(i=n[e],h[e]=new hr(s,e,i.callback,i.set,t,l))}}const Ha=new Map,qa=t=>{let e=Ha.get(t);return null==e&&(e=new E(t,0),Ha.set(t,e)),e};function Wa(t,e,i,s){const n=e.get(ln),r=e.get(Me),o=i.watches,a=0===t.vmKind?t.scope:Y.create(s,null,!0),h=o.length;let c,l,u,d=0;for(;h>d;++d){if(({expression:c,callback:l}=o[d]),l=Jn(l)?l:Reflect.get(s,l),!Jn(l))throw Fn(`AUR0506:${String(l)}`);Jn(c)?t.addBinding(new Ca(s,n,c,l,!0)):(u=Qn(c)?r.parse(c,16):qa(c),t.addBinding(new ka(a,e,n,u,l)))}}function _a(t){return(0,n.Kn)(t)&&Zh(t.constructor)}class za{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}za.none=new za({});const Ka={mode:"open"};var Ga,Ja;function Qa(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Ga||(Ga={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Ja||(Ja={}));const Za=lr("IController"),Ya=lr("IHydrationContext");class Xa{constructor(t,e,i){this.instruction=e,this.parent=i,this.controller=t}}function th(t){t.dispose()}function eh(t){t.instance.created(this.Ot,this)}function ih(t){t.instance.hydrating(this.Ot,this)}function sh(t){t.instance.hydrated(this.Ot,this)}function nh(t){return t.instance.binding(this.Ot,this.$initiator,this.parent,this.$flags)}function rh(t){return t.instance.bound(this.Ot,this.$initiator,this.parent,this.$flags)}function oh(t){return t.instance.attaching(this.Ot,this.$initiator,this.parent,this.$flags)}function ah(t){return t.instance.attached(this.Ot,this.$initiator,this.$flags)}function hh(t){return t.instance.detaching(this.Ot,this.$initiator,this.parent,this.$flags)}function ch(t){return t.instance.unbinding(this.Ot,this.$initiator,this.parent,this.$flags)}let lh,uh,dh;const ph=lr("IAppRoot");class fh{constructor(t,e,i,n){this.config=t,this.platform=e,this.container=i,this.controller=void 0,this.ie=void 0,this.host=t.host,n.prepare(this),gr(i,e.HTMLElement,gr(i,e.Element,gr(i,xh,new s.g("ElementResolver",t.host)))),this.ie=(0,s.p9)(this.se("creating"),(()=>{const e=t.component,n=i.createChild();let r;r=Zh(e)?this.container.get(e):t.component;const o={hydrate:!1,projections:null},a=this.controller=Fa.$el(n,r,this.host,o);return a.hE(o,null),(0,s.p9)(this.se("hydrating"),(()=>(a.hS(null),(0,s.p9)(this.se("hydrated"),(()=>{a.hC(),this.ie=void 0})))))}))}activate(){return(0,s.p9)(this.ie,(()=>(0,s.p9)(this.se("activating"),(()=>(0,s.p9)(this.controller.activate(this.controller,null,1,void 0),(()=>this.se("activated")))))))}deactivate(){return(0,s.p9)(this.se("deactivating"),(()=>(0,s.p9)(this.controller.deactivate(this.controller,null,0),(()=>this.se("deactivated")))))}se(t){return(0,s.CL)(...this.container.getAll(Eo).reduce(((e,i)=>(i.slot===t&&e.push(i.run()),e)),[]))}dispose(){this.controller?.dispose()}}const gh=(t,e)=>t.document.createComment(e),mh=(t,e)=>t.document.createTextNode(e),vh=(t,e,i)=>t.insertBefore(e,i),wh=(t,e,i)=>{if(null===t)return;const s=i.length;let n=0;for(;s>n;)t.insertBefore(i[n],e),++n},yh=t=>t.previousSibling,bh=(t,e)=>t.content.appendChild(e),Sh=(t,e)=>{const i=e.length;let s=0;for(;i>s;)t.content.appendChild(e[s]),++s},Ch=t=>{const e=t.previousSibling;let i;if(8===e?.nodeType&&"au-end"===e.textContent){if(i=e,null==(i.$start=i.previousSibling))throw kh();return t.parentNode?.removeChild(t),i}throw kh()},kh=()=>Fn("AURxxxx");class Ah{}function Th(t,e){return t.$au?.[e]??null}function $h(t,e,i){var s;((s=t).$au??(s.$au=new Ah))[e]=i}const xh=lr("INode"),Ih=lr("IEventTarget",(t=>t.cachedCallback((t=>t.has(ph,!0)?t.get(ph).host:t.get(sa).document)))),Rh=lr("IRenderLocation"),Eh=new WeakMap;function Nh(t){if(Eh.has(t))return Eh.get(t);let e=0,i=t.nextSibling;for(;null!==i;){if(8===i.nodeType)switch(i.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return i}i=i.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Yh(t);if(void 0===e)return null;if(2===e.mountTarget)return Nh(e.host)}return t.parentNode}function Oh(t){if(Ph(t))return t;const e=t.ownerDocument.createComment("au-end"),i=e.$start=t.ownerDocument.createComment("au-start"),s=t.parentNode;return null!==s&&(s.replaceChild(e,t),s.insertBefore(i,e)),e}function Ph(t){return"au-end"===t.textContent}class Mh{constructor(t,e){this.platform=t,this.next=void 0,this.ne=!1,this.re=!1,this.ref=null,this.f=e;const i=e.querySelectorAll(".au");let s,n=0,r=i.length,o=this.t=Array(r);for(;r>n;)s=i[n],"AU-M"===s.nodeName?o[n]=Ch(s):o[n]=s,++n;const a=e.childNodes,h=this.childNodes=Array(r=a.length);for(n=0;r>n;)h[n]=a[n],++n;this.oe=e.firstChild,this.le=e.lastChild}get firstChild(){return this.oe}get lastChild(){return this.le}findTargets(){return this.t}insertBefore(t){if(this.re&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.ne){let i,s=this.oe;const n=this.le;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.ne=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.ne){let e,i=this.oe;const s=this.le;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==s);)i=e}else this.ne=!0,e||t.appendChild(this.f)}remove(){if(this.ne){this.ne=!1;const t=this.f,e=this.le;let i,s=this.oe;for(;null!==s&&(i=s.nextSibling,t.appendChild(s),s!==e);)s=i}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.ne){let i,s=this.oe;const n=this.le;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.ne=!0,e.insertBefore(this.f,t)}unlink(){this.re=!1,this.next=void 0,this.ref=void 0}link(t){this.re=!0,Ph(t)?this.ref=t:(this.next=t,this.he())}he(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Uh=lr("IWindow",(t=>t.callback((t=>t.get(sa).window)))),Bh=lr("ILocation",(t=>t.callback((t=>t.get(Uh).location)))),Lh=lr("IHistory",(t=>t.callback((t=>t.get(Uh).history))));function jh(t){return function(e){return Qh(t,e)}}const Fh=new WeakMap;class Vh{constructor(t,e,i,s,n,r,o,a,h,c,l,u,d,p,f,g,m,v,w,y,b){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=m,this.hasSlots=v,this.enhance=w,this.watches=y,this.processContent=b}get type(){return 1}static create(t,e=null){if(null===e){const i=t;if(Qn(i))throw Fn(`AUR0761:${t}`);const n=(0,s.E8)("name",i,Jh);return e=Jn(i.Type)?i.Type:ec((0,s.Ho)(n)),new Vh(e,n,(0,s.eG)(i.aliases),(0,s.E8)("key",i,(()=>Gh(n))),(0,s.E8)("cache",i,Hh),(0,s.E8)("capture",i,Wh),(0,s.E8)("template",i,qh),(0,s.eG)(i.instructions),(0,s.eG)(i.dependencies),(0,s.E8)("injectable",i,qh),(0,s.E8)("needsCompile",i,_h),(0,s.eG)(i.surrogates),rr.from(e,i.bindables),Jo.from(i.childrenObservers),(0,s.E8)("containerless",i,Wh),(0,s.E8)("isStrictBinding",i,Wh),(0,s.E8)("shadowOptions",i,qh),(0,s.E8)("hasSlots",i,Wh),(0,s.E8)("enhance",i,Wh),(0,s.E8)("watches",i,zh),(0,s.pU)("processContent",e,qh))}if(Qn(t))return new Vh(e,t,(0,s.eG)(Xh(e,"aliases"),e.aliases),Gh(t),(0,s.pU)("cache",e,Hh),(0,s.pU)("capture",e,Wh),(0,s.pU)("template",e,qh),(0,s.eG)(Xh(e,"instructions"),e.instructions),(0,s.eG)(Xh(e,"dependencies"),e.dependencies),(0,s.pU)("injectable",e,qh),(0,s.pU)("needsCompile",e,_h),(0,s.eG)(Xh(e,"surrogates"),e.surrogates),rr.from(e,...rr.getAll(e),Xh(e,"bindables"),e.bindables),Jo.from(...Jo.getAll(e),Xh(e,"childrenObservers"),e.childrenObservers),(0,s.pU)("containerless",e,Wh),(0,s.pU)("isStrictBinding",e,Wh),(0,s.pU)("shadowOptions",e,qh),(0,s.pU)("hasSlots",e,Wh),(0,s.pU)("enhance",e,Wh),(0,s.eG)(Bo.getAnnotation(e),e.watches),(0,s.pU)("processContent",e,qh));const i=(0,s.E8)("name",t,Jh);return new Vh(e,i,(0,s.eG)(Xh(e,"aliases"),t.aliases,e.aliases),Gh(i),(0,s.JW)("cache",t,e,Hh),(0,s.JW)("capture",t,e,Wh),(0,s.JW)("template",t,e,qh),(0,s.eG)(Xh(e,"instructions"),t.instructions,e.instructions),(0,s.eG)(Xh(e,"dependencies"),t.dependencies,e.dependencies),(0,s.JW)("injectable",t,e,qh),(0,s.JW)("needsCompile",t,e,_h),(0,s.eG)(Xh(e,"surrogates"),t.surrogates,e.surrogates),rr.from(e,...rr.getAll(e),Xh(e,"bindables"),e.bindables,t.bindables),Jo.from(...Jo.getAll(e),Xh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),(0,s.JW)("containerless",t,e,Wh),(0,s.JW)("isStrictBinding",t,e,Wh),(0,s.JW)("shadowOptions",t,e,qh),(0,s.JW)("hasSlots",t,e,Wh),(0,s.JW)("enhance",t,e,Wh),(0,s.eG)(t.watches,Bo.getAnnotation(e),e.watches),(0,s.JW)("processContent",t,e,qh))}static getOrCreate(t){if(t instanceof Vh)return t;if(Fh.has(t))return Fh.get(t);const e=Vh.create(t);return Fh.set(t,e),In(Kh,e,e.Type),e}register(t){const{Type:e,key:i,aliases:s}=this;t.has(i,!1)||(fr(i,e).register(t),dr(i,e).register(t),mr(s,ic,i,t))}}const Dh={name:void 0,searchParents:!1,optional:!1},Hh=()=>0,qh=()=>null,Wh=()=>!1,_h=()=>!0,zh=()=>s.ow,Kh=On("custom-element"),Gh=t=>`${Kh}:${t}`,Jh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Qh=(t,e)=>{const i=Vh.create(t,e);return In(Kh,i,i.Type),In(Kh,i,i),Pn(i.Type,Kh),i.Type},Zh=t=>Jn(t)&&xn(Kh,t),Yh=(t,e=Dh)=>{if(void 0===e.name&&!0!==e.searchParents){const i=Th(t,Kh);if(null===i){if(!0===e.optional)return null;throw Fn("AUR0762")}return i}if(void 0!==e.name){if(!0!==e.searchParents){const i=Th(t,Kh);if(null===i)throw Fn("AUR0763");return i.is(e.name)?i:void 0}let i=t,s=!1;for(;null!==i;){const t=Th(i,Kh);if(null!==t&&(s=!0,t.is(e.name)))return t;i=Nh(i)}if(s)return;throw Fn("AUR0764")}let i=t;for(;null!==i;){const t=Th(i,Kh);if(null!==t)return t;i=Nh(i)}throw Fn("AUR0765")},Xh=(t,e)=>$n(Nn(e),t),tc=t=>{const e=$n(Kh,t);if(void 0===e)throw Fn(`AUR0760:${t.name}`);return e},ec=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(i,s=e){const n=class{};return t.value=i,Reflect.defineProperty(n,"name",t),s!==e&&Hn(n.prototype,s),n}}(),ic=Dn({name:Kh,keyFrom:Gh,isType:Zh,for:Yh,define:Qh,getDefinition:tc,annotate:(t,e,i)=>{In(Nn(e),i,t)},getAnnotation:Xh,generateName:Jh,createInjectable:()=>{const t=function(e,i,n){return s.DI.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,i)=>i.has(t,!0)?i.get(t):null}},t},generateType:ec});Nn("processContent"),lr("IProjections");const sc=lr("IAuSlotsInfo");class nc{constructor(t){this.projectedSlots=t}}var rc;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.multiAttr="rl",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(rc||(rc={}));const oc=lr("Instruction");class ac{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class hc{constructor(t,e,i){this.from=t,this.to=e,this.mode=i,this.type="rg"}}class cc{constructor(t,e,i){this.forOf=t,this.to=e,this.props=i,this.type="rk"}}class lc{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class uc{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class dc{constructor(t,e,i){this.value=t,this.to=e,this.command=i,this.type="rl"}}class pc{constructor(t,e,i,s,n,r){this.res=t,this.alias=e,this.props=i,this.projections=s,this.containerless=n,this.captures=r,this.type="ra",this.auSlot=null}}class fc{constructor(t,e,i){this.res=t,this.alias=e,this.props=i,this.type="rb"}}class gc{constructor(t,e,i,s){this.def=t,this.res=e,this.alias=i,this.props=s,this.type="rc"}}class mc{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class vc{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class wc{constructor(t,e){this.from=t,this.strict=e,this.type="ha"}}class yc{constructor(t,e,i,s){this.from=t,this.to=e,this.preventDefault=i,this.capture=s,this.type="hb"}}class bc{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class Sc{constructor(t){this.value=t,this.type="hf"}}class Cc{constructor(t){this.value=t,this.type="hg"}}class kc{constructor(t,e,i){this.attr=t,this.from=e,this.to=i,this.type="hc"}}class Ac{constructor(){this.type="hs"}}class Tc{constructor(t){this.instructions=t,this.type="hp"}}const $c=lr("ITemplateCompiler"),xc=lr("IRenderer");function Ic(t){return function(e){return e.register=function(t){ur(xc,this).register(t)},Zn(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Rc(t,e,i){return Qn(e)?t.parse(e,i):e}function Ec(t){return null!=t.viewModel?t.viewModel:t}let Nc=class{render(t,e,i){const s=Ec(e);void 0!==s.$observers?.[i.to]?s.$observers[i.to].setValue(i.value):s[i.to]=i.value}};Nc=An([Ic("re")],Nc);let Oc=class{constructor(t){this.r=t}static get inject(){return[Pa]}render(t,e,i,n,r,o){let a,h,c,l;const u=i.res,d=i.projections,p=t.container;if("string"==typeof u){if(a=p.find(ic,u),null==a)throw Fn(`AUR0752:${u}@${t.name}`)}else a=u;const f=i.containerless||a.containerless?Oh(e):null,g=function(t,e,i,n,r,o){const a=e.container.createChild();return gr(a,t.HTMLElement,gr(a,t.Element,gr(a,xh,new s.g("ElementResolver",i)))),gr(a,Za,new s.g(Qc,e)),gr(a,oc,new s.g(Zc,n)),gr(a,Rh,null==r?il:new el(r)),gr(a,Na,sl),gr(a,sc,null==o?nl:new s.g(Yc,o)),a}(n,t,e,i,f,null==d?void 0:new nc(Wn(d)));h=a.Type,c=g.invoke(h),gr(g,h,new s.g(a.key,c)),l=Fa.$el(g,c,e,i,a,f),$h(e,a.key,l);const m=this.r.renderers,v=i.props,w=v.length;let y,b=0;for(;w>b;)y=v[b],m[y.type].render(t,l,y,n,r,o),++b;t.addChild(l)}};Oc=An([Ic("ra")],Oc);let Pc=class{constructor(t){this.r=t}static get inject(){return[Pa]}render(t,e,i,s,n,r){let o,a=t.container;if("string"==typeof i.res){if(o=a.find(zo,i.res),null==o)throw Fn(`AUR0753:${i.res}@${t.name}`)}else o=i.res;const h=tl(s,o,t,e,i,void 0,void 0),c=Fa.$attr(h.ctn,h.vm,e,o);$h(e,o.key,c);const l=this.r.renderers,u=i.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,s,n,r),++f;t.addChild(c)}};Pc=An([Ic("rb")],Pc);let Mc=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Pa,sa]}render(t,e,i,s,n,r){let o,a=t.container;if("string"==typeof i.res){if(o=a.find(zo,i.res),null==o)throw Fn(`AUR0754:${i.res}@${t.name}`)}else o=i.res;const h=this.r.getViewFactory(i.def,a),c=Oh(e),l=tl(this.p,o,t,e,i,h,c),u=Fa.$attr(l.ctn,l.vm,e,o);$h(c,o.key,u),l.vm.link?.(t,u,e,i);const d=this.r.renderers,p=i.props,f=p.length;let g,m=0;for(;f>m;)g=p[m],d[g.type].render(t,u,g,s,n,r),++m;t.addChild(u)}};Mc=An([Ic("rc")],Mc);let Uc=class{render(t,e,i,s,n,r){e.remove();const o=i.instructions,a=i.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=Rc(n,l.from,16),t.addBinding(new ko(h,r,u,l.to,a)),++d}};Uc=An([Ic("rd")],Uc);let Bc=class{render(t,e,i,s,n){t.addBinding(new xo(t.container,Rc(n,i.from,16),function(t,e){if("element"===e)return t;switch(e){case"controller":return Yh(t);case"view":throw Fn("AUR0750");case"view-model":return Yh(t).viewModel;default:{const i=qo(t,e);if(void 0!==i)return i.viewModel;const s=Yh(t,{name:e});if(void 0===s)throw Fn(`AUR0751:${e}`);return s.viewModel}}}(e,i.to)))}};Bc=An([Ic("rj")],Bc);let Lc=class{render(t,e,i,s,n,r){t.addBinding(new bo(t,t.container,r,s.domWriteQueue,Rc(n,i.from,1),Ec(e),i.to,2))}};Lc=An([Ic("rf")],Lc);let jc=class{render(t,e,i,s,n,r){t.addBinding(new Ao(t,t.container,r,s.domWriteQueue,Rc(n,i.from,16),Ec(e),i.to,i.mode))}};jc=An([Ic("rg")],jc);let Fc=class{render(t,e,i,s,n,r){t.addBinding(new Ao(t,t.container,r,s.domWriteQueue,Rc(n,i.forOf,2),Ec(e),i.to,2))}};Fc=An([Ic("rk")],Fc);let Vc=class{render(t,e,i,s,n,r){t.addBinding(new Co(t,t.container,r,s.domWriteQueue,s,Rc(n,i.from,16),vh(e.parentNode,mh(s,""),e),i.strict))}};Vc=An([Ic("ha")],Vc);let Dc=class{render(t,e,i,s,n){t.addBinding(new Ro(t.container,Rc(n,i.from,8),e,i.to,new Io(i.preventDefault,i.capture)))}};Dc=An([Ic("hb")],Dc);let Hc=class{render(t,e,i){e.setAttribute(i.to,i.value)}};Hc=An([Ic("he")],Hc);let qc=class{render(t,e,i){!function(t,e){const i=e.length;let s=0;for(let n=0;n<i;++n)32===e.charCodeAt(n)?(n!==s&&t.add(e.slice(s,n)),s=n+1):n+1===i&&t.add(e.slice(s))}(e.classList,i.value)}};qc=An([Ic("hf")],qc);let Wc=class{render(t,e,i){e.style.cssText+=i.value}};Wc=An([Ic("hg")],Wc);let _c=class{render(t,e,i,s,n,r){t.addBinding(new Ao(t,t.container,r,s.domWriteQueue,Rc(n,i.from,16),e.style,i.to,2))}};_c=An([Ic("hd")],_c);let zc=class{render(t,e,i,s,n,r){t.addBinding(new wo(t,t.container,r,s.domWriteQueue,Rc(n,i.from,16),e,i.attr,i.to,2))}};zc=An([Ic("hc")],zc);let Kc=class{constructor(t,e){this.ae=t,this.r=e}static get inject(){return[$c,Pa]}render(t,e,i,n,r,o){const a=t.container.get(Ya),h=this.r.renderers,c=t=>{let e=t,i=a;for(;null!=i&&e>0;)i=i.parent,--e;if(null==i)throw Fn("No scope context for spread binding.");return i},l=i=>{const a=c(i),u=Jc(a),d=this.ae.compileSpread(a.controller.definition,a.instruction?.captures??s.ow,a.controller.container,e);let p;for(p of d)switch(p.type){case"hs":l(i+1);break;case"hp":h[p.instructions.type].render(u,Yh(e),p.instructions,n,r,o);break;default:h[p.type].render(u,e,p,n,r,o)}t.addBinding(u)};l(0)}};Kc=An([Ic("hs")],Kc);class Gc{constructor(t,e){this.ce=t,this.ue=e,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}get state(){return this.ctrl.state}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.ue.controller.scope.parent??void 0;if(null==e)throw Fn("Invalid spreading. Context scope is null/undefined");this.ce.forEach((t=>t.bind(e)))}unbind(){this.ce.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.ce.push(t)}addChild(t){if(1!==t.vmKind)throw Fn("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}limit(){throw Fn("not implemented")}useScope(){throw Fn("not implemented")}}const Jc=t=>new Gc([],t),Qc="IController",Zc="IInstruction",Yc="IAuSlotsInfo";class Xc{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw Fn("AUR7055");if(!Qn(t.name)||0===t.name.length)throw Fn("AUR0756");return t}}function tl(t,e,i,n,r,o,a,h){const c=i.container.createChild();return gr(c,t.HTMLElement,gr(c,t.Element,gr(c,xh,new s.g("ElementResolver",n)))),i=i instanceof Fa?i:i.ctrl,gr(c,Za,new s.g(Qc,i)),gr(c,oc,new s.g(Zc,r)),gr(c,Rh,null==a?il:new s.g("IRenderLocation",a)),gr(c,Na,null==o?sl:new Xc(o)),gr(c,sc,null==h?nl:new s.g(Yc,h)),{vm:c.invoke(e.Type),ctn:c}}class el{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const il=new el(null),sl=new Xc(null),nl=new s.g(Yc,new nc(s.ow));var rl;function ol(t){return function(e){return ul.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(rl||(rl={}));class al{constructor(t,e,i,s,n){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.type=n}static create(t,e){let i,n;return Qn(t)?(i=t,n={name:i}):(i=t.name,n=t),new al(e,(0,s.BR)(ll(e,"name"),i),(0,s.eG)(ll(e,"aliases"),n.aliases,e.aliases),cl(i),(0,s.BR)(ll(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:i,aliases:s}=this;ur(i,e).register(t),dr(i,e).register(t),mr(s,ul,i,t)}}const hl=On("binding-command"),cl=t=>`${hl}:${t}`,ll=(t,e)=>$n(Nn(e),t),ul=Dn({name:hl,keyFrom:cl,define(t,e){const i=al.create(t,e);return In(hl,i,i.Type),In(hl,i,i),Pn(e,hl),i.Type},getAnnotation:ll});let dl=class{get type(){return 0}build(t,e,i){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=i.map(t.node,n)??(0,s.eV)(n):(""===r&&1===t.def.type&&(r=(0,s.eV)(n)),n=t.bindable.property),new hc(e.parse(r,16),n,1)}};dl=An([ol("one-time")],dl);let pl=class{get type(){return 0}build(t,e,i){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=i.map(t.node,n)??(0,s.eV)(n):(""===r&&1===t.def.type&&(r=(0,s.eV)(n)),n=t.bindable.property),new hc(e.parse(r,16),n,2)}};pl=An([ol("to-view")],pl);let fl=class{get type(){return 0}build(t,e,i){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=i.map(t.node,r)??(0,s.eV)(r):(""===o&&1===t.def.type&&(o=(0,s.eV)(r)),r=t.bindable.property),new hc(e.parse(o,16),r,4)}};fl=An([ol("from-view")],fl);let gl=class{get type(){return 0}build(t,e,i){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=i.map(t.node,r)??(0,s.eV)(r):(""===o&&1===t.def.type&&(o=(0,s.eV)(r)),r=t.bindable.property),new hc(e.parse(o,16),r,6)}};gl=An([ol("two-way")],gl);let ml=class{get type(){return 0}build(t,e,i){const n=t.attr,r=t.bindable;let o,a,h=n.target,c=n.rawValue;return null==r?(a=i.isTwoWay(t.node,h)?6:2,h=i.map(t.node,h)??(0,s.eV)(h)):(""===c&&1===t.def.type&&(c=(0,s.eV)(h)),o=t.def.defaultBindingMode,a=8===r.mode||null==r.mode?null==o||8===o?2:o:r.mode,h=r.property),new hc(e.parse(c,16),h,a)}};ml=An([ol("bind")],ml);let vl=class{constructor(t){this.fe=t}get type(){return 0}static get inject(){return[Er]}build(t,e){const i=null===t.bindable?(0,s.eV)(t.attr.target):t.bindable.property,n=e.parse(t.attr.rawValue,2);let r=s.ow;if(n.semiIdx>-1){const e=t.attr.rawValue.slice(n.semiIdx+1),i=e.indexOf(":");if(i>-1){const t=e.slice(0,i).trim(),s=e.slice(i+1).trim(),n=this.fe.parse(t,s);r=[new dc(s,n.target,n.command)]}}return new cc(n,i,r)}};vl=An([ol("for")],vl);let wl=class{get type(){return 1}build(t,e){return new yc(e.parse(t.attr.rawValue,8),t.attr.target,!0,!1)}};wl=An([ol("trigger")],wl);let yl=class{get type(){return 1}build(t,e){return new yc(e.parse(t.attr.rawValue,8),t.attr.target,!1,!0)}};yl=An([ol("capture")],yl);let bl=class{get type(){return 1}build(t,e){return new kc(t.attr.target,e.parse(t.attr.rawValue,16),t.attr.target)}};bl=An([ol("attr")],bl);let Sl=class{get type(){return 1}build(t,e){return new kc("style",e.parse(t.attr.rawValue,16),t.attr.target)}};Sl=An([ol("style")],Sl);let Cl=class{get type(){return 1}build(t,e){return new kc("class",e.parse(t.attr.rawValue,16),t.attr.target)}};Cl=An([ol("class")],Cl);let kl=class{get type(){return 1}build(t,e){return new lc(e.parse(t.attr.rawValue,16),t.attr.target)}};kl=An([ol("ref")],kl);let Al=class{get type(){return 1}build(t){return new Ac}};Al=An([ol("...$attrs")],Al);const Tl=lr("ISVGAnalyzer",(t=>t.singleton($l)));class $l{isStandardSvgAttribute(t,e){return!1}}const xl=lr("IAttrMapper",(t=>t.singleton(Il)));class Il{constructor(t){this.svg=t,this.fns=[],this.pe=jn(),this.ve=jn(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Tl]}useMapping(t){var e;let i,s,n,r;for(n in t)for(r in i=t[n],s=(e=this.pe)[n]??(e[n]=jn()),i){if(void 0!==s[r])throw Rl(r,n);s[r]=i[r]}}useGlobalMapping(t){const e=this.ve;for(const i in t){if(void 0!==e[i])throw Rl(i,"*");e[i]=t[i]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((i=>i(t,e)))}map(t,e){return this.pe[t.nodeName]?.[e]??this.ve[e]??(zn(t,e,this.svg)?e:null)}}function Rl(t,e){return Fn(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}const El=lr("ITemplateElementFactory",(t=>t.singleton(Ol))),Nl={};class Ol{constructor(t){this.p=t,this.xe=Pl(this.p)}createTemplate(t){if(Qn(t)){let e=Nl[t];if(void 0===e){const i=this.xe;i.innerHTML=t;const s=i.content.firstElementChild;null==s||"TEMPLATE"!==s.nodeName||null!=s.nextElementSibling?(this.xe=Pl(this.p),e=i):(i.content.removeChild(s),e=s),Nl[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=Pl(this.p);return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}Ol.inject=[sa];const Pl=t=>t.document.createElement("template");let Ml;const Ul="AU-M",Bl="TEMPLATE",Ll="au-start",jl="au-end",Fl=t=>t.nodeName===Ul&&Vl(Ml=yh(t))&&Ml.textContent===jl&&Vl(Ml=yh(Ml))&&Ml.textContent===Ll,Vl=t=>8===t?.nodeType;class Dl{constructor(t,e,i,n,r,o){this.hasSlot=!1,this.Fe=jn();const a=null!==n;this.c=e,this.root=null===r?this:r,this.def=t,this.ci=i,this.parent=n,this.we=a?n.we:e.get(El),this.fe=a?n.fe:e.get(Er),this.ep=a?n.ep:e.get(Me),this.m=a?n.m:e.get(xl),this.Oe=a?n.Oe:e.get(s.Xo),this.p=a?n.p:e.get(sa),this.localEls=a?n.localEls:new Set,this.rows=o??[]}qe(t){var e;((e=this.root).deps??(e.deps=[])).push(t),this.root.c.register(t)}_e(t){return mh(this.p,t)}$e(t){return gh(this.p,t)}h(t){const e=((t,e)=>t.document.createElement(e))(this.p,t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}Ae(t){return this.c.find(ic,t)}Be(t){return this.c.find(zo,t)}De(t){return new Dl(this.def,this.c,this.ci,this,this.root,t)}Ce(t){if(this.root!==this)return this.root.Ce(t);const e=t.command;if(null===e)return null;let i=this.Fe[e];if(void 0===i){if(i=this.c.create(ul,e),null===i)throw Fn(`AUR0713:${e}`);this.Fe[e]=i}return i}}const Hl=t=>{const e=t.length;let i=0,s=0;for(;e>s;){if(i=t.charCodeAt(s),92===i)++s;else{if(58===i)return!0;if(36===i&&123===t.charCodeAt(s+1))return!1}++s}return!1},ql=()=>{zl.node=zl.attr=zl.bindable=zl.def=null},Wl={projections:null},_l={name:"unnamed"},zl={node:null,attr:null,bindable:null,def:null},Kl=Hn(jn(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),Gl={checkbox:1,radio:1},Jl=new WeakMap;class Ql{constructor(t,e,i){this.attrs=t,this.bindables=e,this.primary=i}static from(t,e){let i=Jl.get(t);if(null==i){const s=t.bindables,n=jn(),r=e?void 0===t.defaultBindingMode?8:t.defaultBindingMode:8;let o,a,h,c,l=!1;for(a in s){if(o=s[a],c=o.attribute,!0===o.primary){if(l)throw Fn(`AUR0714:${t.name}`);l=!0,h=o}else l||null!=h||(h=o);n[c]=or.create(a,t.Type,o)}null==o&&e&&(h=n.value=or.create("value",t.Type,{mode:r})),Jl.set(t,i=new Ql(n,s,h))}return i}}const Zl=Dn(["property","attribute","mode"]),Yl="as-custom-element",Xl=(t,e)=>{const i=t.getAttribute(Yl);if(null===i||""===i)throw Fn("AUR0715");if(e.has(i))throw Fn(`AUR0716:${i}`);return e.add(i),t.removeAttribute(Yl),i},tu=t=>{switch(t.getAttribute("mode")){case"oneTime":return 1;case"toView":return 2;case"fromView":return 4;case"twoWay":return 6;default:return 8}},eu=lr("ITemplateCompilerHooks"),iu=new WeakMap,su=On("compiler-hooks");Dn({name:su,define(t){let e=iu.get(t);return void 0===e&&(iu.set(t,e=new nu(t)),In(su,e,t),Pn(t,su)),t}});class nu{constructor(t){this.Type=t}get name(){return""}register(t){t.register(ur(eu,this.Type))}}const ru="default",ou="au-slot",au=new Map;class hu{bind(t,e){au.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=au.get(e),au.delete(e)}}class cu extends hu{get mode(){return 1}}class lu extends hu{get mode(){return 2}}class uu extends hu{get mode(){return 4}}class du extends hu{get mode(){return 6}}Jr("oneTime")(cu),Jr("toView")(lu),Jr("fromView")(uu),Jr("twoWay")(du);const pu=new WeakMap;class fu{constructor(t){this.p=t}bind(t,e,i){const s={type:"debounce",delay:(i=Number(i))>0?i:200,now:this.p.performanceNow,queue:this.p.taskQueue},n=e.limit?.(s);null==n||pu.set(e,n)}unbind(t,e){pu.get(e)?.dispose(),pu.delete(e)}}fu.inject=[s.TI],Jr("debounce")(fu);class gu{constructor(t){this.Ve=new Map,this.Ne=t}bind(t,e,...i){if(!("handleChange"in e))throw Fn("AUR0817");if(0===i.length)throw Fn("AUR0818");let s;for(s of(this.Ve.set(e,i),i))this.Ne.addSignalListener(s,e)}unbind(t,e){const i=this.Ve.get(e);let s;for(s of(this.Ve.delete(e),i))this.Ne.removeSignalListener(s,e)}}gu.inject=[bn],Jr("signal")(gu);const mu=new WeakMap;class vu{constructor(t){this.je=t.performanceNow,this.ct=t.taskQueue}bind(t,e,i){const s={type:"throttle",delay:(i=Number(i))>0?i:200,now:this.je,queue:this.ct},n=e.limit?.(s);null==n||mu.set(e,n)}unbind(t,e){mu.get(e)?.dispose(),mu.delete(e)}}vu.inject=[s.TI],Jr("throttle")(vu);class wu{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,i){null==t?e.removeAttribute(i):e.setAttribute(i,t)}}ha(wu);const yu=new wu;class bu{bind(t,e){if(!(e instanceof Ao))throw Fn("AURxxxx");e.useTargetObserver(yu)}}Jr("attr")(bu);class Su{bind(t,e){if(!(e instanceof Ro))throw Fn("AUR0801");e.self=!0}unbind(t,e){e.self=!1}}Jr("self")(Su);const Cu=jn();class ku{constructor(t){this.ns=t,this.type=6}static forNs(t){return Cu[t]??(Cu[t]=new ku(t))}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,i){null==t?e.removeAttributeNS(this.ns,i):e.setAttributeNS(this.ns,i,t)}}function Au(t,e){return t===e}ha(ku);class Tu{constructor(t,e,i,s){this.type=7,this.v=void 0,this.ov=void 0,this.He=void 0,this.We=void 0,this.yt=!1,this.bt=t,this.oL=s,this.cf=i}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ze(),this.Ge(),this.st())}handleCollectionChange(){this.Ge()}handleChange(t,e){this.Ge()}Ge(){const t=this.v,e=this.bt,i=Vn.call(e,"model")?e.model:e.value,s="radio"===e.type,n=void 0!==e.matcher?e.matcher:Au;if(s)e.checked=!!n(t,i);else if(!0===t)e.checked=!0;else{let s=!1;if(Gn(t))s=-1!==t.findIndex((t=>!!n(t,i)));else if(t instanceof Set){for(const e of t)if(n(e,i)){s=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,i)&&!0===r){s=!0;break}}e.checked=s}}handleEvent(){let t=this.ov=this.v;const e=this.bt,i=Vn.call(e,"model")?e.model:e.value,s=e.checked,n=void 0!==e.matcher?e.matcher:Au;if("checkbox"===e.type){if(Gn(t)){const e=t.findIndex((t=>!!n(t,i)));return void(s&&-1===e?t.push(i):s||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,i)){r=e;break}return void(s&&r===e?t.add(i):s||r===e||t.delete(r))}if(t instanceof Map){let e;for(const s of t){const t=s[0];if(!0===n(t,i)){e=t;break}}return void t.set(e,s)}t=s}else{if(!s)return;t=i}this.v=t,this.st()}kt(){this.ze()}At(){this.He?.unsubscribe(this),this.We?.unsubscribe(this),this.He=this.We=void 0}st(){$u=this.ov,this.ov=this.v,this.subs.notify(this.v,$u)}ze(){const t=this.bt;(this.We??(this.We=t.$observers?.model??t.$observers?.value))?.subscribe(this),this.He?.unsubscribe(this),this.He=void 0,"checkbox"===t.type&&(this.He=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let $u;oa(Tu),wt(Tu);const xu={childList:!0,subtree:!0,characterData:!0};function Iu(t,e){return t===e}class Ru{constructor(t,e,i,s){this.type=7,this.v=void 0,this.ov=void 0,this.J=!1,this.Xe=void 0,this.Ke=void 0,this.iO=!1,this.yt=!1,this.bt=t,this.oL=s,this.cf=i}getValue(){return this.iO?this.v:this.bt.multiple?function(t){const e=[];if(0===t.length)return e;const i=t.length;let s,n=0;for(;i>n;)s=t[n],s.selected&&(e[e.length]=Vn.call(s,"model")?s.model:s.value),++n;return e}(this.bt.options):this.bt.value}setValue(t){this.ov=this.v,this.v=t,this.J=t!==this.ov,this.Qe(t instanceof Array?t:null),this.it()}it(){this.J&&(this.J=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.bt,i=Gn(t),s=e.matcher??Iu,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Vn.call(e,"model")?e.model:e.value;e.selected=i?-1!==t.findIndex((t=>!!s(o,t))):!!s(o,t)}}syncValue(){const t=this.bt,e=t.options,i=e.length,s=this.v;let n=0;if(t.multiple){if(!(s instanceof Array))return!0;let r;const o=t.matcher||Iu,a=[];for(;n<i;)r=e[n],r.selected&&a.push(Vn.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<s.length;)h=s[n],-1===a.findIndex((t=>!!o(h,t)))?s.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===s.findIndex((t=>!!o(h,t)))&&s.push(h),++n;return!1}let r,o=null;for(;n<i;){if(r=e[n],r.selected){o=Vn.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}kt(){(this.Ke=new this.bt.ownerDocument.defaultView.MutationObserver(this.Ye.bind(this))).observe(this.bt,xu),this.Qe(this.v instanceof Array?this.v:null),this.iO=!0}At(){this.Ke.disconnect(),this.Xe?.unsubscribe(this),this.Ke=this.Xe=void 0,this.iO=!1}Qe(t){if(this.Xe?.unsubscribe(this),this.Xe=void 0,null!=t){if(!this.bt.multiple)throw Fn("AUR0654");(this.Xe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.st()}Ye(t){this.syncOptions(),this.syncValue()&&this.st()}st(){Eu=this.ov,this.ov=this.v,this.subs.notify(this.v,Eu)}}let Eu,Nu;oa(Ru),wt(Ru);class Ou{constructor(t){this.obj=t,this.type=6,this.v="",this.ov="",this.styles={},this.version=0,this.J=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.J=t!==this.ov,this.it()}Ze(t){const e=[],i=/url\([^)]+$/;let s,n,r,o,a=0,h="";for(;a<t.length;)s=t.indexOf(";",a),-1===s&&(s=t.length),h+=t.substring(a,s),a=s+1,i.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}Je(t){let e,i;const n=[];for(i in t)if(e=t[i],null!=e)if(Qn(e)){if(i.startsWith("--")){n.push([i,e]);continue}n.push([(0,s.GL)(i),e])}else n.push(...this.ti(e));return n}ei(t){const e=t.length;if(e>0){const i=[];let s=0;for(;e>s;++s)i.push(...this.ti(t[s]));return i}return s.ow}ti(t){return Qn(t)?this.Ze(t):t instanceof Array?this.ei(t):t instanceof Object?this.Je(t):s.ow}it(){if(this.J){this.J=!1;const t=this.v,e=this.styles,i=this.ti(t);let s,n,r,o,a=this.version;this.ov=t;let h=0;const c=i.length;for(;h<c;++h)n=i[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(s in a-=1,e)Vn.call(e,s)&&e[s]===a&&this.obj.style.removeProperty(s)}}setProperty(t,e){let i="";null!=e&&Jn(e.indexOf)&&e.includes("!important")&&(i="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,i)}bind(){this.v=this.ov=this.obj.style.cssText}}ha(Ou);class Pu{constructor(t,e,i){this.type=7,this.v="",this.ov="",this.J=!1,this.yt=!1,this.bt=t,this.k=e,this.cf=i}getValue(){return this.v}setValue(t){Xn(t,this.v)||(this.ov=this.v,this.v=t,this.J=!0,this.cf.readonly||this.it())}it(){this.J&&(this.J=!1,this.bt[this.k]=this.v??this.cf.default,this.st())}handleEvent(){this.ov=this.v,this.v=this.bt[this.k],this.ov!==this.v&&(this.J=!1,this.st())}kt(){this.v=this.ov=this.bt[this.k]}st(){Nu=this.ov,this.ov=this.v,this.subs.notify(this.v,Nu)}}oa(Pu),wt(Pu);const Mu="http://www.w3.org/1999/xlink",Uu="http://www.w3.org/XML/1998/namespace",Bu="http://www.w3.org/2000/xmlns/",Lu=Hn(jn(),{"xlink:actuate":["actuate",Mu],"xlink:arcrole":["arcrole",Mu],"xlink:href":["href",Mu],"xlink:role":["role",Mu],"xlink:show":["show",Mu],"xlink:title":["title",Mu],"xlink:type":["type",Mu],"xml:lang":["lang",Uu],"xml:space":["space",Uu],xmlns:["xmlns",Bu],"xmlns:xlink":["xlink",Bu]}),ju=new on;ju.type=6;class Fu{constructor(t,e,i,s){this.locator=t,this.platform=e,this.dirtyChecker=i,this.svgAnalyzer=s,this.allowDirtyCheck=!0,this.ii=jn(),this.si=jn(),this.ni=jn(),this.ri=jn();const n=["change","input"],r={events:n,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:n,default:0},checked:{type:Tu,events:n},files:{events:n,readonly:!0}},SELECT:{value:{type:Ru,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){dr(un,Fu).register(t),ur(un,Fu).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,i){const s=this.ii;let n;if(Qn(t))n=s[t]??(s[t]=jn()),null==n[e]?n[e]=i:Vu(t,e);else for(const i in t){n=s[i]??(s[i]=jn());const r=t[i];for(e in r)null==n[e]?n[e]=r[e]:Vu(i,e)}}useConfigGlobal(t,e){const i=this.si;if("object"==typeof t)for(const e in t)null==i[e]?i[e]=t[e]:Vu("*",e);else null==i[t]?i[t]=e:Vu("*",t)}getAccessor(t,e,i){if(e in this.ri||e in(this.ni[t.tagName]??s.FD))return this.getObserver(t,e,i);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":return yu;default:{const i=Lu[e];return void 0!==i?ku.forNs(i[1]):zn(t,e,this.svgAnalyzer)?yu:ju}}}overrideAccessor(t,e){var i,s;let n;if(Qn(t))n=(i=this.ni)[t]??(i[t]=jn()),n[e]=!0;else for(const e in t)for(const i of t[e])n=(s=this.ni)[e]??(s[e]=jn()),n[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.ri[e]=!0}getNodeObserverConfig(t,e){return this.ii[t.tagName]?.[e]??this.si[e]}getNodeObserver(t,e,i){const s=this.ii[t.tagName]?.[e]??this.si[e];let n;return null!=s?(n=new(s.type??Pu)(t,e,s,i,this.locator),n.doNotCache||(mn(t)[e]=n),n):null}getObserver(t,e,i){switch(e){case"class":return new ca(t);case"css":case"style":return new Ou(t)}const s=this.getNodeObserver(t,e,i);if(null!=s)return s;const n=Lu[e];if(void 0!==n)return ku.forNs(n[1]);if(zn(t,e,this.svgAnalyzer))return yu;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw Fn(`AUR0652:${String(e)}`)}return new an(t,e)}}function Vu(t,e){throw Fn(`AUR0653:${String(e)}@${t}`)}Fu.inject=[s.P2,sa,Xs,Tl];class Du{constructor(t,e){if(!(e instanceof Fu))throw Fn("AURxxxx: updateTrigger binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger");this.oL=t,this.oi=e}bind(t,e,...i){if(0===i.length)throw Fn("AUR0802");if(!(e instanceof Ao&&4&e.mode))throw Fn("AUR0803");const s=this.oi.getNodeObserverConfig(e.target,e.targetProperty);if(null==s)throw Fn("AURxxxx");const n=this.oi.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:s.readonly,default:s.default,events:i}),e.useTargetObserver(n)}}Du.inject=[ln,un],Jr("updateTrigger")(Du);class Hu{constructor(t,e){this.li=!1,this.hi=t,this.p=e}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.ai():this.li=!0}attached(){this.li&&(this.li=!1,this.ai()),this.hi.addEventListener("focus",this),this.hi.addEventListener("blur",this)}afterDetachChildren(){const t=this.hi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.ui||(this.value=!1)}ai(){const t=this.hi,e=this.ui,i=this.value;i&&!e?t.focus():!i&&e&&t.blur()}get ui(){return this.hi===this.p.document.activeElement}}Hu.inject=[xh,sa],An([ir({mode:6})],Hu.prototype,"value",void 0),Lo("focus")(Hu);let qu=class{constructor(t,e,i){this.el=t,this.p=e,this.fi=!1,this.lt=null,this.$val="",this.$prio="",this.update=()=>{this.lt=null,Boolean(this.value)!==this.di&&(this.di===this.mi?(this.di=!this.mi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.di=this.mi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.di=this.mi="hide"!==i.alias}binding(){this.fi=!0,this.update()}detaching(){this.fi=!1,this.lt?.cancel(),this.lt=null}valueChanged(){this.fi&&null===this.lt&&(this.lt=this.p.domWriteQueue.queueTask(this.update))}};An([ir],qu.prototype,"value",void 0),qu=An([Tn(0,xh),Tn(1,sa),Tn(2,oc)],qu),function(...t){return function(e){const i=Nn("aliases"),s=$n(i,e);void 0===s?In(i,t,e):s.push(...t)}}("hide")(qu),Lo("show")(qu);class Wu{constructor(t,e,i){this.position="beforeend",this.strict=!1,this.p=i,this.gi=i.document.createElement("div"),(this.view=t.create()).setLocation(this.pi=(t=>{const e=gh(t,"au-end");return e.$start=gh(t,"au-start"),e})(i)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Eh.set(t,e);else{const i=t.childNodes;for(let t=0,s=i.length;t<s;++t)Eh.set(i[t],e)}}(this.view.nodes,e)}attaching(t,e,i){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const s=this.gi=this.vi();return this.xi(s,this.position),this.wi(t,s,i)}detaching(t,e,i){return this.bi(t,this.gi,i)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.vi();if(this.gi===e)return;this.gi=e;const i=(0,s.p9)(this.bi(null,e,t.flags),(()=>(this.xi(e,this.position),this.wi(null,e,t.flags))));Kn(i)&&i.catch(Yn)}positionChanged(){const{$controller:t,gi:e}=this;if(!t.isActive)return;const i=(0,s.p9)(this.bi(null,e,t.flags),(()=>(this.xi(e,this.position),this.wi(null,e,t.flags))));Kn(i)&&i.catch(Yn)}wi(t,e,i){const{activating:n,callbackContext:r,view:o}=this;return(0,s.p9)(n?.call(r,e,o),(()=>this.yi(t,e,i)))}yi(t,e,i){const{$controller:n,view:r}=this;return null!==t?(0,s.p9)(r.activate(t??r,n,i,n.scope),(()=>this.ki(e))):(r.nodes.insertBefore(this.pi),this.ki(e))}ki(t){const{activated:e,callbackContext:i,view:s}=this;return e?.call(i,t,s)}bi(t,e,i){const{deactivating:n,callbackContext:r,view:o}=this;return(0,s.p9)(n?.call(r,e,o),(()=>this.Ai(t,e,i)))}Ai(t,e,i){const{$controller:n,view:r}=this;return null!==t?(0,s.p9)(r.deactivate(t,n,i),(()=>this.Ci(e))):(r.nodes.remove(),this.Ci(e))}Ci(t){const{deactivated:e,callbackContext:i,view:s}=this;return e?.call(i,t,s)}vi(){const t=this.p,e=t.document;let i=this.target,s=this.renderContext;if(""===i){if(this.strict)throw Fn("AUR0811");return e.body}if(Qn(i)){let n=e;Qn(s)&&(s=e.querySelector(s)),s instanceof t.Node&&(n=s),i=n.querySelector(i)}if(i instanceof t.Node)return i;if(null==i){if(this.strict)throw Fn("AUR0812");return e.body}return i}xi(t,e){const i=this.pi,s=i.$start,n=t.parentNode,r=[s,i];switch(e){case"beforeend":wh(t,null,r);break;case"afterbegin":wh(t,t.firstChild,r);break;case"beforebegin":wh(n,t,r);break;case"afterend":wh(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}Wu.inject=[Na,Rh,sa],An([ir({primary:!0})],Wu.prototype,"target",void 0),An([ir()],Wu.prototype,"position",void 0),An([ir({callback:"targetChanged"})],Wu.prototype,"renderContext",void 0),An([ir()],Wu.prototype,"strict",void 0),An([ir()],Wu.prototype,"deactivating",void 0),An([ir()],Wu.prototype,"activating",void 0),An([ir()],Wu.prototype,"deactivated",void 0),An([ir()],Wu.prototype,"activated",void 0),An([ir()],Wu.prototype,"callbackContext",void 0),jo("portal")(Wu);class _u{constructor(t,e){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.Bi=!1,this.Ri=0,this.Si=t,this.l=e}attaching(t,e,i){let n;const r=this.$controller,o=this.Ri++,a=()=>!this.Bi&&this.Ri===o+1;return(0,s.p9)(this.pending,(()=>{a()&&(this.pending=void 0,n=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.Si.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=n&&(n.setLocation(this.l),this.pending=(0,s.p9)(n.activate(t,r,i,r.scope),(()=>{a()&&(this.pending=void 0)}))))}))}detaching(t,e,i){return this.Bi=!0,(0,s.p9)(this.pending,(()=>{this.Bi=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller,i)}))}valueChanged(t,e,i){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;const n=this.view,r=this.$controller,o=this.Ri++,a=()=>!this.Bi&&this.Ri===o+1;let h;return(0,s.p9)(this.pending,(()=>this.pending=(0,s.p9)(n?.deactivate(n,r,i),(()=>{if(a()&&(h=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.Si.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=h))return h.setLocation(this.l),(0,s.p9)(h.activate(h,r,i,r.scope),(()=>{a()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}_u.inject=[Na,Rh],An([ir],_u.prototype,"value",void 0),An([ir({set:t=>""===t||!!t&&"false"!==t})],_u.prototype,"cache",void 0),jo("if")(_u);class zu{constructor(t){this.f=t}link(t,e,i,s){const n=t.children,r=n[n.length-1];if(r instanceof _u)r.elseFactory=this.f;else{if(!(r.viewModel instanceof _u))throw Fn("AUR0810");r.viewModel.elseFactory=this.f}}}function Ku(t){t.dispose()}zu.inject=[Na],jo({name:"else"})(zu);const Gu=[18,17];class Ju{constructor(t,e,i,s,n){this.views=[],this.key=null,this.Ii=new Map,this.Ti=new Map,this.Pi=void 0,this.Ei=!1,this.Li=!1,this.Di=null,this.Ui=void 0,this.$i=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:i,command:s}=r;if("key"!==t)throw Fn(`AUR776:${t}`);if(null===s)this.key=i;else{if("bind"!==s)throw Fn(`AUR775:${s}`);this.key=e.parse(i,16)}}this.l=i,this._i=s,this.f=n}binding(t,e,i){const s=this._i.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.ast,this.qi=r;let t=o.iterable;for(;null!=t&&Gu.includes(t.$kind);)t=t.expression,this.Ei=!0;this.Di=t;break}this.Mi();const h=o.declaration;(this.$i=24===h.$kind||25===h.$kind)||(this.local=st(h,this.$controller.scope,r,null))}attaching(t,e,i){return this.Fi(),this.Oi(t)}detaching(t,e,i){return this.Mi(),this.Vi(t)}unbinding(t,e,i){this.Ti.clear(),this.Ii.clear()}itemsChanged(){this.$controller.isActive&&(this.Mi(),this.Fi(),this.Ni(this.items,void 0))}handleCollectionChange(t,e){const i=this.$controller;if(i.isActive){if(this.Ei){if(this.Li)return;return this.Li=!0,this.items=st(this.forOf.iterable,i.scope,this.qi,null),void(this.Li=!1)}this.Fi(),this.Ni(t,e)}}Ni(t,e){const i=this.views,n=i.length,r=this.key,o=null!==r;if(o||void 0===e){const t=this.local,s=this.Ui,a=s.length,h=this.forOf,c=h.declaration,l=this.qi,u=this.$i;e=vt(a);let d=0;if(0===n)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(st(c,i[d].scope,l,null));else for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(i[d].scope.bindingContext[t]);else{const p=Array(n);if(u)for(d=0;d<n;++d)p[d]=st(c,i[d].scope,l,null);else for(d=0;d<n;++d)p[d]=i[d].scope.bindingContext[t];let f,g,m,v,w=0;const y=n-1,b=a-1,S=new Map,C=new Map,k=this.Ii,A=this.Ti,T=this.$controller.scope;d=0;t:{for(;;){if(f=p[d],g=s[d],m=o?hd(k,r,f,cd(A,p[d],h,T,l,t,u),l):f,v=o?hd(k,r,g,cd(A,s[d],h,T,l,t,u),l):g,m!==v){k.set(f,m),k.set(g,v);break}if(++d,d>y||d>b)break t}if(y===b)for(w=b;;){if(f=p[w],g=s[w],m=o?hd(k,r,f,cd(A,f,h,T,l,t,u),l):f,v=o?hd(k,r,g,cd(A,g,h,T,l,t,u),l):g,m!==v){k.set(f,m),k.set(g,v);break}if(--w,d>w)break t}}const $=d,x=d;for(d=x;d<=b;++d)k.has(g=s[d])?v=k.get(g):(v=o?hd(k,r,g,cd(A,g,h,T,l,t,u),l):g,k.set(g,v)),C.set(v,d);for(d=$;d<=y;++d)m=k.has(f=p[d])?k.get(f):o?hd(k,r,f,i[d].scope,l):f,S.set(m,d),C.has(m)?e[C.get(m)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=x;d<=b;++d)S.has(k.get(s[d]))||(e[d]=-2);S.clear(),C.clear()}}if(void 0===e){const t=(0,s.p9)(this.Vi(null),(()=>this.Oi(null)));Kn(t)&&t.catch(Yn)}else{const t=function(t){let e=0,i=0,s=0;const n=function(t){const e=t.slice();return e.deletedIndices=t.deletedIndices.slice(),e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t);n.deletedIndices.length>1&&n.deletedIndices.sort(Qt);const r=n.length;for(;s<r;++s){for(;n.deletedIndices[i]<=s-e;)++i,--e;-2===n[s]?++e:n[s]+=e}return n}(e);if(t.deletedIndices.length>0){const e=(0,s.p9)(this.ji(t),(()=>this.Hi(n,t)));Kn(e)&&e.catch(Yn)}else this.Hi(n,t)}}Mi(){const t=this.$controller.scope;let e,i=this.Wi,s=this.Ei;s&&(i=this.Wi=st(this.Di,t,this.qi,null)??null,s=this.Ei=!Xn(this.items,i));const n=this.Pi;this.$controller.isActive?(e=this.Pi=(t=>{let e;return u(t)?e=Jt(t):p(t)?e=Ce(t):d(t)&&(e=ce(t)),e})(s?i:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.Pi=void 0)}Fi(){const{items:t}=this;if(Gn(t))return void(this.Ui=t);const e=[];sd(t,((t,i)=>{e[i]=t})),this.Ui=e}Oi(t){let e,i,s,n;const{$controller:r,f:o,local:a,l:h,items:c,Ti:l,qi:u,forOf:d,$i:p}=this,f=r.scope,g=id(c),m=this.views=Array(g);if(sd(c,((c,v)=>{s=m[v]=o.create().setLocation(h),s.nodes.unlink(),n=cd(l,c,d,f,u,a,p),td(n.overrideContext,v,g),i=s.activate(t??s,r,0,n),Kn(i)&&(e??(e=[])).push(i)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Vi(t){let e,i,s,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)s=r[n],s.release(),i=s.deactivate(t??s,o,0),Kn(i)&&(e??(e=[])).push(i);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}ji(t){let e,i,s;const{$controller:n,views:r}=this,o=t.deletedIndices,a=o.length;let h=0;for(;a>h;++h)s=r[o[h]],s.release(),i=s.deactivate(s,n,0),Kn(i)&&(e??(e=[])).push(i);h=0;let c=0;for(;a>h;++h)c=o[h]-h,r.splice(c,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Hi(t,e){let i,s,n,r,o=0;const{$controller:a,f:h,local:c,Ui:l,l:u,views:d,$i:p,qi:f,Ti:g,forOf:m}=this,v=e.length;for(;v>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==v)throw Xu(d.length,v);const w=a.scope,y=e.length;!function(t,e){const i=t.slice(),s=e.length;let n=0,r=0;for(;n<s;)r=e[n],-2!==r&&(t[n]=i[r]),++n}(d,e);const b=function(t){const e=t.length;e>Qu&&(Qu=e,Zu=new Int32Array(e),Yu=new Int32Array(e));let i=0,s=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(s=t[r],-2!==s){if(o=Zu[i],n=t[o],-2!==n&&n<s){Yu[r]=o,Zu[++i]=r;continue}for(a=0,h=i;a<h;)c=a+h>>1,n=t[Zu[c]],-2!==n&&n<s?a=c+1:h=c;n=t[Zu[a]],(s<n||-2===n)&&(a>0&&(Yu[r]=Zu[a-1]),Zu[a]=r)}r=++i;const l=new Int32Array(r);for(s=Zu[i-1];i-- >0;)l[i]=s,s=Yu[s];for(;r-- >0;)Zu[r]=0;return l}(e),S=b.length,C=m.declaration;let k,A=S-1;for(o=y-1;o>=0;--o)n=d[o],k=d[o+1],n.nodes.link(k?.nodes??u),-2===e[o]?(r=cd(g,l[o],m,w,f,c,p),td(r.overrideContext,o,y),n.setLocation(u),s=n.activate(n,a,0,r),Kn(s)&&(i??(i=[])).push(s)):A<0||1===S||o!==b[A]?(p?nt(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],td(n.scope.overrideContext,o,y),n.nodes.insertBefore(n.location)):(p?nt(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==y&&td(n.scope.overrideContext,o,y),--A);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}dispose(){this.views.forEach(Ku),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let i=0,s=e.length;i<s;++i)if(!0===e[i].accept(t))return!0}}Ju.inject=[oc,Me,Rh,Za,Na],An([ir],Ju.prototype,"items",void 0),jo("repeat")(Ju);let Qu=16,Zu=new Int32Array(Qu),Yu=new Int32Array(Qu);const Xu=(t,e)=>Fn(`AUR0814:${t}!=${e}`),td=(t,e,i)=>{const s=0===e,n=e===i-1,r=e%2==0;t.$index=e,t.$first=s,t.$last=n,t.$middle=!s&&!n,t.$even=r,t.$odd=!r,t.$length=i},ed=Ln.toString,id=t=>{switch(ed.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw Fn(`Cannot count ${ed.call(t)}`)}},sd=(t,e)=>{switch(ed.call(t)){case"[object Array]":return nd(t,e);case"[object Map]":return rd(t,e);case"[object Set]":return od(t,e);case"[object Number]":return ad(t,e);case"[object Null]":case"[object Undefined]":return;default:throw Fn(`Cannot iterate over ${ed.call(t)}`)}},nd=(t,e)=>{const i=t.length;let s=0;for(;s<i;++s)e(t[s],s,t)},rd=(t,e)=>{let i,s=-0;for(i of t.entries())e(i,s++,t)},od=(t,e)=>{let i,s=0;for(i of t.keys())e(i,s++,t)},ad=(t,e)=>{let i=0;for(;i<t;++i)e(i,i,t)},hd=(t,e,i,s,n)=>{let r=t.get(i);return void 0===r&&(r="string"==typeof e?i[e]:st(e,s,n,null),t.set(i,r)),r},cd=(t,e,i,s,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?nt(i.declaration,a=Y.fromParent(s,new Z),n,e):a=Y.fromParent(s,new Z(r,e)),t.set(e,a)),a};class ld{constructor(t,e){this.view=t.create().setLocation(e)}valueChanged(t,e,i){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&null!=n)for(r=Y.fromParent(s.scope,void 0===t?{}:t),a=n.length;a>o;++o)n[o].bind(r)}attaching(t,e,i){const{$controller:s,value:n}=this,r=Y.fromParent(s.scope,void 0===n?{}:n);return this.view.activate(t,s,i,r)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}ld.inject=[Na,Rh],An([ir],ld.prototype,"value",void 0),jo("with")(ld);let ud=class{constructor(t,e){this.f=t,this.l=e,this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,i,s){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const s=this.view,n=this.$controller;return this.queue((()=>s.activate(t,n,i,n.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e,i){return this.queue((()=>this.view.deactivate(t,this.$controller,i))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.zi(t)))}zi(t){const e=t.isMatch(this.value),i=this.activeCases,n=i.length;if(!e)return n>0&&i[0].id===t.id?this.Gi(null):void 0;if(n>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,i=e.indexOf(t);for(let t=i,s=e.length;t<s&&o;t++){const i=e[t];r.push(i),o=i.fallThrough}}else r.push(t);return(0,s.p9)(this.Gi(null,r),(()=>(this.activeCases=r,this.Xi(null))))}swap(t,e){const i=[];let n=!1;for(const t of this.cases)if((n||t.isMatch(e))&&(i.push(t),n=t.fallThrough),i.length>0&&!n)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),(0,s.p9)(this.activeCases.length>0?this.Gi(t,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Xi(t)}))}Xi(t){const e=this.$controller;if(!e.isActive)return;const i=this.activeCases,n=i.length;if(0===n)return;const r=e.scope;return 1===n?i[0].activate(t,0,r):(0,s.CL)(...i.map((e=>e.activate(t,0,r))))}Gi(t,e=[]){const i=this.activeCases,n=i.length;if(0!==n){if(1===n){const s=i[0];return e.includes(s)?void 0:(i.length=0,s.deactivate(t,0))}return(0,s.p9)((0,s.CL)(...i.reduce(((i,s)=>(e.includes(s)||i.push(s.deactivate(t,0)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let i;i=this.promise=(0,s.p9)((0,s.p9)(e,t),(()=>{this.promise===i&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};An([ir],ud.prototype,"value",void 0),ud=An([jo("switch"),Tn(0,Na),Tn(1,Rh)],ud);let dd=0,pd=class{constructor(t,e,i,s){this.f=t,this.Ki=e,this.l=i,this.id=++dd,this.fallThrough=!1,this.view=void 0,this.Qi=s.config.level<=1,this.Oe=s.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,i,s){const n=t.parent?.viewModel;if(!(n instanceof ud))throw Fn("AUR0815");this.$switch=n,this.linkToSwitch(n)}detaching(t,e,i){return this.deactivate(t,i)}isMatch(t){this.Oe.debug("isMatch()");const e=this.value;return Gn(e)?(void 0===this.Pi&&(this.Pi=this.Yi(e)),e.includes(t)):e===t}valueChanged(t,e){Gn(t)?(this.Pi?.unsubscribe(this),this.Pi=this.Yi(t)):void 0!==this.Pi&&this.Pi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e,i){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(t??i,this.$controller,e)}dispose(){this.Pi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Yi(t){const e=this.Ki.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}};pd.inject=[Na,ln,Rh,s.Xo],An([ir],pd.prototype,"value",void 0),An([ir({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:1})],pd.prototype,"fallThrough",void 0),pd=An([jo("case")],pd);let fd=class extends pd{linkToSwitch(t){if(void 0!==t.defaultCase)throw Fn("AUR0816");t.defaultCase=this}};fd=An([jo("default-case")],fd);let gd=class{constructor(t,e,i,s){this.f=t,this.l=e,this.p=i,this.preSettledTask=null,this.postSettledTask=null,this.logger=s.scopeTo("promise.resolve")}link(t,e,i,s){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const n=this.view,r=this.$controller;return(0,s.p9)(n.activate(t,r,i,this.viewScope=Y.fromParent(r.scope,{})),(()=>this.swap(t,i)))}valueChanged(t,e,i){this.$controller.isActive&&this.swap(null,i)}swap(t,e){const i=this.value;if(!Kn(i))return void this.logger.warn(`The value '${String(i)}' is not a promise. No change will be done.`);const n=this.p.domWriteQueue,r=this.fulfilled,o=this.rejected,a=this.pending,h=this.viewScope;let c;const l={reusable:!1},u=()=>{(0,s.CL)(c=(this.preSettledTask=n.queueTask((()=>(0,s.CL)(r?.deactivate(t,e),o?.deactivate(t,e),a?.activate(t,e,h))),l)).result.catch((t=>{if(!(t instanceof Cn.Nj))throw t})),i.then((u=>{if(this.value!==i)return;const d=()=>{this.postSettlePromise=(this.postSettledTask=n.queueTask((()=>(0,s.CL)(a?.deactivate(t,e),o?.deactivate(t,e),r?.activate(t,e,h,u))),l)).result};1===this.preSettledTask.status?c.then(d):(this.preSettledTask.cancel(),d())}),(u=>{if(this.value!==i)return;const d=()=>{this.postSettlePromise=(this.postSettledTask=n.queueTask((()=>(0,s.CL)(a?.deactivate(t,e),r?.deactivate(t,e),o?.activate(t,e,h,u))),l)).result};1===this.preSettledTask.status?c.then(d):(this.preSettledTask.cancel(),d())})))};1===this.postSettledTask?.status?this.postSettlePromise.then(u):(this.postSettledTask?.cancel(),u())}detaching(t,e,i){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,i)}dispose(){this.view?.dispose(),this.view=void 0}};An([ir],gd.prototype,"value",void 0),gd=An([jo("promise"),Tn(0,Na),Tn(1,Rh),Tn(2,sa),Tn(3,s.Xo)],gd);let md=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,i,s){yd(t).pending=this}activate(t,e,i){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){this.view?.dispose(),this.view=void 0}};An([ir({mode:2})],md.prototype,"value",void 0),md=An([jo("pending"),Tn(0,Na),Tn(1,Rh)],md);let vd=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,i,s){yd(t).fulfilled=this}activate(t,e,i,s){this.value=s;let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){this.view?.dispose(),this.view=void 0}};An([ir({mode:4})],vd.prototype,"value",void 0),vd=An([jo("then"),Tn(0,Na),Tn(1,Rh)],vd);let wd=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,i,s){yd(t).rejected=this}activate(t,e,i,s){this.value=s;let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){this.view?.dispose(),this.view=void 0}};function yd(t){const e=t.parent?.viewModel;if(e instanceof gd)return e;throw Fn("AUR0813")}An([ir({mode:4})],wd.prototype,"value",void 0),wd=An([jo("catch"),Tn(0,Na),Tn(1,Rh)],wd);let bd=class{"promise.resolve"(t,e,i){return new Ir(t,e,"promise","bind")}};bd=An([Or({pattern:"promise.resolve",symbols:""})],bd);let Sd=class{then(t,e,i){return new Ir(t,e,"then","from-view")}};Sd=An([Or({pattern:"then",symbols:""})],Sd);let Cd=class{catch(t,e,i){return new Ir(t,e,"catch","from-view")}};Cd=An([Or({pattern:"catch",symbols:""})],Cd);class kd{constructor(t,e,i,s,n,r,o){this.c=t,this.parent=e,this.host=i,this.l=s,this.p=n,this.scopeBehavior="auto",this.Zi=void 0,this.r=t.get(Pa),this.Ji=r,this.ts=o}static get inject(){return[s.bE,Za,xh,Rh,sa,oc,(0,s.H3)(Td)]}get pending(){return this.es}get composition(){return this.Zi}attaching(t,e,i){return this.es=(0,s.p9)(this.queue(new $d(this.view,this.viewModel,this.model,void 0),t),(t=>{this.ts.isCurrent(t)&&(this.es=void 0)}))}detaching(t){const e=this.Zi,i=this.es;return this.ts.invalidate(),this.Zi=this.es=void 0,(0,s.p9)(i,(()=>e?.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Zi?this.es=(0,s.p9)(this.es,(()=>(0,s.p9)(this.queue(new $d(this.view,this.viewModel,this.model,t),void 0),(t=>{this.ts.isCurrent(t)&&(this.es=void 0)})))):this.Zi.update(this.model)}queue(t,e){const i=this.ts,n=this.Zi;return(0,s.p9)(i.create(t),(t=>i.isCurrent(t)?(0,s.p9)(this.compose(t),(r=>i.isCurrent(t)?(0,s.p9)(r.activate(e),(()=>i.isCurrent(t)?(this.Zi=r,(0,s.p9)(n?.deactivate(e),(()=>t))):(0,s.p9)(r.controller.deactivate(r.controller,this.$controller,2),(()=>(r.controller.dispose(),t))))):(r.controller.dispose(),t))):t))}compose(t){let e,i,n;const{view:r,viewModel:o,model:a}=t.change,{c:h,host:c,$controller:l,l:u}=this,d=this.getDef(o),p=h.createChild(),f=null==u?c.parentNode:u.parentNode;if(null!==d){if(d.containerless)throw Fn("AUR0806");null==u?(i=c,n=()=>{}):(i=f.insertBefore(this.p.document.createElement(d.name),u),n=()=>{i.remove()}),e=this.getVm(p,o,i)}else i=null==u?c:u,e=this.getVm(p,o,i);const g=()=>{if(null!==d){const r=Fa.$el(p,e,i,{projections:this.Ji.projections},d);return new Rd(r,(t=>r.activate(t??r,l,1,l.scope.parent)),(t=>(0,s.p9)(r.deactivate(t??r,l,2),n)),(t=>e.activate?.(t)),t)}{const s=Vh.create({name:ic.generateName(),template:r}),n=this.r.getViewFactory(s,p),o=Fa.$view(n,l),a="auto"===this.scopeBehavior?Y.fromParent(this.parent.scope,e):Y.create(e);return Ph(i)?o.setLocation(i):o.setHost(i),new Rd(o,(t=>o.activate(t??o,l,1,a)),(t=>o.deactivate(t??o,l,2)),(t=>e.activate?.(t)),t)}};return"activate"in e?(0,s.p9)(e.activate(a),(()=>g())):g()}getVm(t,e,i){if(null==e)return new Ad;if("object"==typeof e)return e;const n=this.p,r=Ph(i);gr(t,n.Element,gr(t,xh,new s.g("ElementResolver",r?null:i))),gr(t,Rh,new s.g("IRenderLocation",r?i:null));const o=t.invoke(e);return gr(t,e,new s.g("au-compose.viewModel",o)),o}getDef(t){const e=Jn(t)?t:t?.constructor;return ic.isType(e)?ic.getDefinition(e):null}}An([ir],kd.prototype,"view",void 0),An([ir],kd.prototype,"viewModel",void 0),An([ir],kd.prototype,"model",void 0),An([ir({set:t=>{if("scoped"===t||"auto"===t)return t;throw Fn("AUR0805")}})],kd.prototype,"scopeBehavior",void 0),jh("au-compose")(kd);class Ad{}class Td{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return(0,s.p9)(t.load(),(t=>new Id(++this.id,t)))}invalidate(){this.id++}}class $d{constructor(t,e,i,s){this.view=t,this.viewModel=e,this.model=i,this.src=s}load(){return Kn(this.view)||Kn(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new xd(t,e,this.model,this.src))):new xd(this.view,this.viewModel,this.model,this.src)}}class xd{constructor(t,e,i,s){this.view=t,this.viewModel=e,this.model=i,this.src=s}}class Id{constructor(t,e){this.id=t,this.change=e}}class Rd{constructor(t,e,i,s,n){this.controller=t,this.start=e,this.stop=i,this.update=s,this.context=n,this.state=0}activate(t){if(0!==this.state)throw Fn(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw Fn("AUR0808");default:this.state=-1}}}let Ed=class{constructor(t,e,i,s){let n;this.ss=null,this.rs=null;const r=e.auSlot,o=i.instruction?.projections?.[r.name];null==o?(n=s.getViewFactory(r.fallback,i.controller.container),this.os=!1):(n=s.getViewFactory(o,i.parent.controller.container),this.os=!0),this.ls=i,this.view=n.create().setLocation(t)}static get inject(){return[Rh,oc,Ya,Pa]}binding(t,e,i){let s;this.ss=this.$controller.scope.parent,this.os&&(s=this.ls.controller.scope.parent,(this.rs=Y.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??this.ss.bindingContext)}attaching(t,e,i){return this.view.activate(t,this.$controller,i,this.os?this.rs:this.ss)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}exposeChanged(t){this.os&&null!=this.rs&&(this.rs.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}};An([ir],Ed.prototype,"expose",void 0),Ed=An([jh({name:"au-slot",template:null,containerless:!0})],Ed);const Nd=lr("ISanitizer",(t=>t.singleton(class{sanitize(){throw Fn('"sanitize" method not implemented')}})));let Od=class{constructor(t){this.cs=t}toView(t){return null==t?null:this.cs.sanitize(t)}};Od=An([Tn(0,Nd)],Od),function(t){so.define("sanitize",t)}(Od);const Pd=fu,Md=cu,Ud=lu,Bd=uu,Ld=gu,jd=vu,Fd=du,Vd=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return ur($c,this).register(t)}compile(t,e,i){const n=Vh.getOrCreate(t);if(null===n.template||void 0===n.template)return n;if(!1===n.needsCompile)return n;i??(i=Wl);const r=new Dl(t,e,i,null,null,void 0),o=Qn(n.template)||!t.enhance?r.we.createTemplate(n.template):n.template,a=o.nodeName===Bl&&null!=o.content,h=a?o.content:o,c=e.get(function(t){function e(t,i,n){s.DI.inject(e)(t,i,n)}return e.$isResolver=!0,e.resolve=function(e,i){return i.root===i?i.getAll(t,!1):i.has(t,!1)?i.getAll(t,!1).concat(i.root.getAll(t,!1)):i.root.getAll(t,!1)},e}(eu)),l=c.length;let u=0;if(l>0)for(;l>u;)c[u].compiling?.(o),++u;if(o.hasAttribute(Yl))throw Fn("AUR0701");return this.be(h,r),this.ye(h,r),Vh.create({...t,name:t.name||Jh(),dependencies:(t.dependencies??s.ow).concat(r.deps??s.ow),instructions:r.rows,surrogates:a?this.ke(o,r):s.ow,template:o,hasSlots:r.hasSlot,needsCompile:!1})}compileSpread(t,e,i,n){const r=new Dl(t,i,Wl,null,null,void 0),o=[],a=r.Ae(n.nodeName.toLowerCase()),h=null!==a,c=r.ep,l=e.length;let u,d,p,f,g,m,v,w,y,b,S=0,C=null,k=null;for(;l>S;++S)if(u=e[S],y=u.target,b=u.rawValue,k=r.Ce(u),null!==k&&(1&k.type)>0)zl.node=n,zl.attr=u,zl.bindable=null,zl.def=null,o.push(k.build(zl,r.ep,r.m));else if(C=r.Be(y),null===C)if(null===k){if(v=c.parse(b,1),h&&(f=Ql.from(a,!1),g=f.attrs[y],void 0!==g)){v=c.parse(b,1),o.push(new Tc(null==v?new uc(b,g.property):new ac(v,g.property)));continue}if(null!=v)o.push(new ac(v,r.m.map(n,y)??(0,s.eV)(y)));else switch(y){case"class":o.push(new Sc(b));break;case"style":o.push(new Cc(b));break;default:o.push(new bc(b,y))}}else{if(h&&(f=Ql.from(a,!1),g=f.attrs[y],void 0!==g)){zl.node=n,zl.attr=u,zl.bindable=g,zl.def=a,o.push(new Tc(k.build(zl,r.ep,r.m)));continue}zl.node=n,zl.attr=u,zl.bindable=null,zl.def=null,o.push(k.build(zl,r.ep,r.m))}else{if(C.isTemplateController)throw Fn(`AUR0703:${y}`);f=Ql.from(C,!0),w=!1===C.noMultiBindings&&null===k&&Hl(b),w?p=this.Re(n,b,C,r):(m=f.primary,null===k?(v=c.parse(b,1),p=[null===v?new uc(b,m.property):new ac(v,m.property)]):(zl.node=n,zl.attr=u,zl.bindable=m,zl.def=C,p=[k.build(zl,r.ep,r.m)])),(d??(d=[])).push(new fc(this.resolveResources?C:C.name,null!=C.aliases&&C.aliases.includes(y)?y:void 0,p))}return ql(),null!=d?d.concat(o):o}ke(t,e){const i=[],n=t.attributes,r=e.ep;let o,a,h,c,l,u,d,p,f,g,m,v,w=n.length,y=0,b=null,S=null;for(;w>y;++y){if(o=n[y],a=o.name,h=o.value,c=e.fe.parse(a,h),m=c.target,v=c.rawValue,Kl[m])throw Fn(`AUR0702:${a}`);if(S=e.Ce(c),null!==S&&(1&S.type)>0)zl.node=t,zl.attr=c,zl.bindable=null,zl.def=null,i.push(S.build(zl,e.ep,e.m));else if(b=e.Be(m),null===b)if(null===S)if(f=r.parse(v,1),null!=f)t.removeAttribute(a),--y,--w,i.push(new ac(f,e.m.map(t,m)??(0,s.eV)(m)));else switch(a){case"class":i.push(new Sc(v));break;case"style":i.push(new Cc(v));break;default:i.push(new bc(v,a))}else zl.node=t,zl.attr=c,zl.bindable=null,zl.def=null,i.push(S.build(zl,e.ep,e.m));else{if(b.isTemplateController)throw Fn(`AUR0703:${m}`);d=Ql.from(b,!0),g=!1===b.noMultiBindings&&null===S&&Hl(v),g?u=this.Re(t,v,b,e):(p=d.primary,null===S?(f=r.parse(v,1),u=[null===f?new uc(v,p.property):new ac(f,p.property)]):(zl.node=t,zl.attr=c,zl.bindable=p,zl.def=b,u=[S.build(zl,e.ep,e.m)])),t.removeAttribute(a),--y,--w,(l??(l=[])).push(new fc(this.resolveResources?b:b.name,null!=b.aliases&&b.aliases.includes(m)?m:void 0,u))}}return ql(),null!=l?l.concat(i):i}ye(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.Se(t,e):this.Ie(t,e);case 3:return this.Te(t,e);case 11:{let i=t.firstChild;for(;null!==i;)i=this.ye(i,e);break}}return t.nextSibling}Se(t,e){const i=t.attributes,n=i.length,r=[],o=e.ep;let a,h,c,l,u,d,p,f,g=!1,m=0;for(;n>m;++m)if(a=i[m],c=a.name,l=a.value,"to-binding-context"!==c)if(h=e.fe.parse(c,l),d=h.target,p=h.rawValue,u=e.Ce(h),null===u)f=o.parse(p,1),r.push(new vc(null===f?new j(p):f,(0,s.eV)(d)));else{if("bind"!==h.command)throw Fn(`AUR0704:${h.command}`);r.push(new vc(o.parse(p,16),(0,s.eV)(d)))}else g=!0;return e.rows.push([new mc(r,g)]),this.Pe(t).nextSibling}Ie(t,e){var i,n,r,o;const a=t.nextSibling,h=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),c=e.Ae(h),l=null!==c,u=l&&null!=c.shadowOptions,d=c?.capture,p=null!=d&&"boolean"!=typeof d,f=d?[]:s.ow,g=e.ep,m=this.debug?s.ZT:()=>{t.removeAttribute(y),--j,--L};let v,w,y,b,S,C,k,A,T,$,x,I,R,E,N,O,P,M,U,B=t.attributes,L=B.length,j=0,F=null,V=!1,D=null,H=!0,q=!1,W=!1;if("slot"===h){if(null==e.root.def.shadowOptions)throw Fn(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(l&&(H=c.processContent?.call(c.Type,t,e.p),B=t.attributes,L=B.length),e.root.def.enhance&&t.classList.contains("au"))throw Fn("AUR0705");for(;L>j;++j){switch(w=B[j],y=w.name,b=w.value,y){case"as-element":case"containerless":m(),q||(q="containerless"===y);continue}if(S=e.fe.parse(y,b),D=e.Ce(S),P=S.target,M=S.rawValue,d&&(!p||p&&d(P))){if(null!=D&&1&D.type){m(),f.push(S);continue}if(W=P!==ou&&"slot"!==P,W&&(N=Ql.from(c,!1),null==N.attrs[P]&&!e.Be(P)?.isTemplateController)){m(),f.push(S);continue}}if(null!==D&&1&D.type)zl.node=t,zl.attr=S,zl.bindable=null,zl.def=null,(C??(C=[])).push(D.build(zl,e.ep,e.m)),m();else if(F=e.Be(P),null===F)if(null!==D)m(),l&&(N=Ql.from(c,!1),A=N.attrs[P],void 0!==A)?(zl.node=t,zl.attr=S,zl.bindable=A,zl.def=c,(k??(k=[])).push(D.build(zl,e.ep,e.m))):(zl.node=t,zl.attr=S,zl.bindable=null,zl.def=null,(C??(C=[])).push(D.build(zl,e.ep,e.m)));else{if(l&&(N=Ql.from(c,!1),A=N.attrs[P],void 0!==A)){R=g.parse(M,1),(k??(k=[])).push(null==R?new uc(M,A.property):new ac(R,A.property)),m();continue}R=g.parse(M,1),null!=R&&(m(),(C??(C=[])).push(new ac(R,e.m.map(t,P)??(0,s.eV)(P))))}else N=Ql.from(F,!0),V=!1===F.noMultiBindings&&null===D&&Hl(M),V?$=this.Re(t,M,F,e):(O=N.primary,null===D?(R=g.parse(M,1),$=[null===R?new uc(M,O.property):new ac(R,O.property)]):(zl.node=t,zl.attr=S,zl.bindable=O,zl.def=F,$=[D.build(zl,e.ep,e.m)])),m(),F.isTemplateController?(x??(x=[])).push(new gc(_l,this.resolveResources?F:F.name,void 0,$)):(T??(T=[])).push(new fc(this.resolveResources?F:F.name,null!=F.aliases&&F.aliases.includes(P)?P:void 0,$))}if(ql(),this.Ee(t)&&null!=C&&C.length>1&&this.Le(t,C),l&&(E=new pc(this.resolveResources?c:c.name,void 0,k??s.ow,null,q,f),h===ou)){const i=t.getAttribute("name")||ru,s=e.t(),n=e.De();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute(ou)?t.removeChild(r):bh(s,r),r=t.firstChild;this.ye(s.content,n),E.auSlot={name:i,fallback:Vh.create({name:Jh(),template:s,instructions:n.rows,needsCompile:!1})},t=this.Ue(t,e)}if(null==C&&null==E&&null==T||(v=s.ow.concat(E??s.ow,T??s.ow,C??s.ow),this.Pe(t)),null!=x){let s;L=x.length-1,j=L,I=x[j],Fl(t)?(s=e.t(),Sh(s,[e.$e(Ll),e.$e(jl),this.Pe(e.h(Ul))])):(this.Ue(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),bh(s,t)));const r=s,o=e.De(null==v?[]:[v]);let a,d,p,f,g,m,w,y,b=0,S=0,C=t.firstChild,k=!1;if(!1!==H)for(;null!==C;)if(d=1===C.nodeType?C.getAttribute(ou):null,null!==d&&C.removeAttribute(ou),l)a=C.nextSibling,u||(k=3===C.nodeType&&""===C.textContent.trim(),k||((i=f??(f={}))[n=d||ru]??(i[n]=[])).push(C),t.removeChild(C)),C=a;else{if(null!==d)throw d=d||ru,Fn(`AUR0706:${h}[${d}]`);C=C.nextSibling}if(null!=f){for(d in p={},f){for(s=e.t(),g=f[d],b=0,S=g.length;S>b;++b)m=g[b],"TEMPLATE"===m.nodeName?m.attributes.length>0?bh(s,m):bh(s,m.content):bh(s,m);y=e.De(),this.ye(s.content,y),p[d]=Vh.create({name:Jh(),template:s,instructions:y.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}E.projections=p}if(l&&(q||c.containerless)&&this.Ue(t,e),U=!l||!c.containerless&&!q&&!1!==H,U)if(t.nodeName===Bl)this.ye(t.content,o);else for(C=t.firstChild;null!==C;)C=this.ye(C,o);for(I.def=Vh.create({name:Jh(),template:r,instructions:o.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});j-- >0;)I=x[j],s=e.t(),w=this.Pe(e.h(Ul)),Sh(s,[e.$e(Ll),e.$e(jl),w]),I.def=Vh.create({name:Jh(),template:s,needsCompile:!1,instructions:[[x[j+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([I])}else{null!=v&&e.rows.push(v);let i,s,n,a,d,p,f,g=t.firstChild,m=null,w=!1,y=0,b=0;if(!1!==H)for(;null!==g;)if(s=1===g.nodeType?g.getAttribute(ou):null,null!==s&&g.removeAttribute(ou),l)i=g.nextSibling,u||(w=3===g.nodeType&&""===g.textContent.trim(),w||((r=n??(n={}))[o=s||ru]??(r[o]=[])).push(g),t.removeChild(g)),g=i;else{if(null!==s)throw s=s||ru,Fn(`AUR0706:${h}[${s}]`);g=g.nextSibling}if(null!=n){for(s in m={},n){for(p=e.t(),a=n[s],y=0,b=a.length;b>y;++y)d=a[y],d.nodeName===Bl?d.attributes.length>0?bh(p,d):bh(p,d.content):bh(p,d);f=e.De(),this.ye(p.content,f),m[s]=Vh.create({name:Jh(),template:p,instructions:f.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}E.projections=m}if(l&&(q||c.containerless)&&this.Ue(t,e),U=!l||!c.containerless&&!q&&!1!==H,U&&t.childNodes.length>0)for(g=t.firstChild;null!==g;)g=this.ye(g,e)}return a}Te(t,e){const i=t.parentNode,s=e.ep.parse(t.textContent,1),n=t.nextSibling;let r,o,a,h,c;if(null!==s){for(({parts:r,expressions:o}=s),(c=r[0])&&vh(i,e._e(c),t),a=0,h=o.length;h>a;++a)wh(i,t,[e.$e(Ll),e.$e(jl),this.Pe(e.h(Ul))]),(c=r[a+1])&&vh(i,e._e(c),t),e.rows.push([new wc(o[a],e.root.def.isStrictBinding)]);i.removeChild(t)}return n}Re(t,e,i,s){const n=Ql.from(i,!0),r=e.length,o=[];let a,h,c,l,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),l=s.fe.parse(a,h),u=s.Ce(l),d=n.attrs[l.target],null==d)throw Fn(`AUR0707:${i.name}.${l.target}`);for(null===u?(c=s.ep.parse(h,1),o.push(null===c?new uc(h,d.property):new ac(c,d.property))):(zl.node=t,zl.attr=l,zl.bindable=d,zl.def=i,o.push(u.build(zl,s.ep,s.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return ql(),o}be(t,e){const i=t,n=(0,s.qo)(i.querySelectorAll("template[as-custom-element]")),r=n.length;if(0===r)return;if(r===i.childElementCount)throw Fn("AUR0708");const o=new Set,a=[];for(const t of n){if(t.parentNode!==i)throw Fn("AUR0709");const n=Xl(t,o),r=class{},h=t.content,c=(0,s.qo)(h.querySelectorAll("bindable")),l=rr.for(r),u=new Set,d=new Set;for(const t of c){if(t.parentNode!==h)throw Fn("AUR0710");const e=t.getAttribute("property");if(null===e)throw Fn("AUR0711");const i=t.getAttribute("attribute");if(null!==i&&d.has(i)||u.has(e))throw Fn(`AUR0712:${e}+${i}`);null!==i&&d.add(i),u.add(e),l.add({property:e,attribute:i??void 0,mode:tu(t)}),t.getAttributeNames().filter((t=>!Zl.includes(t))).length,h.removeChild(t)}a.push(r),e.qe(Qh({name:n,template:t},r)),i.removeChild(t)}let h=0;const c=a.length;for(;c>h;++h)tc(a[h]).dependencies.push(...e.def.dependencies??s.ow,...e.deps??s.ow)}Ee(t){return"INPUT"===t.nodeName&&1===Gl[t.type]}Le(t,e){if("INPUT"===t.nodeName){const t=e;let i,s,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":i=e,r++;break;case"checked":s=e,r++}void 0!==s&&void 0!==i&&s<i&&([t[i],t[s]]=[t[s],t[i]])}}Me(t){return t.nodeName===Ul&&Vl(Ml=yh(t))&&Ml.textContent===jl&&Vl(Ml=yh(Ml))&&Ml.textContent===Ll}Pe(t){return t.classList.add("au"),t}Ue(t,e){if(Fl(t))return t;const i=t.parentNode,s=this.Pe(e.h(Ul));return wh(i,t,[e.$e(Ll),e.$e(jl),s]),i.removeChild(t),s}},Fu],Dd=[Fr,jr,Hr],Hd=[ml,dl,fl,pl,gl,vl,kl,wl,yl,Cl,Sl,bl,Al],qd=[Pd,Md,Ud,Bd,Ld,jd,Fd,Od,_u,zu,Ju,ld,ud,pd,fd,gd,md,vd,wd,bd,Sd,Cd,bu,Su,Du,kd,Wu,Hu,qu,Ed],Wd=[jc,Fc,Bc,Lc,Nc,Oc,Pc,Mc,Uc,Dc,zc,Hc,qc,Wc,_c,Vc,Kc],_d=function t(e){return{optionsProvider:e,register(t){const i={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(i),t.register(pr(ft,i.coercingOptions),...Vd,...qd,...Dd,...Hd,...Wd)},customize:i=>t(i??e)}}(s.ZT),zd=lr("IAurelia");class Kd{constructor(t=s.DI.createContainer()){if(this.container=t,this.ir=!1,this.us=!1,this.ds=!1,this.gs=void 0,this.next=void 0,this.ps=void 0,this.vs=void 0,t.has(zd,!0))throw Fn("AUR0768");gr(t,zd,new s.g("IAurelia",this)),gr(t,ph,this.xs=new s.g("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.us}get isStopping(){return this.ds}get root(){if(null==this.gs){if(null==this.next)throw Fn("AUR0767");return this.next}return this.gs}register(...t){return this.container.register(...t),this}app(t){return this.next=new fh(t,this.ws(t.host),this.container,this.xs),this}enhance(t,e){const i=t.container??this.container.createChild(),n=t.host,r=this.ws(n),o=t.component;let a;Jn(o)?(gr(i,r.HTMLElement,gr(i,r.Element,gr(i,xh,new s.g("ElementResolver",n)))),a=i.invoke(o)):a=o,gr(i,Ih,new s.g("IEventTarget",n)),e=e??null;const h=Fa.$el(i,a,n,null,Vh.create({name:Jh(),template:n,enhance:!0}));return(0,s.p9)(h.activate(h,e,1),(()=>h))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}ws(t){let e;if(this.container.has(sa,!1))e=this.container.get(sa);else{if(null===t.ownerDocument.defaultView)throw Fn("AUR0769");e=new kn.o(t.ownerDocument.defaultView),this.container.register(pr(sa,e))}return e}start(t=this.next){if(null==t)throw Fn("AUR0770");return Kn(this.ps)?this.ps:this.ps=(0,s.p9)(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.xs.prepare(this.gs=t),this.us=!0,(0,s.p9)(t.activate(),(()=>{this.ir=!0,this.us=!1,this.ps=void 0,this.bs(t,"au-started",t.host)})))))}stop(t=!1){if(Kn(this.vs))return this.vs;if(!0===this.ir){const e=this.gs;return this.ir=!1,this.ds=!0,this.vs=(0,s.p9)(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.gs=void 0,this.xs.dispose(),this.ds=!1,this.bs(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.ds)throw Fn("AUR0771");this.container.dispose()}bs(t,e,i){const s=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(s)}}var Gd,Jd;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Gd||(Gd={})),function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(Jd||(Jd={}))}},s={};function n(t){var e=s[t];if(void 0!==e)return e.exports;var r=s[t]={id:t,exports:{}};return i[t](r,r.exports,n),r.exports}n.m=i,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>t+"."+{142:"bf22e37a2cba7c9cb6cb",371:"40f211dca2fe06265f13",407:"87c7cdb0ede53836202b"}[t]+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="aurelia-website:",n.l=(i,s,r,o)=>{if(t[i])t[i].push(s);else{var a,h;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+r),a.src=i),t[i]=[s];var d=(e,s)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(s))),e)return e(s)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={497:0};n.f.j=(e,i)=>{var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((i,n)=>s=t[e]=[i,n]));i.push(s[2]=r);var o=n.p+n.u(e),a=new Error;n.l(o,(i=>{if(n.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,s[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var s,r,[o,a,h]=i,c=0;if(o.some((e=>0!==t[e]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);h&&h(n)}for(e&&e(i);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},i=self.webpackChunkaurelia_website=self.webpackChunkaurelia_website||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),n.nc=void 0,(()=>{var t={};n.r(t),n.d(t,{default:()=>he,dependencies:()=>ce,name:()=>oe,register:()=>ue,template:()=>ae});var e=n(344),i=n(134),s=n(932);class r{constructor(t,e,i){this.name=t,this.isOptional=e,this.isStar=i}}class o{constructor(t,e,i){this.path=t,this.caseSensitive=e,this.handler=i}}class a{constructor(t,e){this.route=t,this.params=e}}class h{constructor(t,e){this.endpoint=t,this.params=e}}class c{constructor(t,e,i,s){this.chars=t,this.states=e,this.skippedStates=i,this.result=s,this.head=e[e.length-1],this.endpoint=this.head?.endpoint}advance(t){const{chars:e,states:i,skippedStates:s,result:n}=this;let r=null,o=0;const a=i[i.length-1];function h(l,u){if(l.isMatch(t)&&(1==++o?r=l:n.add(new c(e.concat(t),i.concat(l),null===u?s:s.concat(u),n))),null===a.segment&&l.isOptional&&null!==l.nextStates){if(l.nextStates.length>1)throw y(`${l.nextStates.length} nextStates`);const t=l.nextStates[0];if(!t.isSeparator)throw y("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)h(e,l)}}if(a.isDynamic&&h(a,null),null!==a.nextStates)for(const t of a.nextStates)h(t,null);null!==r&&(i.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}finalize(){!function t(e,i){const s=i.nextStates;if(null!==s)if(1===s.length&&null===s[0].segment)t(e,s[0]);else for(const i of s)if(i.isOptional&&null!==i.endpoint){if(e.push(i),null!==i.nextStates)for(const s of i.nextStates)t(e,s);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:i}=this,s={};for(const t of i.params)s[t.name]=void 0;for(let i=0,n=t.length;i<n;++i){const n=t[i];if(n.isDynamic){const t=n.segment.name;void 0===s[t]?s[t]=e[i]:s[t]+=e[i]}}return s}compareTo(t){const e=this.states,i=t.states;for(let t=0,s=0,n=Math.max(e.length,i.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=i[s];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++s;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=i[++s]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++s}const s=this.skippedStates,n=t.skippedStates,r=s.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=s[t],i=n[t];if(e.length<i.length)return 1;if(e.length>i.length)return-1}return 0}}function l(t){return null!==t.head.endpoint}function u(t,e){return t.compareTo(e)}class d{constructor(t){this.candidates=[],this.candidates=[new c([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(l);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(u),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const i of e)i.advance(t)}}const p="$$residue";class f{constructor(t,e,i){switch(this.prevState=t,this.segment=e,this.value=i,this.nextStates=null,this.endpoint=null,e?.kind){case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 2:case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let i,s=this.nextStates;return null===s?(i=void 0,s=this.nextStates=[]):i=null===t?s.find((t=>t.value===e)):s.find((e=>e.segment?.equals(t))),void 0===i&&s.push(i=new f(this,t,e)),i}setEndpoint(t){if(null!==this.endpoint)throw y(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){switch(this.segment?.kind){case 3:return!this.value.includes(t);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(t)}}}function g(t){return t.length>0}class m{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 4}appendTo(t){const{value:e,value:{length:i}}=this;if(this.caseSensitive)for(let s=0;s<i;++s)t=t.append(this,e.charAt(s));else for(let s=0;s<i;++s){const i=e.charAt(s);t=t.append(this,i.toUpperCase()+i.toLowerCase())}return t}equals(t){return 4===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class v{constructor(t,e){this.name=t,this.optional=e}get kind(){return 3}appendTo(t){return t.append(this,"/")}equals(t){return 3===t.kind&&t.optional===this.optional&&t.name===this.name}}class w{constructor(t,e){this.name=t,this.kind=e}appendTo(t){return t.append(this,"")}equals(t){return(2===t.kind||1===t.kind)&&t.name===this.name}}const y=t=>new Error(t);class b{constructor(t,e,i,s={}){this.router=t,this.name=e,this.connectedCE=i,this.options=s,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}getNavigationContent(t){return t instanceof ct&&(t=t.navigation),t instanceof W?this.contents.find((e=>e.navigation===t))??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){return this.activeContent?.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){return this.connectedCE?.$controller??null}get isViewport(){return this instanceof G}get isViewportScope(){return this instanceof D}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){return this.contents.forEach((t=>t.delete())),!0}canUnload(t,e){return!0}canLoad(t,e){return!0}unload(t,e){}load(t,e){}}class S{constructor(t,e,i,s,n=Q.create(""),r=W.create({instruction:"",fullStateInstruction:""})){this.router=t,this.endpoint=e,this.instruction=n,this.navigation=r,this.completed=!1,this.connectedScope=new it(t,s,i,this),null!==this.router.rootScope&&(this.endpoint.connectedScope?.parent??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){this.connectedScope.parent?.removeChild(this.connectedScope)}}class C{constructor(t=null,e="",i=[],s="",n={}){this.match=t,this.matching=e,this.instructions=i,this.remaining=s,this.params=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.some((t=>!t.component.none))}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function k(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function A(t,e){return function(i,s){e(i,s,t)}}class T{static parse(t,e,i,s){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!T.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const n=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===n.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);s=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),i=!0);const{instructions:o,remaining:a}=T.parse(t,e,r,!1);n[n.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:i,remaining:r}=T.parse(t,e,!0,s);n.push(...i),e=r}else if(e.startsWith(t.groupEnd)){i&&(e=e.slice(t.groupEnd.length));let s=0;const r=e.length;for(;s<r;s++){if(e.slice(s,s+t.sibling.length)===t.sibling)return{instructions:n,remaining:e};if(e.slice(s,s+t.groupEnd.length)!==t.groupEnd){if(n.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(s);break}}if(s>=r)return{instructions:n,remaining:e}}else if(e.startsWith(t.sibling)&&!T.isAdd(t,e)){if(!i)return{instructions:n,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:i,remaining:s}=T.parseOne(t,e);n.push(i),e=s}return{instructions:n,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const i=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let s,n,r,o,a,h=!0;const c=e,l=[t.add,t.clear];for(const n of l)if(e===n){s=e,e="",i.shift(),i.shift(),o=t.viewport;break}if(void 0===s)for(const n of l)if(e.startsWith(`${n}${t.viewport}`)){s=n,e=e.slice(`${n}${t.viewport}`.length),i.shift(),i.shift(),o=t.viewport;break}if(void 0===s&&(({token:o,pos:a}=T.findNextToken(e,i)),s=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",i.shift(),o===t.parameters&&(({token:o,pos:a}=T.findNextToken(e,[t.parametersEnd])),n=e.slice(0,a),e=e.slice(a+o.length),({token:o}=T.findNextToken(e,i)),e=e.slice(o.length)),i.shift()),o===t.viewport&&(({token:o,pos:a}=T.findNextToken(e,i)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),i.shift(),o===t.noScope&&(h=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(s??""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);const u=Q.create(s,r,n,h);return u.unparsed=c,{instruction:u,remaining:e}}static findNextToken(t,e){const i={};for(const s of e)t.indexOf(s)>-1&&(i[s]=t.indexOf(s));const s=Math.min(...Object.values(i));for(const t in i)if(i[t]===s)return{token:t,pos:s};return{token:"",pos:-1}}}class ${constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",i="top-down",s=" > ",n=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=i,this.componentTitleSeparator=s,this.useComponentNames=n,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new $((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return R.for(t).title}apply(t={}){t="string"==typeof t?{appTitle:t}:t,this.appTitle=t.appTitle??this.appTitle,this.appTitleSeparator=t.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=t.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=t.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=t.useComponentNames??this.useComponentNames,this.componentPrefix=t.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class x{constructor(t="@",e="+",i="/",s="(",n=")",r="!",o="(",a=")",h=",",c="=",l="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=i,this.groupStart=s,this.groupEnd=n,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=h,this.parameterKeySeparator=c,this.add=l,this.clear=u,this.action=d}static create(t={}){return new x(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return R.for(t).separators}apply(t={}){this.viewport=t.viewport??this.viewport,this.sibling=t.sibling??this.sibling,this.scope=t.scope??this.scope,this.groupStart=t.groupStart??this.groupStart,this.groupEnd=t.groupEnd??this.groupEnd,this.noScope=t.noScope??this.noScope,this.parameters=t.parameters??this.parameters,this.parametersEnd=t.parametersEnd??this.parametersEnd,this.parameterSeparator=t.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=t.parameterKeySeparator??this.parameterKeySeparator,this.add=t.add??this.add,this.clear=t.clear??this.clear,this.action=t.action??this.action}}class I{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new I(t.loadActive,t.viewportNavigating)}static for(t){return R.for(t).indicators}apply(t={}){this.loadActive=t.loadActive??this.loadActive,this.viewportNavigating=t.viewportNavigating??this.viewportNavigating}}class R{constructor(t=x.create(),e=I.create(),i=!0,s=null,n=!0,r=0,o=!0,a=!0,h=!0,c=$.create(),l=["guardedUnload","swapped","completed"],u="attach-next-detach-current",d="",p="abort"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=i,this.basePath=s,this.useHref=n,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=h,this.title=c,this.navigationSyncStates=l,this.swapOrder=u,this.fallback=d,this.fallbackAction=p,this.registrationHooks=[]}static create(t={}){return new R(x.create(t.separators),I.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,$.create(t.title),t.navigationSyncStates,t.swapOrder,t.fallback,t.fallbackAction)}static for(t){return t instanceof Dt?t.options:(t=t instanceof ft?t.configuration:t.get(jt)).options}apply(t){t=t??{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=t.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=t.basePath??this.basePath,this.useHref=t.useHref??this.useHref,this.statefulHistoryLength=t.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=t.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=t.useConfiguredRoutes??this.useConfiguredRoutes,this.additiveInstructionDefault=t.additiveInstructionDefault??this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=t.navigationSyncStates??this.navigationSyncStates,this.swapOrder=t.swapOrder??this.swapOrder,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var E;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(E||(E={}));class N{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new N;return e.set(t),e}static parse(t,e,i=!1){if(null==e||0===e.length)return[];const s=x.for(t),n=s.parameterSeparator,r=s.parameterKeySeparator;if("string"==typeof e){const t=[],s=e.split(n);for(const e of s){let s,n;[s,n]=e.split(r),void 0===n?(n=i?decodeURIComponent(s):s,s=void 0):i&&(s=decodeURIComponent(s),n=decodeURIComponent(n)),t.push({key:s,value:n})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,i=!1){if(!Array.isArray(e)||0===e.length)return"";const s=x.for(t);return e.map((t=>{const e=void 0!==t.key&&i?encodeURIComponent(t.key):t.key,n=i?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==n?e+s.parameterKeySeparator+n:n})).join(s.parameterSeparator)}static contains(t,e){return Object.keys(e).every((i=>e[i]===t[i]))}parameters(t){return N.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const i=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==i.length?1===i.length?i[0]:i:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=e??[];const i=this.parameters(t),s={};for(const t of e){let e=i.findIndex((e=>e.key===t));if(e>=0){const[n]=i.splice(e,1);s[t]=n.value}else if(e=i.findIndex((t=>void 0===t.key)),e>=0){const[n]=i.splice(e,1);s[t]=n.value}}for(const t of i.filter((t=>void 0!==t.key)))s[t.key]=t.value;let n=e.length;for(const t of i.filter((t=>void 0===t.key)))s[n++]=t.value;return s}toSortedParameters(t,e){e=e||[];const i=this.parameters(t),s=[];for(const t of e){let e=i.findIndex((e=>e.key===t));if(e>=0){const t={...i.splice(e,1)[0]};t.key=void 0,s.push(t)}else if(e=i.findIndex((t=>void 0===t.key)),e>=0){const t={...i.splice(e,1)[0]};s.push(t)}else s.push({value:void 0})}const n=i.filter((t=>void 0!==t.key));return n.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),s.push(...n),s.push(...i.filter((t=>void 0===t.key))),s}same(t,e,i){const s=null!==i?i.parameters:[],n=this.toSpecifiedParameters(t,s),r=e.toSpecifiedParameters(t,s);return Object.keys(n).every((t=>n[t]===r[t]))&&Object.keys(r).every((t=>r[t]===n[t]))}}class O{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new O;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return i.b_N.isType(t.Type)}static isType(t){return i.b_N.isType(t)}static isInstance(t){return(0,i.T5P)(t)}static isAppelation(t){return O.isName(t)||O.isType(t)||O.isInstance(t)}static getName(t){return O.isName(t)?t:O.isType(t)?i.b_N.getDefinition(t).name:O.getName(t.constructor)}static getType(t){return O.isName(t)?null:O.isType(t)?t:t.constructor}static getInstance(t){return O.isName(t)||O.isType(t)?null:t}set(t){let e=null,i=null,s=null,n=null,r=null;t instanceof Promise?n=t:O.isName(t)?e=O.getName(t):O.isType(t)?(e=this.getNewName(t),i=O.getType(t)):O.isInstance(t)?(e=this.getNewName(O.getType(t)),i=O.getType(t),s=O.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=i,this.instance=s,this.promise=n,this.func=r}resolve(t){if(null!==this.func&&this.set(this.func(t)),this.promise instanceof Promise)return this.promise.then((t=>{if(O.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const i=e[0];this.set(t[i])}))}get none(){return!(this.isName()||this.isType()||this.isInstance()||this.isFunction()||this.isPromise())}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t,e){if(this.resolve(e),null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(i.b_N.keyFrom(this.name),!0)){const e=t.getResolver(i.b_N.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const i=e.getFactory(t);if(i)return i.Type}}}return null}toInstance(t,e,s,n){if(this.resolve(n),null!==this.instance)return this.instance;if(null==t)return null;const r=t.createChild(),o=this.isType()?r.get(this.type):r.get(i.b_N.keyFrom(this.name));if(null==o)throw console.warn("Failed to create instance when trying to resolve component",this.name,this.type,"=>",o),new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);return i.Qrh.$el(r,o,s,null).parent=e,o}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?O.getName(t):this.name}}function P(t,e){const i=[];let s=t.findIndex(e);for(;s>=0;)i.push(t.splice(s,1)[0]),s=t.findIndex(e);return i}function M(t,e=!1){return t.filter(((t,i,s)=>(e||null!=t)&&s.indexOf(t)===i))}class U{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class B{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){if(0===(e?.length??0))return e?.[0];let i=!1;null===t&&(t=new L,i=!0);const s=new L(e.shift());return B.connect(t,s,(t?.runParallel??!1)||i),e.length>0&&B.add(s,!1,...e),i?(B.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):s}static runParallel(t,...e){if(0===(e?.length??0))return[];let i=!1;return null===t?(t=new L,i=!0):t=B.connect(t,new L,!0),B.add(t,!0,...e),i&&B.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),i?t.result??[]:t}static step(t){if(t instanceof Promise)return B.runners.get(t)}static cancel(t){const e=B.step(t);void 0!==e&&e.cancel()}static add(t,e,...i){let s=new L(i.shift(),e);null!==t&&(s=B.connect(t,s,e));const n=s;for(;i.length>0;)s=B.connect(s,new L(i.shift(),e),!1);return n}static connect(t,e,i){if(i){const i=t.child;t.child=e,e.parent=t,e.next=i,null!==i&&(i.parent=null,i.previous=e)}else{const i=t.next;t.next=e,e.previous=t,e.next=i,null!==i&&(i.previous=e,i.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)B.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const i=t.value;B.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,B.settlePromise(t),t.isDone=!0,t.isDoing=!1;const i=t.nextToDo();null===i||t.isExited?(t.root.doneAll||t.isExited)&&B.settlePromise(t.root):B.process(i)})).catch((t=>{throw t}))})(t,i)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?B.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&B.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new U,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){if(t.finally?.isPending)switch(t.promise=null,e){case"resolve":t.finally?.resolve(t.result);break;case"reject":t.finally?.reject(t.result)}}}B.runners=new WeakMap,B.roots={};class L{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+L.id++}get isParallelParent(){return this.child?.runParallel??!1}get result(){if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:this.child?.tail?.result}let t=this.value;for(;t instanceof L;)t=t.result;return t}get asValue(){return this.result}get previousValue(){return this.runParallel?this.head.parent?.parent?.previous?.result:this.previous?.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,this.child?.cancel(!1),this.next?.cancel(!1),!0)}exit(t=!0){return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,this.child?.exit(!1),this.next?.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){let t=this.next;for(;null!==t;){if(!t.isDoing&&!t.isDone)return t;t=t.next}const e=this.head.parent??null;return null!==e&&e.done?e.nextOrUp():null}get path(){return`${this.head.parent?.path??""}/${this.name}`}get tree(){let t="",e=this.head,i=e.parent,s="";for(;null!==i;)s=`${i.path}${s}`,i=i.head.parent;do{if(t+=`${s}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){let t=`${this.path}\n`;return t+=this.child?.report??"",t+=this.next?.report??"",t}}L.id=0;class j{constructor(t,e,i,s,n,r,o,a){this.path=t,this.id=e,this.redirectTo=i,this.instructions=s,this.caseSensitive=n,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return s.SF.hasOwn(j.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const i=j.create(t,e);return s.SF.define(j.resourceKey,i,e),e}static getConfiguration(t){const e=s.SF.getOwn(j.resourceKey,t)??{};return Array.isArray(t.parameters)&&(e.parameters=t.parameters),"title"in t&&(e.title=t.title),e instanceof j?e:j.create(e,t)}static create(t,e=null){null!==e&&(t=j.transferTypeToComponent(t,e)),i.b_N.isType(t)?t=j.getConfiguration(t):null===e&&(t={...t});const s=j.transferIndividualIntoInstructions(t);j.validateRouteConfiguration(s);let n=s.path;return Array.isArray(n)&&(n=n.join(",")),new j(s.path??"",s.id??n??null,s.redirectTo??null,s.instructions??null,s.caseSensitive??!1,s.title??null,s.reloadBehavior??null,s.data??null)}static transferTypeToComponent(t,e){if(i.b_N.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const s={...t}??{};if("component"in s||"instructions"in s)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in s||(s.component=e),"path"in s||"redirectTo"in s||(s.path=i.b_N.getDefinition(e).name),s}static transferIndividualIntoInstructions(t){if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(t.component??null)||null!==(t.viewport??null)||null!==(t.parameters??null)||null!==(t.children??null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}j.resourceKey=e.b$.resource.keyFor("route");const F={name:e.b$.resource.keyFor("routes"),isConfigured:t=>s.SF.hasOwn(F.name,t)||"routes"in t,configure(t,e){const i=t.map((t=>j.create(t)));return s.SF.define(F.name,i,e),e},getConfiguration(t){const e=t,i=[],n=s.SF.getOwn(F.name,t);return Array.isArray(n)&&i.push(...n),Array.isArray(e.routes)&&i.push(...e.routes),i.map((t=>t instanceof j?t:j.create(t)))}};class V extends S{}class D extends b{constructor(t,e,i,s,n,r=null,o={catches:[],source:null}){super(t,e,i),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new V(t,this,s,n)),this.catches.length>0&&(this.instruction=Q.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){return this.options.source??null}get catches(){let t=this.options.catches??[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}toString(){const t=this.instruction?.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`vs:${this.name}[${t}->${e}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new V(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){B.run(null,(e=>t.setEndpointStep(this,e.root)),(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new V(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let n=0;for(let t=0,e=i;t<e&&this.contents[0].navigation.completed;t++)n++;this.contents.splice(0,n),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((i=>i.cancelContentChange(t,e)));const i=this.contents.findIndex((e=>e.navigation===t.navigation));if(!(i<0)&&(this.contents.splice(i,1),this.add)){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Q.clear(this.router)||t===Q.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&P(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const t=[];if(null!==this.rootComponentType){const e=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;t.push(...F.getConfiguration(e)??[])}return t}}class H{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class q{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class W extends H{constructor(t={instruction:"",fullStateInstruction:""}){super(t),this.navigation=new q,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=t.fromBrowser??this.fromBrowser,this.origin=t.origin??this.origin,this.replacing=t.replacing??this.replacing,this.refreshing=t.refreshing??this.refreshing,this.untracked=t.untracked??this.untracked,this.historyMovement=t.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(t={instruction:"",fullStateInstruction:""}){return new W(t)}}class _{constructor(){this.map=new Map}set(t,e){const i=this.map.get(t);i instanceof U&&i.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof U&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new U;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof U?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof U)}clone(){const t=new _;return t.map=new Map(this.map),t}}class z extends S{constructor(t,e,i,s,n=Q.create(""),r=W.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,i,s,n,r),this.router=t,this.instruction=n,this.navigation=r,this.contentStates=new _,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==o?.container||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){return this.instruction.route instanceof C&&null!==this.instruction.route.match?.reloadBehavior?this.instruction.route.match?.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}get controller(){return this.instruction.component.instance?.$controller}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){return this.instruction.sameComponent(this.router,t.instruction,!0)&&(this.navigation.query??"")===(t.navigation.query??"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return i.Qrh.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e,i){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(s){if(!s.message.startsWith("AUR0009:"))throw s;if(""===(e??""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);"process-children"===i?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.nextScopeInstructions=null),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(t){if(!t.message.startsWith("AUR0009:"))throw t;throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0)}}canLoad(){if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const t=this.instruction.component.instance;if(null==t)return!0;this.contentStates.set("checkedLoad",void 0);const e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),i=this.instruction.typeParameters(this.router),s={...this.navigation.parameters,...e,...i},n=this.getLifecycleHooks(t,"canLoad").map((e=>i=>{const n=e(t,s,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&i.exit(),n):"string"==typeof n?(i.exit(),n):n}));if(0!==n.length){const t=B.run(null,...n);if(!0!==t)return!1!==t&&t}if(null==t.canLoad)return!0;return t.canLoad(s,this.instruction,this.navigation)}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=W.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this.getLifecycleHooks(e,"canUnload").map((i=>s=>{const n=i(e,this.instruction,t);return"boolean"==typeof n?(!1===n&&s.exit(),n):n}));if(0!==i.length){const t=B.run(null,...i);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const s=e.canUnload(this.instruction,t);if("boolean"!=typeof s&&!(s instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return s}load(t){return B.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),i=this.instruction.typeParameters(this.router),s={...this.navigation.parameters,...e,...i},n=this.getLifecycleHooks(t,"loading").map((e=>()=>e(t,s,this.instruction,this.navigation)));return n.push(...this.getLifecycleHooks(t,"load").map((e=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),e(t,s,this.instruction,this.navigation))))),0!==n.length?("function"==typeof t.loading&&n.push((()=>t.loading(s,this.instruction,this.navigation))),"function"==typeof t.load&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),n.push((()=>t.load(s,this.instruction,this.navigation)))),B.run(null,...n)):"function"==typeof t.loading?t.loading(s,this.instruction,this.navigation):"function"==typeof t.load?(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(s,this.instruction,this.navigation)):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=W.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this.getLifecycleHooks(e,"unloading").map((i=>()=>i(e,this.instruction,t)));return i.push(...this.getLifecycleHooks(e,"unload").map((i=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),i(e,this.instruction,t))))),0!==i.length?("function"==typeof e.unloading&&i.push((()=>e.unloading(this.instruction,t))),"function"==typeof e.unload&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),i.push((()=>e.unload(this.instruction,t)))),B.run(null,...i)):"function"==typeof e.unloading?e.unloading(this.instruction,t):"function"==typeof e.unload?(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),e.unload(this.instruction,t)):void 0}activateComponent(t,e,i,s,n,r,o){return B.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(i)),(()=>{if(!this.contentStates.has("activating")&&!this.contentStates.has("activated"))return this.contentStates.set("activating",void 0),this.controller?.activate(e??this.controller,i,s,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,i,s,n,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return B.run(t,(()=>{if(r&&null!==n.element){const t=Array.from(n.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),this.controller?.deactivate(e??this.controller,i,s)}))}disposeComponent(t,e,i=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance)return i?void e.push(this):(this.contentStates.delete("created"),this.controller?.dispose())}freeContent(t,e,i,s,n=!1){return B.run(t,(()=>this.unload(i)),(t=>this.deactivateComponent(t,null,e.controller,0,e,n)),(()=>this.disposeComponent(e,s,n)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t,this.instruction)}toComponentInstance(t,e,i){return this.instruction.component.none?null:this.instruction.component.toInstance(t,e,i,this.instruction)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){return(t.$controller.lifecycleHooks[e]??[]).map((t=>t.instance[e].bind(t.instance)))}}class K{constructor(t=!0,e=[],i="",s="",n="",r=!1,o=!1,a=!1,h=!1,c=!1){this.scope=t,this.usedBy=e,this.fallback=s,this.fallbackAction=n,this.noLink=r,this.noTitle=o,this.stateful=a,this.forceDescription=h,this.noHistory=c,this.default=void 0,this.default=i}static create(t){const e=new K;return void 0!==t&&e.apply(t),e}apply(t){this.scope=t.scope??this.scope,this.usedBy=("string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)??this.usedBy,this.default=t.default??this.default,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,this.noLink=t.noLink??this.noLink,this.noTitle=t.noTitle??this.noTitle,this.stateful=t.stateful??this.stateful,this.forceDescription=t.forceDescription??this.forceDescription,this.noHistory=t.noHistory??this.noHistory}}class G extends b{constructor(t,e,i,s,n,r){super(t,e,i),this.contents=[],this.forceRemove=!1,this.options=new K,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new z(t,this,s,n)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){if(1===this.contents.length)return this.contents[0];let t;for(let e=0,i=this.contents.length;e<i&&this.contents[e].completed;e++)t=this.contents[e];return t}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let i=0,s=this.contents.length;i<s&&!(this.contents[i].navigation.timestamp>t);i++)e=this.contents[i];return e}getNavigationContent(t){return super.getNavigationContent(t)}get parentViewport(){let t=this.connectedScope;for(;null!=t?.parent;)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){const t=this.getContent()?.instruction.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`v:${this.name}[${t}->${e}]`}setNextContent(t,e){t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.getContent(),s=new z(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,this.connectedCE??null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){e=e??{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const i=(this.scope.parent?.endpoint.getRoutes()??[]).filter((t=>(Array.isArray(t.path)?t.path:[t.path]).includes(""))).length>0;if(null===this.getContent().componentInstance&&null==this.getNextContent()?.componentInstance&&(this.options.default||i)){const t=Q.parse(this.router,this.options.default??"");if(0===t.length&&i){const e=this.scope.parent?.findInstructions([Q.create("")],!1,this.router.configuration.options.useConfiguredRoutes);e?.foundConfiguration&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&B.run(t,(t=>{if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,this.getNextContent()?.navigation??null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),B.run(t,...e)}return!0}))}async transition(t){const e=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let i=this.parentViewport;null!==i&&"reload"!==i.transitionAction&&"swap"!==i.transitionAction&&(i=null);const s=[e=>{if(this.isActiveNavigation(t))return this.canUnload(t,e)},e=>{if(this.isActiveNavigation(t))if(e.previousValue){if(this.router.isRestrictedNavigation){const e=this.router.configuration.options;this.getNavigationContent(t).createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction)}}else t.cancel();t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==i?t.waitForEndpointState(i,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(t,e)},e=>{if(this.isActiveNavigation(t)){let i=e.previousValue;if("boolean"!=typeof i){if(this.getNavigationContent(t).instruction.nextScopeInstructions=null,"string"==typeof i){const t=this.scope,e=this.router.configuration.options;let s=Q.parse(this.router,i);const n=t.parent?.findInstructions(s,e.useDirectRouting,e.useConfiguredRoutes);(n?.foundConfiguration||n?.foundInstructions)&&(s=n.instructions);for(const e of s)e.endpoint.set(this),e.scope=t.owningScope;i=s}return B.run(e,(e=>this.cancelContentChange(t,e)),(t=>(this.router.load(i,{append:!0}),t.exit())))}if(!i)return e.cancel(),t.cancel(),void(this.getNavigationContent(t).instruction.nextScopeInstructions=null)}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],n=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(t,e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==i?t.waitForEndpointState(i,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(t,e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],r=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":r.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":r.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":r.push((e=>B.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":r.push((e=>B.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}r.push((()=>t.addEndpointState(this,"swapped"))),this.connectedCE?.setActivity?.(e,!0),this.connectedCE?.setActivity?.(t.navigation.navigation,!0);const o=B.run(null,(e=>t.setEndpointStep(this,e.root)),...s,...n,...r,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1)}));o instanceof Promise&&o.catch((t=>{}))}canUnload(t,e){return B.run(e,(e=>this.getContent().connectedScope.canUnload(t,e)),(e=>!!e.previousValue&&this.getContent().canUnload(t.navigation)))}canLoad(t,e){return!!this.clear||B.run(e,(()=>this.waitForConnected()),(()=>{const e=this.router.configuration.options,i=this.getNavigationContent(t);return i.createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction),i.canLoad()}))}load(t,e){if(!this.clear)return this.getNavigationContent(t).load(e)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){if(this.isEmpty)return;const i=this.router.statefulHistory||(this.options.stateful??!1);return B.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:4)),(()=>i?this.dispose():void 0))}activate(t,e,i,s,n){if(null!==this.activeContent.componentInstance)return B.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,i,s,this.connectedCE,(()=>n?.addEndpointState(this,"bound")),n?.waitForSyncState("bound"))))}deactivate(t,e,i,s){const n=this.getContent();if(null!=n?.componentInstance&&!n.reload&&n.componentInstance!==this.getNextContent()?.componentInstance)return n.deactivateComponent(t,e,i,s,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t,e){return B.run(e,(e=>this.getContent().connectedScope.unload(t,e)),(()=>null!=this.getContent().componentInstance?this.getContent().unload(t.navigation??null):void 0))}dispose(){null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===this.getNextContent()?.componentInstance||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];const n=this.contents[i-1];if(this.clear){const t=new z(this.router,this,this.owningScope,this.scope.hasScope,void 0,s.navigation);this.contents.splice(i,1,t),s.delete(),s=t}else s.reload=!1;n.delete(),s.completed=!0,this.transitionAction="",s.contentStates.delete("checkedUnload"),s.contentStates.delete("checkedLoad"),this.previousViewportState=null;const r=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(r,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1);let o=0;for(let t=0,e=i;t<e&&this.contents[0].navigation.completed;t++)o++;this.contents.splice(0,o),P(this.coordinators,(e=>e===t))}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((i=>i.cancelContentChange(t,e)));const i=this.contents.findIndex((e=>e.navigation===t.navigation));if(i<0)return;const s=t.getEndpointStep(this)?.current??null,n=this.contents[i],r=this.contents[i-1];return n.instruction.cancelled=!0,B.run(s,(t=>n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)),(()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),n?.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",r?.contentStates.delete("checkedUnload"),r?.contentStates.delete("checkedLoad");const e=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1),t.removeEndpoint(this),P(this.coordinators,(e=>e===t))}),(()=>{if(s!==e)return s?.exit()}))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const i=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==i)return B.run(t,(t=>(this.forceRemove=!0,i.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,P(this.historyCache,(t=>t===i))}))}getRoutes(){const t=[];let e=this.getComponentType();return null!=e&&(e=e.constructor===e.constructor.constructor?e:e.constructor,t.push(...F.getConfiguration(e)??[])),t}getTitle(t){if(this.options.noTitle)return"";const e=this.getComponentType();if(null===e)return"";let i="";const s=e.title;if(void 0!==s)if("string"==typeof s)i=s;else{const e=this.getComponentInstance();i=s.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=this.getContentInstruction().component.name??"";const e=this.router.configuration.options.title.componentPrefix??"";t.startsWith(e)&&(t=t.slice(e.length)),t=t.replace("-"," "),i=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return i}getComponentType(){let t=this.getContentInstruction().component.type??null;return null===t&&(t=i.b_N.for(this.connectedCE.element).container.componentType),t??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){return this.getNextContent()?.instruction??this.getContent().instruction??null}clearState(){this.options=K.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new z(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class J{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof G?"Viewport":this.instance instanceof D?"ViewportScope":null}static create(t){const e=new J;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof b}static getName(t){return J.isName(t)?t:t?t.name:null}static getInstance(t){return J.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Q{constructor(t,e,i){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=O.create(t),this.endpoint=J.create(e),this.parameters=N.create(i)}static create(t,e,i,s=!0,n=null){const r=new Q(t,e,i);return r.ownsScope=s,r.nextScopeInstructions=n,r}static createClear(t,e){return Q.create(Q.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const s=[];for(const n of e)if("string"==typeof n)s.push(...Q.parse(t,n));else if(n instanceof Q)s.push(n);else if(n instanceof Promise)s.push(Q.create(n));else if(O.isAppelation(n))s.push(Q.create(n));else if(O.isDefinition(n))s.push(Q.create(n.Type));else if("component"in n||"id"in n){const e=n,i=Q.create(e.component,e.viewport,e.parameters);i.route=n.id??null,void 0!==e.children&&null!==e.children&&(i.nextScopeInstructions=Q.from(t,e.children)),s.push(i)}else if("object"==typeof n&&null!==n){const t=i.b_N.define(n);s.push(Q.create(t))}else s.push(Q.create(n));return s}static clear(t){return x.for(t).clear}static add(t){return x.for(t).add}static parse(t,e){const i=x.for(t);let s="";const n=/^[./]+/.exec(e);Array.isArray(n)&&n.length>0&&(s=n[0],e=e.slice(s.length));const r=T.parse(i,e,!0,!0).instructions;for(const t of r)t.scopeModifier=s;return r}static stringify(t,e,i=!1,s=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,i,s))).filter((t=>t.length>0)).join(x.for(t).sibling)}static resolve(t){const e=t.filter((t=>t.isUnresolved)).map((t=>t.resolve())).filter((t=>t instanceof Promise));if(e.length>0)return Promise.all(e)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Q.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const i of t)e.push(i),i.hasNextScopeInstructions&&e.push(...Q.flat(i.nextScopeInstructions));return e}static clone(t,e=!1,i=!1){return t.map((t=>t.clone(e,i)))}static contains(t,e,i,s){return i.every((i=>i.isIn(t,e,s)))}get viewport(){return this.endpoint.instance instanceof G||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof D||null===this.endpoint.endpointType?this.endpoint:null}get previous(){return this.endpoint.instance?.getContent()?.instruction}isAdd(t){return this.component.name===x.for(t).add}isClear(t){return this.component.name===x.for(t).clear}isAddAll(t){return this.isAdd(t)&&0===(this.endpoint.name?.length??0)}isClearAll(t){return this.isClear(t)&&0===(this.endpoint.name?.length??0)}get hasNextScopeInstructions(){return(this.nextScopeInstructions?.length??0)>0}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(t){return this.parameters.toSpecifiedParameters(t,this.component.type?.parameters??[])}sameRoute(t){const e=this.route?.match,i=t.route?.match;return null!=e&&null!=i&&("string"==typeof e||"string"==typeof i?e===i:e.id===i.id)}sameComponent(t,e,i=!1,s=!1){return!(i&&!this.sameParameters(t,e,s))&&this.component.same(e.component,s)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,i=!1){return!!this.component.same(e.component,i)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,i=!1,s=!1){const n=x.for(t);let r=e,o=!1;if(i){const t=this.viewport?.instance??null;if(t?.options.noLink)return"";this.needsEndpointDescribed||t?.options.forceDescription&&null==this.viewportScope?.instance||(r=!0),t?.options.fallback===this.component.name&&(o=!0),t?.options.default===this.component.name&&(o=!0)}const a=this.nextScopeInstructions;let h=this.scopeModifier;if(this.route instanceof C&&!this.routeStart)return!s&&Array.isArray(a)?Q.stringify(t,a,e,i):"";const c=this.stringifyShallow(t,r,o);if(h+=c.endsWith(n.scope)?c.slice(0,-n.scope.length):c,!s&&Array.isArray(a)&&a.length>0){const s=Q.stringify(t,a,e,i);s.length>0&&(h+=n.scope,h+=1===a.length?s:`${n.groupStart}${s}${n.groupEnd}`)}return h}clone(t=!1,e=!1,i=!1){const s=Q.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(s.component.set(this.component.instance??this.component.type??this.component.name),s.endpoint.set(this.endpoint.instance??this.endpoint.name)),s.component.name=this.component.name,s.needsEndpointDescribed=this.needsEndpointDescribed,s.route=this.route,s.routeStart=this.routeStart,s.default=this.default,e&&(s.scopeModifier=this.scopeModifier),s.scope=t?this.scope:null,this.hasNextScopeInstructions&&!i&&(s.nextScopeInstructions=Q.clone(this.nextScopeInstructions,t,e)),s}isIn(t,e,i){const s=e.filter((e=>{if(null!=this.route||null!=e.route){if(!e.sameRoute(this))return!1}else if(!e.sameComponent(t,this))return!1;const i=e.component.type??this.component.type,s=this.component.type??e.component.type,n=e.parameters.toSpecifiedParameters(t,i?.parameters),r=this.parameters.toSpecifiedParameters(t,s?.parameters);return!!N.contains(n,r)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===s.length||i&&this.hasNextScopeInstructions&&!s.some((e=>Q.contains(t,e.nextScopeInstructions??[],this.nextScopeInstructions,i))))}getTitle(t){if(this.route instanceof C){const e=this.route.match?.title;if(null!=e)return this.routeStart?"string"==typeof e?e:e(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,i=!1){if(null!=this.route)return(this.route instanceof C?this.route.matching:this.route).split("/").map((e=>e.startsWith(":")?this.parameters.get(t,e.slice(1)):e)).join("/");const s=x.for(t);let n=i?"":this.component.name??"";const r=this.component.type?this.component.type.parameters:null,o=N.stringify(t,this.parameters.toSortedParameters(t,r));return o.length>0&&(n+=i?o:`${s.parameters}${o}${s.parametersEnd}`),null==this.endpoint.name||e||(n+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(n+=s.noScope),n||""}}class Z{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Z(Z.eventName,t)}}Z.eventName="au:router:navigation-navigate";let Y=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=W.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){t instanceof W||(t=W.create(t));const e=new q;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?e.refresh=!0:(e.first=!0,e.new=!0,this.lastNavigationIndex=0,this.navigations=[W.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||t.replacing||t.refreshing?t.refreshing||e.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):t.replacing?(e.replace=!0,e.new=!0,t.index=this.lastNavigationIndex):(e.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?e.forward=!0:t.historyMovement<0&&(e.back=!0)),t.navigation=e,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new U,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){if(t.untracked)t.fromBrowser&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(t.replacing)0===(t.historyMovement??0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const i=t.index;if(e&&(this.navigations=this.navigations.slice(0,i)),this.navigations[i]=t,(this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(const e of this.navigations.slice(i))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,i))}await this.saveState(t.index,!t.fromBrowser)}}async cancel(t){null!=this.options.store&&(t.navigation?.new?t.fromBrowser&&await this.options.store.popNavigatorState():0!==(t.historyMovement??0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const i=this.navigations[e];return this.navigate(i)}getState(){const t=null!=this.options.store?{...this.options.store.state}:{};return{navigations:t?.navigations??[],navigationIndex:t?.navigationIndex??-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>W.create(t))),this.lastNavigationIndex=e}async saveState(t,e){for(let t=0;t<this.navigations.length;t++)this.navigations[t]=W.create(this.navigations[t].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(let e=0;e<t;e++){const i=this.navigations[e];"string"==typeof i.instruction&&"string"==typeof i.fullStateInstruction||await this.serializeNavigation(i,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const i={navigations:(this.navigations??[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?this.options?.store?.pushNavigatorState(i):this.options.store.replaceNavigatorState(i)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Z.eventName,Z.create(t))}toStoreableNavigation(t){const e=t instanceof W?t.toStoredNavigation():t;return e.instruction=Q.stringify(this.container,e.instruction),e.fullStateInstruction=Q.stringify(this.container,e.fullStateInstruction,!1,!0),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let i=[];for(const t of e)"string"!=typeof t.instruction&&i.push(...Q.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&i.push(...Q.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));i=M(i);let s=[];"string"!=typeof t.fullStateInstruction&&(s.push(...t.fullStateInstruction),t.fullStateInstruction=Q.stringify(this.container,t.fullStateInstruction,!1,!0)),"string"!=typeof t.instruction&&(s.push(...t.instruction),t.instruction=Q.stringify(this.container,t.instruction)),s=s.filter(((t,e,i)=>null!=t.component.instance&&i.indexOf(t)===e));const n=[];for(const t of s)await this.freeInstructionComponents(t,i,n)}freeInstructionComponents(t,e,i){const s=t.component.instance,n=t.viewport?.instance??null;if(null!==s&&null!==n&&!i.some((t=>t===s))){if(!e.some((t=>t===s)))return B.run(null,(t=>n.freeContent(t,s)),(()=>{i.push(s)}));if(t.hasNextScopeInstructions)for(const s of t.nextScopeInstructions)return this.freeInstructionComponents(s,e,i)}}};Y=k([A(0,e.Rp),A(1,e.bE)],Y);const X=class{constructor(){this.rootState=new f(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(t,e=!1){let i;if(t instanceof Array)for(const s of t)i=this.$add(s,!1).params,e&&!i[i.length-1]?.isStar&&this.$add({...s,path:`${s.path}/*${p}`},!0);else i=this.$add(t,!1).params,e&&!i[i.length-1]?.isStar&&this.$add({...t,path:`${t.path}/*${p}`},!0);this.cache.clear()}$add(t,e){const i=t.path,s=this.endpointLookup;if(s.has(i))throw y(`Cannot add duplicate path '${i}'.`);const n=new o(i,!0===t.caseSensitive,t.handler),h=""===i?[""]:i.split("/").filter(g),c=[];let l=this.rootState;for(const t of h)switch(l=l.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),i=e?t.slice(1,-1):t.slice(1);if(i===p)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${p}' is used.`);c.push(new r(i,e,!1)),l=new v(i,e).appendTo(l);break}case"*":{const i=t.slice(1);let s;if(i===p){if(!e)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${p}' is used.`);s=1}else s=2;c.push(new r(i,!0,!0)),l=new w(i,s).appendTo(l);break}default:l=new m(t,n.caseSensitive).appendTo(l)}const u=new a(n,c);return l.setEndpoint(u),s.set(i,u),u}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new d(this.rootState);for(let i=0,s=t.length;i<s;++i){const s=t.charAt(i);if(e.advance(s),e.isEmpty)return null}const i=e.getSolution();if(null===i)return null;const{endpoint:s}=i,n=i.getParams();return new h(s,n)}getEndpoint(t){return this.endpointLookup.get(t)??null}};class tt extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){P(this,(e=>e===t))}}class et{static matchEndpoints(t,e,i,s=!1){const n=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!i.some((e=>t===e.endpoint.instance&&!e.cancelled)))),o=new tt(...e.slice());let a=null;for(et.matchKnownEndpoints(t.router,"ViewportScope",o,r,n,!1),s||et.matchKnownEndpoints(t.router,"Viewport",o,r,n,!1),et.matchViewportScopeSegment(t.router,t,o,r,n);null!==(a=o.next());)a.needsEndpointDescribed=!0;return et.matchViewportConfiguration(o,r,n),s||et.matchSpecifiedViewport(o,r,n,!1),et.matchLastViewport(o,r,n),s&&et.matchSpecifiedViewport(o,r,n,!1),{matchedInstructions:n,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,i,s,n,r=!1){let o;for(;null!==(o=i.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(et.matchEndpoint(o,o.endpoint.instance,r),n.push(o),P(s,(t=>t===o.endpoint.instance)),i.removeCurrent())}static matchViewportScopeSegment(t,e,i,s,n){let r;for(;null!==(r=i.next());)for(let o of s)if(o instanceof D&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let i=s.find((t=>t instanceof D&&t.name===o.name));if(void 0===i||r.isAdd(t)){const t=o.addSourceItem();i=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=i}et.matchEndpoint(r,o,!1),n.push(r),P(s,(t=>t===r.endpoint.instance)),i.removeCurrent();break}}static matchViewportConfiguration(t,e,i){let s;for(;null!==(s=t.next());)for(const n of e)if(n instanceof G&&n?.wantComponent(s.component.name)){et.matchEndpoint(s,n,!0),i.push(s),P(e,(t=>t===s.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,i,s){let n;for(;null!==(n=t.next());){let r=n.endpoint.instance;if(null==r){const t=n.endpoint.name;if(0===(t?.length??0))continue;for(const i of e)if(i instanceof G&&t===i.name){r=i;break}}r?.acceptComponent(n.component.name)&&(et.matchEndpoint(n,r,s),i.push(n),P(e,(t=>t===n.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,i){let s;for(;null!==(s=t.next());){const n=[];for(const t of e)t instanceof G&&t.acceptComponent(s.component.name)&&n.push(t);if(1===n.length){const r=n[0];et.matchEndpoint(s,r,!0),i.push(s),P(e,(t=>t===s.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,i){t.endpoint.set(e),i&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof G?e.scope:e.scope.scope)}))}}class it{constructor(t,e,i,s){this.router=t,this.hasScope=e,this.owningScope=i,this.endpointContent=s,this.id=-1,this.parent=null,this.children=[],this.id=++it.lastId,this.owningScope=i??this}static for(t,e){if(null==t)return{scope:null,instruction:e};if(t instanceof it||t instanceof G||t instanceof D)return{scope:t.scope,instruction:e};let s;if(s="res"in t?t:"container"in t?t.container:"$controller"in t?t.$controller.container:i.b_N.for(t,{searchParents:!0})?.container,null==s)return{scope:null,instruction:e};let n=(s.has(ft.closestEndpointKey,!0)?s.get(ft.closestEndpointKey):null)?.scope??null;if(null===n||void 0===e){const t=e??"";return{scope:n,instruction:t.startsWith("/")?t.slice(1):e}}if(e.startsWith("/"))return{scope:null,instruction:e.slice(1)};for(;e.startsWith(".");)if(e.startsWith("./"))e=e.slice(2);else{if(!e.startsWith("../"))break;n=n.parent??n,e=e.slice(3)}return{scope:n,instruction:e}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof G}get isViewportScope(){return this.endpoint instanceof D}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){return`${this.parent?.path??""}${this.routingInstruction?.stringify(this.router,!1,!0,!0)??""}${this.routingInstruction?x.for(this.router).scope:""}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const i=t.indexOf(e);t.splice(i,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const i=e.indexOf(t);e.splice(i,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,i,s,n=""){const r=this.router,o=r.configuration.options,a=t.filter((t=>!(t.route instanceof j)));if(a.length>0){const e=this.findInstructions(a,o.useDirectRouting,o.useConfiguredRoutes);!a.some((t=>!t.component.none||null!=t.route))||e.foundConfiguration||e.foundInstructions||this.unknownRoute(a),(t=[...t.filter((t=>t.route instanceof j)),...e.instructions]).some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(n=(n??"")+e.matching)}const h=Q.resolve(t);h instanceof Promise&&await h,o.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let c=[];({clearEndpoints:c,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(r))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;let l=[],{matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(t,e),p=100;do{p--||r.unresolvedInstructionsError(i,d);const o=[],a=u.map((t=>t.endpoint.instance));u.push(...c.filter((t=>!a.includes(t))).map((t=>Q.createClear(r,t))));const h=await lt.invokeBeforeNavigation(u,i);if(!1===h)return r.cancelNavigation(i,s),[];if(!0!==h&&h!==u){const t=Q.flat(u);d=d.filter((e=>!t.includes(e))),u=h}for(const t of u){const a=t.endpoint.instance;if(null!==a){const h=a.setNextContent(t,i);"skip"!==h&&(o.push(a),s.addEndpoint(a));const d=[a];if("swap"===h&&d.push(...a.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),P(c,(t=>d.includes(t))),P(u,(e=>e!==t&&e.isClear(r)&&d.includes(e.endpoint.instance))),!t.isClear(r)&&t.scope?.parent?.isViewportScope&&(P(c,(e=>e===t.scope.parent.endpoint)),P(u,(e=>e!==t&&e.isClear(r)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==h&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=a.scope,e.endpoint.instance=null;"skip"!==h||t.hasNextScopeInstructions||l.push(...await a.scope.processInstructions([],e,i,s,n))}}const f=u.filter((t=>"skip"===t.endpoint.instance?.transitionAction)),g=f.filter((t=>t.hasNextScopeInstructions));if((0===f.length||0===g.length)&&(r.isRestrictedNavigation||s.finalEndpoint(),s.run(),s.hasAllEndpoints)){const t=s.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(s.cancelled)return r.cancelNavigation(i,s),[];for(const t of o)l.every((e=>e!==t))&&l.push(t);if(e.push(...u.splice(0)),d.length>0&&({matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(d,e)),!r.isRestrictedNavigation&&(u.length>0||d.length>0)&&s.running){const t=s.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===u.length&&0===d.length){const r=[];for(const o of t){if(!o.hasNextScopeInstructions)continue;const t=o.endpoint.instance?.scope??o.endpoint.scope;r.push(t.processInstructions(o.nextScopeInstructions,e,i,s,n))}l.push(...(await Promise.all(r)).flat())}if(({matchedInstructions:u,remainingInstructions:d}=s.dequeueAppendedInstructions(u,e,d)),0===u.length&&0===d.length){const t=e.map((t=>t.endpoint.instance?.connectedCE.pendingPromise?.promise)).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:u,remainingInstructions:d}=s.dequeueAppendedInstructions(u,e,d))):u=c.map((t=>Q.createClear(r,t)))}const m=Q.resolve(u);m instanceof Promise&&await m,l=l.filter((t=>![...e].reverse().find((e=>e.endpoint.instance===t))?.cancelled))}while(u.length>0||d.length>0);return l}unknownRoute(t){const e=this.router.configuration.options,i=Q.stringify(this.router,t);throw null!=t[0].route?e.useConfiguredRoutes?new Error("No matching configured route found for '"+i+"'."):new Error("Can not match '"+i+"' since the router is configured to not use configured routes."):e.useConfiguredRoutes&&e.useDirectRouting?new Error("No matching configured route or component found for '"+i+"'."):e.useConfiguredRoutes?new Error("No matching configured route found for '"+i+"'."):new Error("No matching route/component found for '"+i+"'.")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const i=Q.create(Q.clear(e));return i.scope=this,[i,...t]}return t}getClearAllEndpoints(t){const e=this.router;let i=[];return t.some((t=>(t.scope??this)===this&&t.isClearAll(e)))&&(i=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>!((t.scope??this)===this&&t.isClearAll(e))))),{clearEndpoints:i,instructions:t}}findInstructions(t,e,i){const s=this.router;let n=new C;if(i&&!Q.containsSiblings(s,t)){let i=t.filter((t=>t.isClear(s)||t.isClearAll(s)));const r=t.filter((t=>!t.isClear(s)&&!t.isClearAll(s)));if(r.length>0)for(const o of r){const r="string"==typeof o.route?o.route:o.unparsed??Q.stringify(s,[o]),a=this.findMatchingRoute(r,o.parameters.parametersRecord??{});if(a.foundConfiguration)n=a,n.instructions=[...i,...n.instructions],i=[];else{if(!e)throw new Error(`No route found for: ${Q.stringify(s,t)}!`);n.instructions=[...i,...n.instructions,o],i=[],n.remaining=Q.stringify(s,o.nextScopeInstructions??[])}}else n.instructions=[...i]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Q.stringify(s,t)}!`);n.instructions.push(...t)}n.instructions=n.instructions.filter((t=>""!==t.component.name));for(const t of n.instructions)null===t.scope&&(t.scope=this);return n}matchEndpoints(t,e,i=!1){const s=[],n=t.filter((t=>(t.scope??this)===this)),r=t.filter((t=>(t.scope??this)!==this)),{matchedInstructions:o,remainingInstructions:a}=et.matchEndpoints(this,n,e,i);return s.push(...o),r.push(...a),{matchedInstructions:s,remainingInstructions:r}}addEndpoint(t,e,i,s={}){let n=this.getOwnedScopes().find((i=>i.type===t&&i.endpoint.name===e))?.endpoint??null;return null!=i&&null!=n?.connectedCE&&n.connectedCE!==i&&(n=this.getOwnedScopes(!0).find((s=>s.type===t&&s.endpoint.name===e&&s.endpoint.connectedCE===i))?.endpoint??null),null==n&&(n="Viewport"===t?new G(this.router,e,i,this.scope,!!s.scope,s):new D(this.router,e,i,this.scope,!0,null,s),this.addChild(n.connectedScope)),null!=i&&n.setConnectedCE(i,s),n}removeEndpoint(t,e,i){return!(null===(i??null)&&!e.removeEndpoint(t,i)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const i of e.slice())e.push(...i.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const i of e.slice())e.push(...i.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const i of e.slice())if(i.passThroughScope){const s=e.indexOf(i);e.splice(s,1,...i.getOwnedRoutingScopes(t))}return M(e)}getRoutingInstructions(t){const e=M(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of e){const e=s.instruction.clone(!0,!1,!1);""!==(e.component.name??"")&&(e.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(e))}return i}canUnload(t,e){return B.run(e,(e=>B.runParallel(e,...this.children.map((e=>null!==e.endpoint?i=>e.endpoint.canUnload(t,i):i=>e.canUnload(t,i))))),(t=>t.previousValue.every((t=>t))))}unload(t,e){return B.runParallel(e,...this.children.map((e=>null!==e.endpoint?i=>e.endpoint.unload(t,i):i=>e.unload(t,i))))}matchScope(t,e=!1){const i=[];for(const s of t)s.scope===this?i.push(s):e&&s.hasNextScopeInstructions&&i.push(...this.matchScope(s.nextScopeInstructions,e));return i}findMatchingRoute(t,e){let i=new C;if(this.isViewportScope&&!this.passThroughScope)i=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else if(this.isViewport)i=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else for(const s of this.enabledChildren)if(i=s.findMatchingRoute(t,e),i.foundConfiguration)break;return i.foundConfiguration?i:null!=this.parent?this.parent.findMatchingRoute(t,e):i}findMatchingRouteInRoutes(t,e,i){const s=new C;if(0===e.length)return s;e=e.map((t=>this.ensureProperRoute(t)));const n=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const i of e)n.push({...t,path:i,handler:t}),""!==i&&n.push({...t,path:`${i}/*remainingPath`,handler:t})}(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=e.find((e=>e.id===t));let o={params:{},endpoint:{}};if(null!=r){o.endpoint={route:{handler:r}};const e=(t=Array.isArray(r.path)?r.path[0]:r.path).split("/").map((t=>{if(t.startsWith(":")){const e=t.slice(1).replace(/\?$/,""),s=i[e];return o.params[e]=s,s}return t}));t=e.join("/")}else{const e=new X;e.add(n),o=e.recognize(t)}if(null!=o){s.match=o.endpoint.route.handler,s.matching=t;const n={...o.params};if(null!=n.remainingPath&&(s.remaining=n.remainingPath,Reflect.deleteProperty(n,"remainingPath"),s.matching=s.matching.slice(0,s.matching.indexOf(s.remaining))),s.params=n,null!=s.match?.redirectTo){let t=s.match?.redirectTo;return(s.remaining??"").length>0&&(t+=`/${s.remaining}`),this.findMatchingRouteInRoutes(t,e,i)}}if(s.foundConfiguration){s.instructions=Q.clone(s.match.instructions,!1,!0);const t=s.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(s.params),e.route=s,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}s.instructions.length>0&&(s.instructions[0].routeStart=!0);const e=Q.parse(this.router,s.remaining);if(e.length>0){let t=s.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return s}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Q.from(this.router,t.instructions)),t}}it.lastId=0;class st{constructor(t,e,i=0){this.taskQueue=t,this.item=e,this.cost=i,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class nt{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const i=Array.isArray(t),s=i?t:[t],n=s.map(((t,i)=>Array.isArray(e)?e[i]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of s)r.push(t instanceof st?t:this.createQueueTask(t,n.shift()));return this.pending.push(...r),this.dequeue(),i?r:r[0]}createQueueTask(t,e){return new st(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,i){e(i),this.processing=null,this.dequeue()}}let rt=class{constructor(t,e,i,s,n){this.platform=t,this.window=e,this.history=i,this.location=s,this.ea=n,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new nt}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:i}=this.location,s=this.options.useUrlFragmentHash?i.slice(1):`${t}${e}`,n=this.options.useUrlFragmentHash?i.slice(1).includes("#")?i.slice(i.slice(1).indexOf("#",1)):"":i.slice(1);return new ot(t,e.slice(1),n,s)}async go(t,e=!1){const i=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const s=i,n=e;this.forwardState({eventTask:s,suppressPopstate:n}),t.resolve()},e=>{const i=this.history,s=t;i.go(s),e.resolve()}],[0,1]),i.wait()}async pushNavigatorState(t){const{title:e,path:i}=t.navigations[t.navigationIndex],s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",h=`${s}${i}`;try{r.pushState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,h),this.setTitle(a)}n.resolve()}),1).wait()}async replaceNavigatorState(t,e,i){const s=t.navigations[t.navigationIndex];e??(e=s.title),i??(i=s.path);const n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",h=`${n}${i}`;try{r.replaceState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,h),this.setTitle(a)}s.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const i=t;await this.popState(i),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:i}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async s=>{i||this.notifySubscribers(t),null!==e&&await e.execute(),s.resolve()}),1)}notifySubscribers(t){this.ea.publish(at.eventName,at.create(this.viewerState,t,this.history.state))}async popState(t){await this.go(-1,!0);const e=this.history.state,i=e?.navigations?.[e?.navigationIndex??0];null==i||i.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,i){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${i}`)}}};rt=k([A(0,i.TIm),A(1,i.EmM),A(2,i.zQX),A(3,i.A8T),A(4,e.Rp)],rt);class ot{constructor(t,e,i,s){this.path=t,this.query=e,this.hash=i,this.instruction=s}}class at{constructor(t,e,i,s){this.eventName=t,this.viewerState=e,this.event=i,this.state=s}static create(t,e,i){return new at(at.eventName,t,e,i)}}at.eventName="au:router:navigation-state-change";class ht{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class ct{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,i){const s=new ct(t,e);return i.syncStates.forEach((t=>s.addSyncState(t))),s}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new U;this.syncStates.set(t,e)}addEndpoint(t){const e=new ht(t);return this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&P(this.entities,(t=>t===e))}setEndpointStep(t,e){let i=this.entities.find((e=>e.endpoint===t));void 0===i&&(i=this.addEndpoint(t)),i.step=e}getEndpointStep(t){return this.entities.find((e=>e.endpoint===t))?.step??null}addEndpointState(t,e){let i=this.entities.find((e=>e.endpoint===t));void 0===i&&(i=this.addEndpoint(t));const s=i.states.get(e);s instanceof U&&s.resolve(),i.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const i=this.syncStates.get(t);if(void 0!==i){if(null!==e){const s=this.entities.find((t=>t.endpoint===e));if(null===s?.syncPromise&&i.isPending)return s.syncingState=t,s.syncPromise=new U,s.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),s.syncPromise.promise}return i.isPending?i.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let i=this.entities.find((e=>e.endpoint===t));if(null==i&&(i=this.addEndpoint(t)),i.hasReachedState(e))return;let s=i.states.get(e);return null==s&&(s=new U,i.states.set(e,s)),s.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{const e=t.endpoint.cancelContentChange(this);e instanceof Promise&&e.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{this.navigation.process?.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,i){let s=[...this.appendedInstructions];t=[...t],i=[...i];const n=s.filter((t=>!t.default)),r=s.filter((t=>t.default));for(s=n.length>0?[...n]:[...r];s.length>0;){const n=s.shift();P(this.appendedInstructions,(t=>t===n));const r=e.some((t=>!t.cancelled&&t.sameEndpoint(n,!0))),o=t.find((t=>t.sameEndpoint(n,!0))),a=i.find((t=>t.sameEndpoint(n,!0)));n.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&P(t,(t=>t===o)),void 0!==a&&P(i,(t=>t===a)),null!==n.endpoint.instance?t.push(n):i.push(n))}return{matchedInstructions:t,remainingInstructions:i}}checkSyncState(t){const e=this.syncStates.get(t);if(void 0!==e&&this.hasAllEndpoints&&e.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const e of this.entities)e.syncingState===t&&(e.syncPromise?.resolve(),e.syncPromise=null,e.syncingState=null);e.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class lt{constructor(t,e,i){this.hook=t,this.id=i,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include??[])this.includeTargets.push(new ut(t));for(const t of e.exclude??[])this.excludeTargets.push(new ut(t))}static add(t,e){const i=new lt(t,e??{},++this.lastIdentity);return this.hooks[i.type].push(i),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const i=this.hooks[e].findIndex((e=>e.id===t));i>=0&&this.hooks[e].splice(i,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,i){let s=i;for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(i))if(s=await n.invoke(e,i),"boolean"==typeof s){if(!s)return!1}else i=s;return s}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}lt.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},lt.lastIdentity=0;class ut{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(O.isType(t))this.componentType=t,this.componentName=O.getName(t);else{const e=t;null!=e.component&&(this.componentType=O.isType(e.component)?O.getType(e.component):null,this.componentName=O.getName(e.component)),null!=e.viewport&&(this.viewport=J.isInstance(e.viewport)?e.viewport:null,this.viewportName=J.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Q.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class dt{static async getTitle(t,e,i){let s=await lt.invokeTransformTitle(t,e);if("string"!=typeof s){const t=dt.stringifyTitles(s,e,i);s=i.appTitle,s=s.replace(/\${componentTitles}/g,t),s=s.replace(/\${appTitleSeparator}/g,""!==t?i.appTitleSeparator:"")}return s=await lt.invokeTransformTitle(s,e),s}static stringifyTitles(t,e,i){return t.map((t=>dt.stringifyTitle(t,e,i))).filter((t=>(t?.length??0)>0)).join(" + ")}static stringifyTitle(t,e,i){const s=t.nextScopeInstructions;let n=dt.resolveTitle(t,e,i);if(Array.isArray(s)&&s.length>0){let t=dt.stringifyTitles(s,e,i);t.length>0&&(1!==s.length&&(t=`[ ${t} ]`),n=n.length>0?"top-down"===i.componentTitleOrder?n+i.componentTitleSeparator+t:t+i.componentTitleSeparator+n:t)}return n}static resolveTitle(t,e,i){let s=t.getTitle(e);return null!=i.transformTitle&&(s=i.transformTitle(s,t,e)),s}}const pt=e.DI.createInterface("IRouter",(t=>t.singleton(ft)));class ft{constructor(t,e,i,s,n,r){this.container=t,this.ea=e,this.navigator=i,this.viewer=s,this.store=n,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{if(null!=t.state?.navigationIndex){const e=W.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{this.loadedFirst=!0;const e=this.configuration.options,i=ct.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(yt.eventName,yt.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await lt.invokeTransformFromUrl(t.instruction,i.navigation);const n=e.basePath;null!==n&&"string"==typeof s&&s.startsWith(n)&&!e.useUrlFragmentHash&&(s=s.slice(n.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Q("")]:Q.parse(this,s)),t.scope??(t.scope=this.rootScope.scope);const r=await t.scope.processInstructions(s,[],t,i);return B.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&r.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(;this.coordinators.length>0&&this.coordinators[0].completed;){const t=this.coordinators.shift();await this.navigator.finalize(t.navigation,!1),this.ea.publish(Ct.eventName,Ct.create(t.navigation)),this.ea.publish(bt.eventName,bt.create(t.navigation)),t.navigation.process?.resolve(!0)}}))}}static get inject(){return[e.bE,e.Rp,Y,rt,rt,jt]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(i.IUY);this.rootScope=new D(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const i=new URL(t.host.baseURI);e.basePath=i.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(at.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Z.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(mt.eventName,mt.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(vt.eventName,vt.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,i=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,i}getEndpoint(t,e){return this.allEndpoints(t).find((t=>t.name===e))??null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,i,s,n,r){const o=s.container,a=(o.has(ft.closestEndpointKey,!0)?o.get(ft.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=a.addEndpoint(i,n,s,r),e.YM.instance(ft.closestEndpointKey,t).register(o)),t}disconnectEndpoint(t,e,i){if(!e.connectedScope.parent.removeEndpoint(t,e,i))throw new Error("Router failed to remove endpoint: "+e.name)}async load(t,e){e=e??{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let i=null;if(({instructions:t,scope:i}=this.applyLoadOptions(t,e)),e.append&&(!this.loadedFirst||this.isNavigating))return t=Q.from(this,t),this.appendInstructions(t,i),Promise.resolve();const s=W.create({instruction:t,fullStateInstruction:"",scope:i,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:(e.replacing??!1)||e.replace,repeating:e.append,fromBrowser:e.fromBrowser??!1,origin:e.origin,completed:!1});return this.navigator.navigate(s)}applyLoadOptions(t,e,i=!0){"origin"in(e=e??{})&&!("context"in e)&&(e.context=e.origin);const{scope:s,instruction:n}=it.for(e.context??null,"string"==typeof t?t:void 0);if("string"==typeof t)if(i)t=n;else{t=Q.from(this,n);for(const e of t)null===e.scope&&(e.scope=s)}else{t=Q.from(this,t);for(const e of t)null===e.scope&&(e.scope=s)}return{instructions:t,scope:s}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=e??{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>t.scope??(t.scope=this.rootScope.scope)));const i=M(t.map((t=>t.scope)));for(const e of i){const i=e.matchScope(t,!1),s=e.matchScope(this.activeComponents,!0);if(!Q.contains(this,s,i,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(kt.eventName,kt.create(t)),this.ea.publish(bt.eventName,bt.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(St.eventName,St.create(t)),this.ea.publish(bt.eventName,bt.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const i of t)null===i.scope&&(i.scope=e);let i=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){i=this.coordinators[t];break}if(null===i){if(this.loadedFirst)throw Error("Router failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}i?.enqueueAppendedInstructions(t)}async updateNavigation(t){this.rootScope.scope.reparentRoutingInstructions();const e=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:i}=this.rootScope.scope.matchEndpoints(e,[],!0),s=100;for(;i.length>0;){if(0==s--)throw new Error("Router failed to find viewport when updating viewer paths.");i=i.map((t=>{const{matchedInstructions:e}=t.endpoint.instance.scope.matchEndpoints(t.nextScopeInstructions??[],[],!0);return e})).flat()}t.timestamp>=(this.activeNavigation?.timestamp??0)&&(this.activeNavigation=t,this.activeComponents=e);let n=await lt.invokeTransformToUrl(e,t);if("string"!=typeof n&&(n=Q.stringify(this,n,!1,!0)),n=await lt.invokeTransformToUrl(n,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[i,s]of Object.entries(t.parameters)){i=encodeURIComponent(i),Array.isArray(s)||(s=[s]);for(const t of s)e.append(i,encodeURIComponent(t))}t.query=e.toString()}let r=`${this.configuration.options.basePath}/`;(null===r||""!==n&&"/"===n[0]||this.configuration.options.useUrlFragmentHash)&&(r="");const o=(t.query?.length??0)>0?"?"+t.query:"",a=(t.fragment?.length??0)>0?"#"+t.fragment:"";t.path=r+n+o+a;const h=[Q.create(Q.clear(this))];if(h.push(...Q.clone(e,this.statefulHistory)),t.fullStateInstruction=h,null===(t.title??null)){const i=await dt.getTitle(e,t,this.configuration.options.title);null!==i&&(t.title=i)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[i,s]=t.split("#");t=i,e.fragment=s}return t}extractQuery(t,e){if("string"==typeof t&&null==e.query){const[i,s]=t.split("?");t=i,e.query=s}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(e.parameters??(e.parameters={}),new URLSearchParams(e.query).forEach(((t,i)=>{i=decodeURIComponent(i),t=decodeURIComponent(t),i in e.parameters?(Array.isArray(e.parameters[i])||(e.parameters[i]=[e.parameters[i]]),e.parameters[i].push(t)):e.parameters[i]=t}))),t}}ft.closestEndpointKey=e.b$.annotation.keyFor("closest-endpoint");class gt{constructor(t){this.eventName=t}}class mt extends gt{static create(){return new mt(this.eventName)}}mt.eventName="au:router:router-start";class vt extends gt{static create(){return new vt(this.eventName)}}vt.eventName="au:router:router-stop";class wt{constructor(t,e){this.eventName=t,this.navigation=e}}class yt extends wt{static create(t){return new yt(this.eventName,t)}}yt.eventName="au:router:navigation-start";class bt extends wt{static create(t){return new bt(this.eventName,t)}}bt.eventName="au:router:navigation-end";class St extends wt{static create(t){return new St(this.eventName,t)}}St.eventName="au:router:navigation-cancel";class Ct extends wt{static create(t){return new Ct(this.eventName,t)}}Ct.eventName="au:router:navigation-complete";class kt extends wt{static create(t){return new kt(this.eventName,t)}}kt.eventName="au:router:navigation-error";const At=e.DI.createInterface("ILinkHandler",(t=>t.singleton(Tt)));let Tt=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const e=t.currentTarget;if(e.hasAttribute("external"))return;const s=e.getAttribute("target")??"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const n=i.brw.for(e,"load"),r=void 0!==n?n.viewModel.value:null,o=this.router.configuration.options.useHref&&e.hasAttribute("href")?e.getAttribute("href"):null;if(!(null!==r&&0!==r.length||null!==o&&0!==o.length))return;t.preventDefault();let a=r??o??"";"string"==typeof a&&a.startsWith("#")&&(a=a.slice(1),a.startsWith("/")||(a=`/${a}`)),this.router.load(a,{origin:e}).catch((t=>{throw t}))}};var $t;function xt(t,e,i,s,n=!1){if(n)return""===e;if(i)return e;const r=s.getAttribute(t)??"";return r.length>0?r:e}function It(t,e){if(!t.isActive)return new Promise((t=>{const i=e.subscribe(mt.eventName,(()=>{t(),i.dispose()}))}))}function Rt(t,e,s,n){let r=i.brw.for(s,"considered-active")?.viewModel?.value;void 0===r&&(r=n);const o=t.applyLoadOptions(r,{context:e}),a=Q.from(t,o.instructions);for(const t of a)null===t.scope&&(t.scope=o.scope);return a}function Et(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??(e=t),e}Tt=k([A(0,i.EmM),A(1,pt)],Tt),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}($t||($t={}));const Nt=i.b_N.createInjectable();let Ot=class{constructor(t,e,i,s,n,r){this.router=t,this.element=e,this.container=i,this.ea=s,this.parentViewport=n,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new U)),B.run(null,(()=>It(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,i){return this.isBound=!0,B.run(null,(()=>It(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{null!=this.endpoint?.activeResolve&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{if(null!==this.endpoint&&null===this.endpoint.getNextContent())return this.endpoint.activate(null,t,this.controller,i,void 0)?.asValue}))}detaching(t,e,i){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,i)}unbinding(t,e,i){if(null!==this.endpoint)return this.disconnect(null)}dispose(){this.endpoint?.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,i=xt("name",this.name,t,e),s={};s.scope=!xt("no-scope",this.noScope,!1,e,!0),s.usedBy=xt("used-by",this.usedBy,t,e),s.default=xt("default",this.default,t,e),s.fallback=xt("fallback",this.fallback,t,e),s.fallbackAction=xt("fallback-action",this.fallbackAction,t,e),s.noLink=xt("no-link",this.noLink,t,e,!0),s.noTitle=xt("no-title",this.noTitle,t,e,!0),s.noHistory=xt("no-history",this.noHistory,t,e,!0),s.stateful=xt("stateful",this.stateful,t,e,!0),Object.keys(s).forEach((t=>{void 0===s[t]&&delete s[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,i,s);const n=this.parentViewport;null!=n&&(P(n.pendingChildren,(t=>t===this)),0===n.pendingChildren.length&&null!==n.pendingPromise&&(n.pendingPromise.resolve(),n.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const i=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const s in t)this.element.classList.toggle(`${i}-${s}`,e&&t[s])}};k([i.ExJ],Ot.prototype,"name",void 0),k([i.ExJ],Ot.prototype,"usedBy",void 0),k([i.ExJ],Ot.prototype,"default",void 0),k([i.ExJ],Ot.prototype,"fallback",void 0),k([i.ExJ],Ot.prototype,"fallbackAction",void 0),k([i.ExJ],Ot.prototype,"noScope",void 0),k([i.ExJ],Ot.prototype,"noLink",void 0),k([i.ExJ],Ot.prototype,"noTitle",void 0),k([i.ExJ],Ot.prototype,"noHistory",void 0),k([i.ExJ],Ot.prototype,"stateful",void 0),Ot=k([(0,i.MoW)({name:"au-viewport",injectable:Nt}),A(0,pt),A(1,i.ND1),A(2,e.bE),A(3,e.Rp),A(4,Nt),A(5,i.PEj)],Ot);const Pt=i.b_N.createInjectable();let Mt=class{constructor(t,e,i,s,n){this.router=t,this.element=e,this.container=i,this.parent=s,this.parentController=n,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,i){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,i){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let i=this.getAttribute("catches",this.catches);void 0!==i&&(e.catches=i),i=this.getAttribute("collection",this.collection,!0),void 0!==i&&(e.collection=i),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,i=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(i)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};k([i.ExJ],Mt.prototype,"name",void 0),k([i.ExJ],Mt.prototype,"catches",void 0),k([i.ExJ],Mt.prototype,"collection",void 0),k([i.ExJ],Mt.prototype,"source",void 0),Mt=k([(0,i.MoW)({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:Pt}),A(0,pt),A(1,i.ND1),A(2,e.bE),A(3,Pt),A(4,i.qN_)],Mt);let Ut=class{constructor(t,e,i,s){this.element=t,this.router=e,this.linkHandler=i,this.ea=s,this.h=!1,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){null==this.value&&(this.h=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(bt.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(this.h&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t=this.value;if("string"!=typeof t){const e=Q.from(this.router,t).shift(),i=this.u(t);i.foundConfiguration&&(e.route=i.matching),t=Q.stringify(this.router,[e])}const{scope:e,instruction:i}=it.for(this.element,t);t=`${e?.path??""}${i??""}`,this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#/${t}`),this.element.setAttribute("href",t)}}async updateActive(){const t=i.brw.for(this.element,"load").parent,e="string"==typeof this.value?{id:this.value,path:this.value}:this.value,s=this.u(e),n=s.foundConfiguration?s.instructions:Rt(this.router,t,this.element,this.value);Et(this.element).classList.toggle(this.activeClass,this.router.checkActive(n,{context:t}))}u(t){if("string"==typeof t)return new C;const e=it.for(this.element).scope??this.router.rootScope.scope;if(null!=t.id)return e.findMatchingRoute(t.id,t.parameters??{});const i=t.path;return null!=i?e.findMatchingRoute(i,t.parameters??{}):new C}};k([(0,i.ExJ)({mode:2})],Ut.prototype,"value",void 0),k([i.ExJ],Ut.prototype,"component",void 0),k([i.ExJ],Ut.prototype,"parameters",void 0),k([i.ExJ],Ut.prototype,"viewport",void 0),k([i.ExJ],Ut.prototype,"id",void 0),Ut=k([(0,i.OVJ)("load"),A(0,i.ND1),A(1,pt),A(2,At),A(3,e.Rp)],Ut);let Bt=class{constructor(t,e,i,s){this.element=t,this.router=e,this.linkHandler=i,this.ea=s,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(bt.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription?.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=i.brw.for(this.element,"href").parent,e=Rt(this.router,t,this.element,this.value);Et(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){return this.$controller.parent.children?.some((t=>1===t.vmKind&&t.viewModel instanceof Ut))??!1}};k([(0,i.ExJ)({mode:2})],Bt.prototype,"value",void 0),Bt=k([(0,i.OVJ)({name:"href",noMultiBindings:!0}),A(0,i.ND1),A(1,pt),A(2,At),A(3,e.Rp)],Bt);let Lt=class{};k([(0,i.ExJ)({mode:2})],Lt.prototype,"value",void 0),Lt=k([(0,i.OVJ)("considered-active")],Lt);const jt=e.DI.createInterface("IRouterConfiguration",(t=>t.singleton(Dt))),Ft=[pt],Vt=[Ot,Mt,Ut,Bt,Lt];class Dt{static register(t){const e=t.get(jt);return e.options=Dt.options,e.options.setRouterConfiguration(e),Dt.options=R.create(),t.register(...Ft,...Vt,i.FdA.activating(pt,Dt.configurationCall),i.FdA.activated(pt,(t=>t.initialLoad())),i.FdA.deactivated(pt,(t=>t.stop())))}static customize(t){return void 0===t?(Dt.options=R.create(),Dt.configurationCall=t=>{t.start()}):t instanceof Function?Dt.configurationCall=t:(Dt.options=R.create(),Dt.options.apply(t)),Dt}static createContainer(){return this.register(e.DI.createContainer())}static for(t){return t instanceof ft?t.configuration:t.get(jt)}apply(t,e=!1){e&&(this.options=R.create()),this.options.apply(t)}addHook(t,e){return lt.add(t,e)}removeHook(t){return lt.remove(t)}removeAllHooks(){return lt.removeAll()}}Dt.options=R.create(),Dt.configurationCall=t=>{t.start()};var Ht=n(58);n(968);const qt=Ht.o.getOrCreate(globalThis);class Wt extends i.EQ_{constructor(t=function(){return e.DI.createContainer().register(e.YM.instance(i.TIm,qt),i.BkS)}()){super(t)}static start(t){return(new Wt).start(t)}static app(t){return(new Wt).app(t)}static enhance(t,e){return(new Wt).enhance(t,e)}static register(...t){return(new Wt).register(...t)}app(t){if(i.b_N.isType(t)){const e=i.b_N.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}var _t=n(655),zt=n(379),Kt=n.n(zt),Gt=n(795),Jt=n.n(Gt),Qt=n(569),Zt=n.n(Qt),Yt=n(565),Xt=n.n(Yt),te=n(216),ee=n.n(te),ie=n(589),se=n.n(ie),ne=n(138),re={};re.styleTagTransform=se(),re.setAttributes=Xt(),re.insert=Zt().bind(null,"head"),re.domAPI=Jt(),re.insertStyleElement=ee(),Kt()(ne.Z,re),ne.Z&&ne.Z.locals&&ne.Z.locals;const oe="my-app",ae="<h1>Aurelia</h1>",he=ae,ce=[];let le;function ue(t){le||(le=i.b_N.define({name:oe,template:ae,dependencies:ce})),t.register(le)}let de=class{};de.routes=[{path:"",component:()=>n.e(142).then(n.bind(n,142)),id:"home"},{path:"blog",component:()=>n.e(407).then(n.bind(n,407)),id:"blog"},{path:"blog/:postName",component:()=>n.e(371).then(n.bind(n,371)),id:"blog-post"}],de=(0,_t.gn)([(0,i.MoW)(t)],de),Wt.register(Dt.customize({useUrlFragmentHash:!1})).app(de).start()})()})();